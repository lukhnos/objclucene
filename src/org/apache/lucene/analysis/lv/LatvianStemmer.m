//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./analysis/common/src/java/org/apache/lucene/analysis/lv/LatvianStemmer.java
//

#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "org/apache/lucene/analysis/lv/LatvianStemmer.h"
#include "org/apache/lucene/analysis/util/StemmerUtil.h"

@interface OrgApacheLuceneAnalysisLvLatvianStemmer ()

/*!
 @brief Most cases are handled except for the ambiguous ones:
 <ul>
 <li> s -&gt; š
 <li> t -&gt; š
 <li> d -&gt; ž
 <li> z -&gt; ž
 </ul>
 */
- (jint)unpalatalizeWithCharArray:(IOSCharArray *)s
                          withInt:(jint)len;

/*!
 @brief Count the vowels in the string, we always require at least
 one in the remaining stem to accept it.
 */
- (jint)numVowelsWithCharArray:(IOSCharArray *)s
                       withInt:(jint)len;

@end

__attribute__((unused)) static jint OrgApacheLuceneAnalysisLvLatvianStemmer_unpalatalizeWithCharArray_withInt_(OrgApacheLuceneAnalysisLvLatvianStemmer *self, IOSCharArray *s, jint len);

__attribute__((unused)) static jint OrgApacheLuceneAnalysisLvLatvianStemmer_numVowelsWithCharArray_withInt_(OrgApacheLuceneAnalysisLvLatvianStemmer *self, IOSCharArray *s, jint len);

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneAnalysisLvLatvianStemmer)

IOSObjectArray *OrgApacheLuceneAnalysisLvLatvianStemmer_affixes;

@implementation OrgApacheLuceneAnalysisLvLatvianStemmer

+ (IOSObjectArray *)affixes {
  return OrgApacheLuceneAnalysisLvLatvianStemmer_affixes;
}

- (jint)stemWithCharArray:(IOSCharArray *)s
                  withInt:(jint)len {
  jint numVowels = OrgApacheLuceneAnalysisLvLatvianStemmer_numVowelsWithCharArray_withInt_(self, s, len);
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(OrgApacheLuceneAnalysisLvLatvianStemmer_affixes))->size_; i++) {
    OrgApacheLuceneAnalysisLvLatvianStemmer_Affix *affix = IOSObjectArray_Get(OrgApacheLuceneAnalysisLvLatvianStemmer_affixes, i);
    if (numVowels > ((OrgApacheLuceneAnalysisLvLatvianStemmer_Affix *) nil_chk(affix))->vc_ && len >= ((IOSCharArray *) nil_chk(affix->affix_))->size_ + 3 && OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withCharArray_(s, len, affix->affix_)) {
      len -= ((IOSCharArray *) nil_chk(affix->affix_))->size_;
      return affix->palatalizes_ ? OrgApacheLuceneAnalysisLvLatvianStemmer_unpalatalizeWithCharArray_withInt_(self, s, len) : len;
    }
  }
  return len;
}

- (jint)unpalatalizeWithCharArray:(IOSCharArray *)s
                          withInt:(jint)len {
  return OrgApacheLuceneAnalysisLvLatvianStemmer_unpalatalizeWithCharArray_withInt_(self, s, len);
}

- (jint)numVowelsWithCharArray:(IOSCharArray *)s
                       withInt:(jint)len {
  return OrgApacheLuceneAnalysisLvLatvianStemmer_numVowelsWithCharArray_withInt_(self, s, len);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgApacheLuceneAnalysisLvLatvianStemmer_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (void)initialize {
  if (self == [OrgApacheLuceneAnalysisLvLatvianStemmer class]) {
    JreStrongAssignAndConsume(&OrgApacheLuceneAnalysisLvLatvianStemmer_affixes, [IOSObjectArray newArrayWithObjects:(id[]){ create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"ajiem", 3, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"ajai", 3, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"ajam", 2, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"aj\u0101m", 2, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"ajos", 2, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"aj\u0101s", 2, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"iem", 2, true), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"aj\u0101", 2, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"ais", 2, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"ai", 2, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"ei", 2, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u0101m", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"am", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u0113m", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u012bm", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"im", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"um", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"us", 1, true), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"as", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u0101s", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"es", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"os", 1, true), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"ij", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u012bs", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u0113s", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"is", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"ie", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"u", 1, true), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"a", 1, true), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"i", 1, true), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"e", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u0101", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u0113", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u012b", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u016b", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"o", 1, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"s", 0, false), create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(@"\u0161", 0, false) } count:38 type:OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_class_()]);
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneAnalysisLvLatvianStemmer)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "stemWithCharArray:withInt:", "stem", "I", 0x1, NULL, NULL },
    { "unpalatalizeWithCharArray:withInt:", "unpalatalize", "I", 0x2, NULL, NULL },
    { "numVowelsWithCharArray:withInt:", "numVowels", "I", 0x2, NULL, NULL },
    { "init", "LatvianStemmer", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "affixes", "affixes", 0x18, "[Lorg.apache.lucene.analysis.lv.LatvianStemmer$Affix;", &OrgApacheLuceneAnalysisLvLatvianStemmer_affixes, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.analysis.lv.LatvianStemmer$Affix;"};
  static const J2ObjcClassInfo _OrgApacheLuceneAnalysisLvLatvianStemmer = { 2, "LatvianStemmer", "org.apache.lucene.analysis.lv", NULL, 0x1, 4, methods, 1, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneAnalysisLvLatvianStemmer;
}

@end

jint OrgApacheLuceneAnalysisLvLatvianStemmer_unpalatalizeWithCharArray_withInt_(OrgApacheLuceneAnalysisLvLatvianStemmer *self, IOSCharArray *s, jint len) {
  if (IOSCharArray_Get(nil_chk(s), len) == 'u') {
    if (OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"k\u0161")) {
      len++;
      *IOSCharArray_GetRef(s, len - 2) = 's';
      *IOSCharArray_GetRef(s, len - 1) = 't';
      return len;
    }
    if (OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"\u0146\u0146")) {
      *IOSCharArray_GetRef(s, len - 2) = 'n';
      *IOSCharArray_GetRef(s, len - 1) = 'n';
      return len;
    }
  }
  if (OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"pj") || OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"bj") || OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"mj") || OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"vj")) {
    return len - 1;
  }
  else if (OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"\u0161\u0146")) {
    *IOSCharArray_GetRef(s, len - 2) = 's';
    *IOSCharArray_GetRef(s, len - 1) = 'n';
    return len;
  }
  else if (OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"\u017e\u0146")) {
    *IOSCharArray_GetRef(s, len - 2) = 'z';
    *IOSCharArray_GetRef(s, len - 1) = 'n';
    return len;
  }
  else if (OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"\u0161\u013c")) {
    *IOSCharArray_GetRef(s, len - 2) = 's';
    *IOSCharArray_GetRef(s, len - 1) = 'l';
    return len;
  }
  else if (OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"\u017e\u013c")) {
    *IOSCharArray_GetRef(s, len - 2) = 'z';
    *IOSCharArray_GetRef(s, len - 1) = 'l';
    return len;
  }
  else if (OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"\u013c\u0146")) {
    *IOSCharArray_GetRef(s, len - 2) = 'l';
    *IOSCharArray_GetRef(s, len - 1) = 'n';
    return len;
  }
  else if (OrgApacheLuceneAnalysisUtilStemmerUtil_endsWithWithCharArray_withInt_withNSString_(s, len, @"\u013c\u013c")) {
    *IOSCharArray_GetRef(s, len - 2) = 'l';
    *IOSCharArray_GetRef(s, len - 1) = 'l';
    return len;
  }
  else if (IOSCharArray_Get(s, len - 1) == 0x010d) {
    *IOSCharArray_GetRef(s, len - 1) = 'c';
    return len;
  }
  else if (IOSCharArray_Get(s, len - 1) == 0x013c) {
    *IOSCharArray_GetRef(s, len - 1) = 'l';
    return len;
  }
  else if (IOSCharArray_Get(s, len - 1) == 0x0146) {
    *IOSCharArray_GetRef(s, len - 1) = 'n';
    return len;
  }
  return len;
}

jint OrgApacheLuceneAnalysisLvLatvianStemmer_numVowelsWithCharArray_withInt_(OrgApacheLuceneAnalysisLvLatvianStemmer *self, IOSCharArray *s, jint len) {
  jint n = 0;
  for (jint i = 0; i < len; i++) {
    switch (IOSCharArray_Get(nil_chk(s), i)) {
      case 'a':
      case 'e':
      case 'i':
      case 'o':
      case 'u':
      case 0x0101:
      case 0x012b:
      case 0x0113:
      case 0x016b:
      n++;
    }
  }
  return n;
}

void OrgApacheLuceneAnalysisLvLatvianStemmer_init(OrgApacheLuceneAnalysisLvLatvianStemmer *self) {
  NSObject_init(self);
}

OrgApacheLuceneAnalysisLvLatvianStemmer *new_OrgApacheLuceneAnalysisLvLatvianStemmer_init() {
  J2OBJC_NEW_IMPL(OrgApacheLuceneAnalysisLvLatvianStemmer, init)
}

OrgApacheLuceneAnalysisLvLatvianStemmer *create_OrgApacheLuceneAnalysisLvLatvianStemmer_init() {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneAnalysisLvLatvianStemmer, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneAnalysisLvLatvianStemmer)

@implementation OrgApacheLuceneAnalysisLvLatvianStemmer_Affix

- (instancetype)initWithNSString:(NSString *)affix
                         withInt:(jint)vc
                     withBoolean:(jboolean)palatalizes {
  OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(self, affix, vc, palatalizes);
  return self;
}

- (void)dealloc {
  RELEASE_(affix_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withInt:withBoolean:", "Affix", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "affix_", NULL, 0x0, "[C", NULL, NULL, .constantValue.asLong = 0 },
    { "vc_", NULL, 0x0, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "palatalizes_", NULL, 0x0, "Z", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneAnalysisLvLatvianStemmer_Affix = { 2, "Affix", "org.apache.lucene.analysis.lv", "LatvianStemmer", 0x8, 1, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix;
}

@end

void OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(OrgApacheLuceneAnalysisLvLatvianStemmer_Affix *self, NSString *affix, jint vc, jboolean palatalizes) {
  NSObject_init(self);
  JreStrongAssign(&self->affix_, [((NSString *) nil_chk(affix)) toCharArray]);
  self->vc_ = vc;
  self->palatalizes_ = palatalizes;
}

OrgApacheLuceneAnalysisLvLatvianStemmer_Affix *new_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(NSString *affix, jint vc, jboolean palatalizes) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneAnalysisLvLatvianStemmer_Affix, initWithNSString_withInt_withBoolean_, affix, vc, palatalizes)
}

OrgApacheLuceneAnalysisLvLatvianStemmer_Affix *create_OrgApacheLuceneAnalysisLvLatvianStemmer_Affix_initWithNSString_withInt_withBoolean_(NSString *affix, jint vc, jboolean palatalizes) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneAnalysisLvLatvianStemmer_Affix, initWithNSString_withInt_withBoolean_, affix, vc, palatalizes)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneAnalysisLvLatvianStemmer_Affix)
