//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./join/src/java/org/apache/lucene/search/join/GlobalOrdinalsCollector.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "org/apache/lucene/index/DocValues.h"
#include "org/apache/lucene/index/LeafReader.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/index/MultiDocValues.h"
#include "org/apache/lucene/index/SortedDocValues.h"
#include "org/apache/lucene/search/LeafCollector.h"
#include "org/apache/lucene/search/Scorer.h"
#include "org/apache/lucene/search/join/GlobalOrdinalsCollector.h"
#include "org/apache/lucene/util/LongBitSet.h"
#include "org/apache/lucene/util/LongValues.h"

@interface OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector () {
 @public
  OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *this$0_;
  OrgApacheLuceneIndexSortedDocValues *docTermOrds_;
  OrgApacheLuceneUtilLongValues *segmentOrdToGlobalOrdLookup_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector, this$0_, OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector, docTermOrds_, OrgApacheLuceneIndexSortedDocValues *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector, segmentOrdToGlobalOrdLookup_, OrgApacheLuceneUtilLongValues *)

@interface OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector () {
 @public
  OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *this$0_;
  OrgApacheLuceneIndexSortedDocValues *docTermOrds_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector, this$0_, OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector, docTermOrds_, OrgApacheLuceneIndexSortedDocValues *)

@implementation OrgApacheLuceneSearchJoinGlobalOrdinalsCollector

- (instancetype)initWithNSString:(NSString *)field
withOrgApacheLuceneIndexMultiDocValues_OrdinalMap:(OrgApacheLuceneIndexMultiDocValues_OrdinalMap *)ordinalMap
                        withLong:(jlong)valueCount {
  OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_initWithNSString_withOrgApacheLuceneIndexMultiDocValues_OrdinalMap_withLong_(self, field, ordinalMap, valueCount);
  return self;
}

- (OrgApacheLuceneUtilLongBitSet *)getCollectorOrdinals {
  return collectedOrds_;
}

- (jboolean)needsScores {
  return false;
}

- (id<OrgApacheLuceneSearchLeafCollector>)getLeafCollectorWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  OrgApacheLuceneIndexSortedDocValues *docTermOrds = OrgApacheLuceneIndexDocValues_getSortedWithOrgApacheLuceneIndexLeafReader_withNSString_([((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context)) reader], field_);
  if (ordinalMap_ != nil) {
    OrgApacheLuceneUtilLongValues *segmentOrdToGlobalOrdLookup = [ordinalMap_ getGlobalOrdsWithInt:context->ord_];
    return create_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_withOrgApacheLuceneUtilLongValues_(self, docTermOrds, segmentOrdToGlobalOrdLookup);
  }
  else {
    return create_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_(self, docTermOrds);
  }
}

- (void)dealloc {
  RELEASE_(field_);
  RELEASE_(collectedOrds_);
  RELEASE_(ordinalMap_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withOrgApacheLuceneIndexMultiDocValues_OrdinalMap:withLong:", "GlobalOrdinalsCollector", NULL, 0x0, NULL, NULL },
    { "getCollectorOrdinals", NULL, "Lorg.apache.lucene.util.LongBitSet;", 0x1, NULL, NULL },
    { "needsScores", NULL, "Z", 0x1, NULL, NULL },
    { "getLeafCollectorWithOrgApacheLuceneIndexLeafReaderContext:", "getLeafCollector", "Lorg.apache.lucene.search.LeafCollector;", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "field_", NULL, 0x10, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "collectedOrds_", NULL, 0x10, "Lorg.apache.lucene.util.LongBitSet;", NULL, NULL, .constantValue.asLong = 0 },
    { "ordinalMap_", NULL, 0x10, "Lorg.apache.lucene.index.MultiDocValues$OrdinalMap;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.join.GlobalOrdinalsCollector$OrdinalMapCollector;", "Lorg.apache.lucene.search.join.GlobalOrdinalsCollector$SegmentOrdinalCollector;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinGlobalOrdinalsCollector = { 2, "GlobalOrdinalsCollector", "org.apache.lucene.search.join", NULL, 0x10, 4, methods, 3, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector;
}

@end

void OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_initWithNSString_withOrgApacheLuceneIndexMultiDocValues_OrdinalMap_withLong_(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *self, NSString *field, OrgApacheLuceneIndexMultiDocValues_OrdinalMap *ordinalMap, jlong valueCount) {
  NSObject_init(self);
  JreStrongAssign(&self->field_, field);
  JreStrongAssign(&self->ordinalMap_, ordinalMap);
  JreStrongAssignAndConsume(&self->collectedOrds_, new_OrgApacheLuceneUtilLongBitSet_initWithLong_(valueCount));
}

OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *new_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_initWithNSString_withOrgApacheLuceneIndexMultiDocValues_OrdinalMap_withLong_(NSString *field, OrgApacheLuceneIndexMultiDocValues_OrdinalMap *ordinalMap, jlong valueCount) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector, initWithNSString_withOrgApacheLuceneIndexMultiDocValues_OrdinalMap_withLong_, field, ordinalMap, valueCount)
}

OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *create_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_initWithNSString_withOrgApacheLuceneIndexMultiDocValues_OrdinalMap_withLong_(NSString *field, OrgApacheLuceneIndexMultiDocValues_OrdinalMap *ordinalMap, jlong valueCount) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector, initWithNSString_withOrgApacheLuceneIndexMultiDocValues_OrdinalMap_withLong_, field, ordinalMap, valueCount)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector)

@implementation OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector

- (instancetype)initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector:(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *)outer$
                                 withOrgApacheLuceneIndexSortedDocValues:(OrgApacheLuceneIndexSortedDocValues *)docTermOrds
                                       withOrgApacheLuceneUtilLongValues:(OrgApacheLuceneUtilLongValues *)segmentOrdToGlobalOrdLookup {
  OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_withOrgApacheLuceneUtilLongValues_(self, outer$, docTermOrds, segmentOrdToGlobalOrdLookup);
  return self;
}

- (void)collectWithInt:(jint)doc {
  jlong segmentOrd = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(docTermOrds_)) getOrdWithInt:doc];
  if (segmentOrd != -1) {
    jlong globalOrd = [((OrgApacheLuceneUtilLongValues *) nil_chk(segmentOrdToGlobalOrdLookup_)) getWithLong:segmentOrd];
    [((OrgApacheLuceneUtilLongBitSet *) nil_chk(this$0_->collectedOrds_)) setWithLong:globalOrd];
  }
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(docTermOrds_);
  RELEASE_(segmentOrdToGlobalOrdLookup_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector:withOrgApacheLuceneIndexSortedDocValues:withOrgApacheLuceneUtilLongValues:", "OrdinalMapCollector", NULL, 0x0, NULL, NULL },
    { "collectWithInt:", "collect", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "setScorerWithOrgApacheLuceneSearchScorer:", "setScorer", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.join.GlobalOrdinalsCollector;", NULL, NULL, .constantValue.asLong = 0 },
    { "docTermOrds_", NULL, 0x12, "Lorg.apache.lucene.index.SortedDocValues;", NULL, NULL, .constantValue.asLong = 0 },
    { "segmentOrdToGlobalOrdLookup_", NULL, 0x12, "Lorg.apache.lucene.util.LongValues;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector = { 2, "OrdinalMapCollector", "org.apache.lucene.search.join", "GlobalOrdinalsCollector", 0x10, 3, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector;
}

@end

void OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_withOrgApacheLuceneUtilLongValues_(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector *self, OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *outer$, OrgApacheLuceneIndexSortedDocValues *docTermOrds, OrgApacheLuceneUtilLongValues *segmentOrdToGlobalOrdLookup) {
  JreStrongAssign(&self->this$0_, outer$);
  NSObject_init(self);
  JreStrongAssign(&self->docTermOrds_, docTermOrds);
  JreStrongAssign(&self->segmentOrdToGlobalOrdLookup_, segmentOrdToGlobalOrdLookup);
}

OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector *new_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_withOrgApacheLuceneUtilLongValues_(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *outer$, OrgApacheLuceneIndexSortedDocValues *docTermOrds, OrgApacheLuceneUtilLongValues *segmentOrdToGlobalOrdLookup) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector, initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_withOrgApacheLuceneUtilLongValues_, outer$, docTermOrds, segmentOrdToGlobalOrdLookup)
}

OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector *create_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_withOrgApacheLuceneUtilLongValues_(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *outer$, OrgApacheLuceneIndexSortedDocValues *docTermOrds, OrgApacheLuceneUtilLongValues *segmentOrdToGlobalOrdLookup) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector, initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_withOrgApacheLuceneUtilLongValues_, outer$, docTermOrds, segmentOrdToGlobalOrdLookup)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_OrdinalMapCollector)

@implementation OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector

- (instancetype)initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector:(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *)outer$
                                 withOrgApacheLuceneIndexSortedDocValues:(OrgApacheLuceneIndexSortedDocValues *)docTermOrds {
  OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_(self, outer$, docTermOrds);
  return self;
}

- (void)collectWithInt:(jint)doc {
  jlong segmentOrd = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(docTermOrds_)) getOrdWithInt:doc];
  if (segmentOrd != -1) {
    [((OrgApacheLuceneUtilLongBitSet *) nil_chk(this$0_->collectedOrds_)) setWithLong:segmentOrd];
  }
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(docTermOrds_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector:withOrgApacheLuceneIndexSortedDocValues:", "SegmentOrdinalCollector", NULL, 0x0, NULL, NULL },
    { "collectWithInt:", "collect", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "setScorerWithOrgApacheLuceneSearchScorer:", "setScorer", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.join.GlobalOrdinalsCollector;", NULL, NULL, .constantValue.asLong = 0 },
    { "docTermOrds_", NULL, 0x12, "Lorg.apache.lucene.index.SortedDocValues;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector = { 2, "SegmentOrdinalCollector", "org.apache.lucene.search.join", "GlobalOrdinalsCollector", 0x10, 3, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector;
}

@end

void OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector *self, OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *outer$, OrgApacheLuceneIndexSortedDocValues *docTermOrds) {
  JreStrongAssign(&self->this$0_, outer$);
  NSObject_init(self);
  JreStrongAssign(&self->docTermOrds_, docTermOrds);
}

OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector *new_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *outer$, OrgApacheLuceneIndexSortedDocValues *docTermOrds) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector, initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_, outer$, docTermOrds)
}

OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector *create_OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector_initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector *outer$, OrgApacheLuceneIndexSortedDocValues *docTermOrds) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector, initWithOrgApacheLuceneSearchJoinGlobalOrdinalsCollector_withOrgApacheLuceneIndexSortedDocValues_, outer$, docTermOrds)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinGlobalOrdinalsCollector_SegmentOrdinalCollector)
