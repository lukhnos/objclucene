//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/search/payloads/PayloadScoreQuery.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/index/PostingsEnum.h"
#include "org/apache/lucene/index/Term.h"
#include "org/apache/lucene/search/Explanation.h"
#include "org/apache/lucene/search/IndexSearcher.h"
#include "org/apache/lucene/search/Scorer.h"
#include "org/apache/lucene/search/Weight.h"
#include "org/apache/lucene/search/payloads/PayloadFunction.h"
#include "org/apache/lucene/search/payloads/PayloadScoreQuery.h"
#include "org/apache/lucene/search/similarities/Similarity.h"
#include "org/apache/lucene/search/spans/SpanCollector.h"
#include "org/apache/lucene/search/spans/SpanQuery.h"
#include "org/apache/lucene/search/spans/SpanScorer.h"
#include "org/apache/lucene/search/spans/SpanWeight.h"
#include "org/apache/lucene/search/spans/Spans.h"
#include "org/apache/lucene/util/BytesRef.h"

@interface OrgApacheLuceneSearchPayloadsPayloadScoreQuery () {
 @public
  OrgApacheLuceneSearchSpansSpanQuery *wrappedQuery_;
  OrgApacheLuceneSearchPayloadsPayloadFunction *function_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchPayloadsPayloadScoreQuery, wrappedQuery_, OrgApacheLuceneSearchSpansSpanQuery *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchPayloadsPayloadScoreQuery, function_, OrgApacheLuceneSearchPayloadsPayloadFunction *)

@interface OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight : OrgApacheLuceneSearchSpansSpanWeight {
 @public
  OrgApacheLuceneSearchPayloadsPayloadScoreQuery *this$0_;
  OrgApacheLuceneSearchSpansSpanWeight *innerWeight_;
}

- (instancetype)initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery:(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *)outer$
                                withOrgApacheLuceneSearchIndexSearcher:(OrgApacheLuceneSearchIndexSearcher *)searcher
                              withOrgApacheLuceneSearchSpansSpanWeight:(OrgApacheLuceneSearchSpansSpanWeight *)innerWeight;

- (void)extractTermContextsWithJavaUtilMap:(id<JavaUtilMap>)contexts;

- (OrgApacheLuceneSearchSpansSpans *)getSpansWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)ctx
                                     withOrgApacheLuceneSearchSpansSpanWeight_Postings:(OrgApacheLuceneSearchSpansSpanWeight_Postings *)requiredPostings;

- (OrgApacheLuceneSearchScorer *)scorerWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context;

- (void)extractTermsWithJavaUtilSet:(id<JavaUtilSet>)terms;

- (jfloat)getValueForNormalization;

- (void)normalizeWithFloat:(jfloat)queryNorm
                 withFloat:(jfloat)topLevelBoost;

- (OrgApacheLuceneSearchExplanation *)explainWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context
                                                                               withInt:(jint)doc;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight, this$0_, OrgApacheLuceneSearchPayloadsPayloadScoreQuery *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight, innerWeight_, OrgApacheLuceneSearchSpansSpanWeight *)

__attribute__((unused)) static void OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight *self, OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchIndexSearcher *searcher, OrgApacheLuceneSearchSpansSpanWeight *innerWeight);

__attribute__((unused)) static OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight *new_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchIndexSearcher *searcher, OrgApacheLuceneSearchSpansSpanWeight *innerWeight) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight *create_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchIndexSearcher *searcher, OrgApacheLuceneSearchSpansSpanWeight *innerWeight);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight)

@interface OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer : OrgApacheLuceneSearchSpansSpanScorer < OrgApacheLuceneSearchSpansSpanCollector > {
 @public
  OrgApacheLuceneSearchPayloadsPayloadScoreQuery *this$0_;
  jint payloadsSeen_;
  jfloat payloadScore_;
}

- (instancetype)initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery:(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *)outer$
                                   withOrgApacheLuceneSearchSpansSpans:(OrgApacheLuceneSearchSpansSpans *)spans
                              withOrgApacheLuceneSearchSpansSpanWeight:(OrgApacheLuceneSearchSpansSpanWeight *)weight
             withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer:(OrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer *)docScorer;

- (void)doStartCurrentDoc;

- (void)doCurrentSpans;

- (void)collectLeafWithOrgApacheLuceneIndexPostingsEnum:(OrgApacheLuceneIndexPostingsEnum *)postings
                                                withInt:(jint)position
                           withOrgApacheLuceneIndexTerm:(OrgApacheLuceneIndexTerm *)term;

- (jfloat)getPayloadScore;

- (OrgApacheLuceneSearchExplanation *)getPayloadExplanation;

- (jfloat)getSpanScore;

- (jfloat)scoreCurrentDoc;

- (void)reset;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer, this$0_, OrgApacheLuceneSearchPayloadsPayloadScoreQuery *)

__attribute__((unused)) static void OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer *self, OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchSpansSpans *spans, OrgApacheLuceneSearchSpansSpanWeight *weight, OrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer *docScorer);

__attribute__((unused)) static OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer *new_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchSpansSpans *spans, OrgApacheLuceneSearchSpansSpanWeight *weight, OrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer *docScorer) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer *create_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchSpansSpans *spans, OrgApacheLuceneSearchSpansSpanWeight *weight, OrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer *docScorer);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer)

@implementation OrgApacheLuceneSearchPayloadsPayloadScoreQuery

- (instancetype)initWithOrgApacheLuceneSearchSpansSpanQuery:(OrgApacheLuceneSearchSpansSpanQuery *)wrappedQuery
           withOrgApacheLuceneSearchPayloadsPayloadFunction:(OrgApacheLuceneSearchPayloadsPayloadFunction *)function {
  OrgApacheLuceneSearchPayloadsPayloadScoreQuery_initWithOrgApacheLuceneSearchSpansSpanQuery_withOrgApacheLuceneSearchPayloadsPayloadFunction_(self, wrappedQuery, function);
  return self;
}

- (NSString *)getField {
  return [((OrgApacheLuceneSearchSpansSpanQuery *) nil_chk(wrappedQuery_)) getField];
}

- (NSString *)toStringWithNSString:(NSString *)field {
  return JreStrcat("$$$$C", @"PayloadSpanQuery[", [((OrgApacheLuceneSearchSpansSpanQuery *) nil_chk(wrappedQuery_)) toStringWithNSString:field], @"; ", [((OrgApacheLuceneSearchPayloadsPayloadFunction *) nil_chk(function_)) description], ']');
}

- (OrgApacheLuceneSearchSpansSpanWeight *)createWeightWithOrgApacheLuceneSearchIndexSearcher:(OrgApacheLuceneSearchIndexSearcher *)searcher
                                                                                 withBoolean:(jboolean)needsScores {
  OrgApacheLuceneSearchSpansSpanWeight *innerWeight = [((OrgApacheLuceneSearchSpansSpanQuery *) nil_chk(wrappedQuery_)) createWeightWithOrgApacheLuceneSearchIndexSearcher:searcher withBoolean:needsScores];
  if (!needsScores) return innerWeight;
  return create_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_(self, searcher, innerWeight);
}

- (jboolean)isEqual:(id)o {
  if (self == o) return true;
  if (!([o isKindOfClass:[OrgApacheLuceneSearchPayloadsPayloadScoreQuery class]])) return false;
  if (![super isEqual:o]) return false;
  OrgApacheLuceneSearchPayloadsPayloadScoreQuery *that = (OrgApacheLuceneSearchPayloadsPayloadScoreQuery *) cast_chk(o, [OrgApacheLuceneSearchPayloadsPayloadScoreQuery class]);
  if (wrappedQuery_ != nil ? ![wrappedQuery_ isEqual:((OrgApacheLuceneSearchPayloadsPayloadScoreQuery *) nil_chk(that))->wrappedQuery_] : ((OrgApacheLuceneSearchPayloadsPayloadScoreQuery *) nil_chk(that))->wrappedQuery_ != nil) return false;
  return !(function_ != nil ? ![function_ isEqual:that->function_] : that->function_ != nil);
}

- (NSUInteger)hash {
  jint result = ((jint) [super hash]);
  result = 31 * result + (wrappedQuery_ != nil ? ((jint) [wrappedQuery_ hash]) : 0);
  result = 31 * result + (function_ != nil ? ((jint) [function_ hash]) : 0);
  return result;
}

- (void)dealloc {
  RELEASE_(wrappedQuery_);
  RELEASE_(function_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchSpansSpanQuery:withOrgApacheLuceneSearchPayloadsPayloadFunction:", "PayloadScoreQuery", NULL, 0x1, NULL, NULL },
    { "getField", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "toStringWithNSString:", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "createWeightWithOrgApacheLuceneSearchIndexSearcher:withBoolean:", "createWeight", "Lorg.apache.lucene.search.spans.SpanWeight;", 0x1, "Ljava.io.IOException;", NULL },
    { "isEqual:", "equals", "Z", 0x1, NULL, NULL },
    { "hash", "hashCode", "I", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "wrappedQuery_", NULL, 0x12, "Lorg.apache.lucene.search.spans.SpanQuery;", NULL, NULL, .constantValue.asLong = 0 },
    { "function_", NULL, 0x12, "Lorg.apache.lucene.search.payloads.PayloadFunction;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.payloads.PayloadScoreQuery$PayloadSpanWeight;", "Lorg.apache.lucene.search.payloads.PayloadScoreQuery$PayloadSpanScorer;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchPayloadsPayloadScoreQuery = { 2, "PayloadScoreQuery", "org.apache.lucene.search.payloads", NULL, 0x1, 6, methods, 2, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneSearchPayloadsPayloadScoreQuery;
}

@end

void OrgApacheLuceneSearchPayloadsPayloadScoreQuery_initWithOrgApacheLuceneSearchSpansSpanQuery_withOrgApacheLuceneSearchPayloadsPayloadFunction_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *self, OrgApacheLuceneSearchSpansSpanQuery *wrappedQuery, OrgApacheLuceneSearchPayloadsPayloadFunction *function) {
  OrgApacheLuceneSearchSpansSpanQuery_init(self);
  JreStrongAssign(&self->wrappedQuery_, wrappedQuery);
  JreStrongAssign(&self->function_, function);
}

OrgApacheLuceneSearchPayloadsPayloadScoreQuery *new_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_initWithOrgApacheLuceneSearchSpansSpanQuery_withOrgApacheLuceneSearchPayloadsPayloadFunction_(OrgApacheLuceneSearchSpansSpanQuery *wrappedQuery, OrgApacheLuceneSearchPayloadsPayloadFunction *function) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchPayloadsPayloadScoreQuery, initWithOrgApacheLuceneSearchSpansSpanQuery_withOrgApacheLuceneSearchPayloadsPayloadFunction_, wrappedQuery, function)
}

OrgApacheLuceneSearchPayloadsPayloadScoreQuery *create_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_initWithOrgApacheLuceneSearchSpansSpanQuery_withOrgApacheLuceneSearchPayloadsPayloadFunction_(OrgApacheLuceneSearchSpansSpanQuery *wrappedQuery, OrgApacheLuceneSearchPayloadsPayloadFunction *function) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchPayloadsPayloadScoreQuery, initWithOrgApacheLuceneSearchSpansSpanQuery_withOrgApacheLuceneSearchPayloadsPayloadFunction_, wrappedQuery, function)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchPayloadsPayloadScoreQuery)

@implementation OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight

- (instancetype)initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery:(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *)outer$
                                withOrgApacheLuceneSearchIndexSearcher:(OrgApacheLuceneSearchIndexSearcher *)searcher
                              withOrgApacheLuceneSearchSpansSpanWeight:(OrgApacheLuceneSearchSpansSpanWeight *)innerWeight {
  OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_(self, outer$, searcher, innerWeight);
  return self;
}

- (void)extractTermContextsWithJavaUtilMap:(id<JavaUtilMap>)contexts {
  [((OrgApacheLuceneSearchSpansSpanWeight *) nil_chk(innerWeight_)) extractTermContextsWithJavaUtilMap:contexts];
}

- (OrgApacheLuceneSearchSpansSpans *)getSpansWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)ctx
                                     withOrgApacheLuceneSearchSpansSpanWeight_Postings:(OrgApacheLuceneSearchSpansSpanWeight_Postings *)requiredPostings {
  return [((OrgApacheLuceneSearchSpansSpanWeight *) nil_chk(innerWeight_)) getSpansWithOrgApacheLuceneIndexLeafReaderContext:ctx withOrgApacheLuceneSearchSpansSpanWeight_Postings:[((OrgApacheLuceneSearchSpansSpanWeight_Postings *) nil_chk(requiredPostings)) atLeastWithOrgApacheLuceneSearchSpansSpanWeight_Postings:JreLoadEnum(OrgApacheLuceneSearchSpansSpanWeight_Postings, PAYLOADS)]];
}

- (OrgApacheLuceneSearchScorer *)scorerWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  OrgApacheLuceneSearchSpansSpans *spans = [self getSpansWithOrgApacheLuceneIndexLeafReaderContext:context withOrgApacheLuceneSearchSpansSpanWeight_Postings:JreLoadEnum(OrgApacheLuceneSearchSpansSpanWeight_Postings, PAYLOADS)];
  if (spans == nil) return nil;
  return create_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_(this$0_, spans, self, [((OrgApacheLuceneSearchSpansSpanWeight *) nil_chk(innerWeight_)) getSimScorerWithOrgApacheLuceneIndexLeafReaderContext:context]);
}

- (void)extractTermsWithJavaUtilSet:(id<JavaUtilSet>)terms {
  [((OrgApacheLuceneSearchSpansSpanWeight *) nil_chk(innerWeight_)) extractTermsWithJavaUtilSet:terms];
}

- (jfloat)getValueForNormalization {
  return [((OrgApacheLuceneSearchSpansSpanWeight *) nil_chk(innerWeight_)) getValueForNormalization];
}

- (void)normalizeWithFloat:(jfloat)queryNorm
                 withFloat:(jfloat)topLevelBoost {
  [((OrgApacheLuceneSearchSpansSpanWeight *) nil_chk(innerWeight_)) normalizeWithFloat:queryNorm withFloat:topLevelBoost];
}

- (OrgApacheLuceneSearchExplanation *)explainWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context
                                                                               withInt:(jint)doc {
  OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer *scorer = (OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer *) cast_chk([self scorerWithOrgApacheLuceneIndexLeafReaderContext:context], [OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer class]);
  if (scorer == nil || [scorer advanceWithInt:doc] != doc) return OrgApacheLuceneSearchExplanation_noMatchWithNSString_withOrgApacheLuceneSearchExplanationArray_(@"No match", [IOSObjectArray arrayWithLength:0 type:OrgApacheLuceneSearchExplanation_class_()]);
  OrgApacheLuceneSearchSpansSpanWeight *innerWeight = ((OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight *) nil_chk(((OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight *) cast_chk([scorer getWeight], [OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight class]))))->innerWeight_;
  OrgApacheLuceneSearchExplanation *innerExpl = [((OrgApacheLuceneSearchSpansSpanWeight *) nil_chk(innerWeight)) explainWithOrgApacheLuceneIndexLeafReaderContext:context withInt:doc];
  [scorer freq];
  OrgApacheLuceneSearchExplanation *payloadExpl = [scorer getPayloadExplanation];
  return OrgApacheLuceneSearchExplanation_matchWithFloat_withNSString_withOrgApacheLuceneSearchExplanationArray_([scorer scoreCurrentDoc], @"PayloadSpanQuery, product of:", [IOSObjectArray arrayWithObjects:(id[]){ innerExpl, payloadExpl } count:2 type:OrgApacheLuceneSearchExplanation_class_()]);
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(innerWeight_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery:withOrgApacheLuceneSearchIndexSearcher:withOrgApacheLuceneSearchSpansSpanWeight:", "PayloadSpanWeight", NULL, 0x1, NULL, NULL },
    { "extractTermContextsWithJavaUtilMap:", "extractTermContexts", "V", 0x1, NULL, "(Ljava/util/Map<Lorg/apache/lucene/index/Term;Lorg/apache/lucene/index/TermContext;>;)V" },
    { "getSpansWithOrgApacheLuceneIndexLeafReaderContext:withOrgApacheLuceneSearchSpansSpanWeight_Postings:", "getSpans", "Lorg.apache.lucene.search.spans.Spans;", 0x1, "Ljava.io.IOException;", NULL },
    { "scorerWithOrgApacheLuceneIndexLeafReaderContext:", "scorer", "Lorg.apache.lucene.search.Scorer;", 0x1, "Ljava.io.IOException;", NULL },
    { "extractTermsWithJavaUtilSet:", "extractTerms", "V", 0x1, NULL, "(Ljava/util/Set<Lorg/apache/lucene/index/Term;>;)V" },
    { "getValueForNormalization", NULL, "F", 0x1, "Ljava.io.IOException;", NULL },
    { "normalizeWithFloat:withFloat:", "normalize", "V", 0x1, NULL, NULL },
    { "explainWithOrgApacheLuceneIndexLeafReaderContext:withInt:", "explain", "Lorg.apache.lucene.search.Explanation;", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.payloads.PayloadScoreQuery;", NULL, NULL, .constantValue.asLong = 0 },
    { "innerWeight_", NULL, 0x12, "Lorg.apache.lucene.search.spans.SpanWeight;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight = { 2, "PayloadSpanWeight", "org.apache.lucene.search.payloads", "PayloadScoreQuery", 0x2, 8, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight;
}

@end

void OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight *self, OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchIndexSearcher *searcher, OrgApacheLuceneSearchSpansSpanWeight *innerWeight) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchSpansSpanWeight_initWithOrgApacheLuceneSearchSpansSpanQuery_withOrgApacheLuceneSearchIndexSearcher_withJavaUtilMap_(self, outer$, searcher, nil);
  JreStrongAssign(&self->innerWeight_, innerWeight);
}

OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight *new_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchIndexSearcher *searcher, OrgApacheLuceneSearchSpansSpanWeight *innerWeight) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight, initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_, outer$, searcher, innerWeight)
}

OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight *create_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchIndexSearcher *searcher, OrgApacheLuceneSearchSpansSpanWeight *innerWeight) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight, initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchIndexSearcher_withOrgApacheLuceneSearchSpansSpanWeight_, outer$, searcher, innerWeight)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanWeight)

@implementation OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer

- (instancetype)initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery:(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *)outer$
                                   withOrgApacheLuceneSearchSpansSpans:(OrgApacheLuceneSearchSpansSpans *)spans
                              withOrgApacheLuceneSearchSpansSpanWeight:(OrgApacheLuceneSearchSpansSpanWeight *)weight
             withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer:(OrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer *)docScorer {
  OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_(self, outer$, spans, weight, docScorer);
  return self;
}

- (void)doStartCurrentDoc {
  payloadScore_ = 0;
  payloadsSeen_ = 0;
}

- (void)doCurrentSpans {
  [((OrgApacheLuceneSearchSpansSpans *) nil_chk(spans_)) collectWithOrgApacheLuceneSearchSpansSpanCollector:self];
}

- (void)collectLeafWithOrgApacheLuceneIndexPostingsEnum:(OrgApacheLuceneIndexPostingsEnum *)postings
                                                withInt:(jint)position
                           withOrgApacheLuceneIndexTerm:(OrgApacheLuceneIndexTerm *)term {
  OrgApacheLuceneUtilBytesRef *payload = [((OrgApacheLuceneIndexPostingsEnum *) nil_chk(postings)) getPayload];
  if (payload == nil) return;
  jfloat payloadFactor = [((OrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer *) nil_chk(docScorer_)) computePayloadFactorWithInt:[self docID] withInt:[((OrgApacheLuceneSearchSpansSpans *) nil_chk(spans_)) startPosition] withInt:[spans_ endPosition] withOrgApacheLuceneUtilBytesRef:payload];
  payloadScore_ = [((OrgApacheLuceneSearchPayloadsPayloadFunction *) nil_chk(this$0_->function_)) currentScoreWithInt:[self docID] withNSString:[this$0_ getField] withInt:[spans_ startPosition] withInt:[spans_ endPosition] withInt:payloadsSeen_ withFloat:payloadScore_ withFloat:payloadFactor];
  payloadsSeen_++;
}

- (jfloat)getPayloadScore {
  return [((OrgApacheLuceneSearchPayloadsPayloadFunction *) nil_chk(this$0_->function_)) docScoreWithInt:[self docID] withNSString:[this$0_ getField] withInt:payloadsSeen_ withFloat:payloadScore_];
}

- (OrgApacheLuceneSearchExplanation *)getPayloadExplanation {
  return [((OrgApacheLuceneSearchPayloadsPayloadFunction *) nil_chk(this$0_->function_)) explainWithInt:[self docID] withNSString:[this$0_ getField] withInt:payloadsSeen_ withFloat:payloadScore_];
}

- (jfloat)getSpanScore {
  return [super scoreCurrentDoc];
}

- (jfloat)scoreCurrentDoc {
  return [self getSpanScore] * [self getPayloadScore];
}

- (void)reset {
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery:withOrgApacheLuceneSearchSpansSpans:withOrgApacheLuceneSearchSpansSpanWeight:withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer:", "PayloadSpanScorer", NULL, 0x2, NULL, NULL },
    { "doStartCurrentDoc", NULL, "V", 0x4, NULL, NULL },
    { "doCurrentSpans", NULL, "V", 0x4, "Ljava.io.IOException;", NULL },
    { "collectLeafWithOrgApacheLuceneIndexPostingsEnum:withInt:withOrgApacheLuceneIndexTerm:", "collectLeaf", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "getPayloadScore", NULL, "F", 0x4, NULL, NULL },
    { "getPayloadExplanation", NULL, "Lorg.apache.lucene.search.Explanation;", 0x4, NULL, NULL },
    { "getSpanScore", NULL, "F", 0x4, "Ljava.io.IOException;", NULL },
    { "scoreCurrentDoc", NULL, "F", 0x4, "Ljava.io.IOException;", NULL },
    { "reset", NULL, "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.payloads.PayloadScoreQuery;", NULL, NULL, .constantValue.asLong = 0 },
    { "payloadsSeen_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "payloadScore_", NULL, 0x2, "F", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer = { 2, "PayloadSpanScorer", "org.apache.lucene.search.payloads", "PayloadScoreQuery", 0x2, 9, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer;
}

@end

void OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer *self, OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchSpansSpans *spans, OrgApacheLuceneSearchSpansSpanWeight *weight, OrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer *docScorer) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchSpansSpanScorer_initWithOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_(self, spans, weight, docScorer);
}

OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer *new_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchSpansSpans *spans, OrgApacheLuceneSearchSpansSpanWeight *weight, OrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer *docScorer) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer, initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_, outer$, spans, weight, docScorer)
}

OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer *create_OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer_initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_(OrgApacheLuceneSearchPayloadsPayloadScoreQuery *outer$, OrgApacheLuceneSearchSpansSpans *spans, OrgApacheLuceneSearchSpansSpanWeight *weight, OrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer *docScorer) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer, initWithOrgApacheLuceneSearchPayloadsPayloadScoreQuery_withOrgApacheLuceneSearchSpansSpans_withOrgApacheLuceneSearchSpansSpanWeight_withOrgApacheLuceneSearchSimilaritiesSimilarity_SimScorer_, outer$, spans, weight, docScorer)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchPayloadsPayloadScoreQuery_PayloadSpanScorer)
