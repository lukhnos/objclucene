//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/search/TopDocsCollector.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Float.h"
#include "java/lang/Math.h"
#include "org/apache/lucene/search/ScoreDoc.h"
#include "org/apache/lucene/search/TopDocs.h"
#include "org/apache/lucene/search/TopDocsCollector.h"
#include "org/apache/lucene/util/PriorityQueue.h"

#if __has_feature(objc_arc)
#error "org/apache/lucene/search/TopDocsCollector must not be compiled with ARC (-fobjc-arc)"
#endif

#pragma clang diagnostic ignored "-Wprotocol"

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneSearchTopDocsCollector)

OrgApacheLuceneSearchTopDocs *OrgApacheLuceneSearchTopDocsCollector_EMPTY_TOPDOCS;

@implementation OrgApacheLuceneSearchTopDocsCollector

+ (OrgApacheLuceneSearchTopDocs *)EMPTY_TOPDOCS {
  return OrgApacheLuceneSearchTopDocsCollector_EMPTY_TOPDOCS;
}

- (instancetype)initWithOrgApacheLuceneUtilPriorityQueue:(OrgApacheLuceneUtilPriorityQueue *)pq {
  OrgApacheLuceneSearchTopDocsCollector_initWithOrgApacheLuceneUtilPriorityQueue_(self, pq);
  return self;
}

- (void)populateResultsWithOrgApacheLuceneSearchScoreDocArray:(IOSObjectArray *)results
                                                      withInt:(jint)howMany {
  for (jint i = howMany - 1; i >= 0; i--) {
    IOSObjectArray_Set(nil_chk(results), i, [((OrgApacheLuceneUtilPriorityQueue *) nil_chk(pq_)) pop]);
  }
}

- (OrgApacheLuceneSearchTopDocs *)newTopDocsWithOrgApacheLuceneSearchScoreDocArray:(IOSObjectArray *)results
                                                                           withInt:(jint)start {
  return results == nil ? OrgApacheLuceneSearchTopDocsCollector_EMPTY_TOPDOCS : create_OrgApacheLuceneSearchTopDocs_initWithInt_withOrgApacheLuceneSearchScoreDocArray_(totalHits_, results);
}

- (jint)getTotalHits {
  return totalHits_;
}

- (jint)topDocsSize {
  return totalHits_ < [((OrgApacheLuceneUtilPriorityQueue *) nil_chk(pq_)) size] ? totalHits_ : [((OrgApacheLuceneUtilPriorityQueue *) nil_chk(pq_)) size];
}

- (OrgApacheLuceneSearchTopDocs *)topDocs {
  return [self topDocsWithInt:0 withInt:[self topDocsSize]];
}

- (OrgApacheLuceneSearchTopDocs *)topDocsWithInt:(jint)start {
  return [self topDocsWithInt:start withInt:[self topDocsSize]];
}

- (OrgApacheLuceneSearchTopDocs *)topDocsWithInt:(jint)start
                                         withInt:(jint)howMany {
  jint size = [self topDocsSize];
  if (start < 0 || start >= size || howMany <= 0) {
    return [self newTopDocsWithOrgApacheLuceneSearchScoreDocArray:nil withInt:start];
  }
  howMany = JavaLangMath_minWithInt_withInt_(size - start, howMany);
  IOSObjectArray *results = [IOSObjectArray arrayWithLength:howMany type:OrgApacheLuceneSearchScoreDoc_class_()];
  for (jint i = [((OrgApacheLuceneUtilPriorityQueue *) nil_chk(pq_)) size] - start - howMany; i > 0; i--) {
    [((OrgApacheLuceneUtilPriorityQueue *) nil_chk(pq_)) pop];
  }
  [self populateResultsWithOrgApacheLuceneSearchScoreDocArray:results withInt:howMany];
  return [self newTopDocsWithOrgApacheLuceneSearchScoreDocArray:results withInt:start];
}

- (void)dealloc {
  RELEASE_(pq_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x4, -1, 0, -1, 1, -1, -1 },
    { NULL, "V", 0x4, 2, 3, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchTopDocs;", 0x4, 4, 3, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x4, -1, -1, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchTopDocs;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchTopDocs;", 0x1, 5, 6, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchTopDocs;", 0x1, 5, 7, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneUtilPriorityQueue:);
  methods[1].selector = @selector(populateResultsWithOrgApacheLuceneSearchScoreDocArray:withInt:);
  methods[2].selector = @selector(newTopDocsWithOrgApacheLuceneSearchScoreDocArray:withInt:);
  methods[3].selector = @selector(getTotalHits);
  methods[4].selector = @selector(topDocsSize);
  methods[5].selector = @selector(topDocs);
  methods[6].selector = @selector(topDocsWithInt:);
  methods[7].selector = @selector(topDocsWithInt:withInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "EMPTY_TOPDOCS", "LOrgApacheLuceneSearchTopDocs;", .constantValue.asLong = 0, 0x1c, -1, 8, -1, -1 },
    { "pq_", "LOrgApacheLuceneUtilPriorityQueue;", .constantValue.asLong = 0, 0x4, -1, -1, 9, -1 },
    { "totalHits_", "I", .constantValue.asLong = 0, 0x4, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneUtilPriorityQueue;", "(Lorg/apache/lucene/util/PriorityQueue<TT;>;)V", "populateResults", "[LOrgApacheLuceneSearchScoreDoc;I", "newTopDocs", "topDocs", "I", "II", &OrgApacheLuceneSearchTopDocsCollector_EMPTY_TOPDOCS, "Lorg/apache/lucene/util/PriorityQueue<TT;>;", "<T:Lorg/apache/lucene/search/ScoreDoc;>Ljava/lang/Object;Lorg/apache/lucene/search/Collector;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchTopDocsCollector = { "TopDocsCollector", "org.apache.lucene.search", ptrTable, methods, fields, 7, 0x401, 8, 3, -1, -1, -1, 10, -1 };
  return &_OrgApacheLuceneSearchTopDocsCollector;
}

+ (void)initialize {
  if (self == [OrgApacheLuceneSearchTopDocsCollector class]) {
    JreStrongAssignAndConsume(&OrgApacheLuceneSearchTopDocsCollector_EMPTY_TOPDOCS, new_OrgApacheLuceneSearchTopDocs_initWithInt_withOrgApacheLuceneSearchScoreDocArray_withFloat_(0, [IOSObjectArray arrayWithLength:0 type:OrgApacheLuceneSearchScoreDoc_class_()], JavaLangFloat_NaN));
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneSearchTopDocsCollector)
  }
}

@end

void OrgApacheLuceneSearchTopDocsCollector_initWithOrgApacheLuceneUtilPriorityQueue_(OrgApacheLuceneSearchTopDocsCollector *self, OrgApacheLuceneUtilPriorityQueue *pq) {
  NSObject_init(self);
  JreStrongAssign(&self->pq_, pq);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchTopDocsCollector)
