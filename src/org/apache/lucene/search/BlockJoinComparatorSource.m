//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./misc/src/java/org/apache/lucene/search/BlockJoinComparatorSource.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/Integer.h"
#include "java/lang/RuntimeException.h"
#include "java/lang/UnsupportedOperationException.h"
#include "org/apache/lucene/index/LeafReader.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/search/BlockJoinComparatorSource.h"
#include "org/apache/lucene/search/DocIdSet.h"
#include "org/apache/lucene/search/FieldComparator.h"
#include "org/apache/lucene/search/FieldComparatorSource.h"
#include "org/apache/lucene/search/Filter.h"
#include "org/apache/lucene/search/LeafFieldComparator.h"
#include "org/apache/lucene/search/Scorer.h"
#include "org/apache/lucene/search/Sort.h"
#include "org/apache/lucene/search/SortField.h"
#include "org/apache/lucene/util/BitDocIdSet.h"
#include "org/apache/lucene/util/BitSet.h"
#include "org/apache/lucene/util/Bits.h"

#if __has_feature(objc_arc)
#error "org/apache/lucene/search/BlockJoinComparatorSource must not be compiled with ARC (-fobjc-arc)"
#endif

@interface OrgApacheLuceneSearchBlockJoinComparatorSource_1 : OrgApacheLuceneSearchFieldComparator {
 @public
  OrgApacheLuceneSearchBlockJoinComparatorSource *this$0_;
  IOSIntArray *val$childSlots_;
  IOSIntArray *val$parentSlots_;
  IOSObjectArray *val$parentComparators_;
  IOSObjectArray *val$childComparators_;
  IOSIntArray *val$childReverseMul_;
  IOSIntArray *val$parentReverseMul_;
  jint bottomParent_;
  jint bottomChild_;
  OrgApacheLuceneUtilBitSet *parentBits_;
  IOSObjectArray *parentLeafComparators_;
  IOSObjectArray *childLeafComparators_;
}

- (instancetype)initWithOrgApacheLuceneSearchBlockJoinComparatorSource:(OrgApacheLuceneSearchBlockJoinComparatorSource *)outer$
                                                          withIntArray:(IOSIntArray *)capture$0
                                                          withIntArray:(IOSIntArray *)capture$1
                         withOrgApacheLuceneSearchFieldComparatorArray:(IOSObjectArray *)capture$2
                         withOrgApacheLuceneSearchFieldComparatorArray:(IOSObjectArray *)capture$3
                                                          withIntArray:(IOSIntArray *)capture$4
                                                          withIntArray:(IOSIntArray *)capture$5;

- (jint)compareWithInt:(jint)slot1
               withInt:(jint)slot2;

- (void)setTopValueWithId:(JavaLangInteger *)value;

- (id<OrgApacheLuceneSearchLeafFieldComparator>)getLeafComparatorWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context;

- (JavaLangInteger *)valueWithInt:(jint)slot;

- (jint)parentWithInt:(jint)doc;

- (jint)compareWithInt:(jint)docID1
               withInt:(jint)parent1
               withInt:(jint)docID2
               withInt:(jint)parent2;

- (jint)compareWithInt:(jint)docID1
               withInt:(jint)docID2
withOrgApacheLuceneSearchLeafFieldComparatorArray:(IOSObjectArray *)comparators
          withIntArray:(IOSIntArray *)reverseMul;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchBlockJoinComparatorSource_1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchBlockJoinComparatorSource_1, parentBits_, OrgApacheLuceneUtilBitSet *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchBlockJoinComparatorSource_1, parentLeafComparators_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchBlockJoinComparatorSource_1, childLeafComparators_, IOSObjectArray *)

__attribute__((unused)) static void OrgApacheLuceneSearchBlockJoinComparatorSource_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_(OrgApacheLuceneSearchBlockJoinComparatorSource_1 *self, OrgApacheLuceneSearchBlockJoinComparatorSource *outer$, IOSIntArray *capture$0, IOSIntArray *capture$1, IOSObjectArray *capture$2, IOSObjectArray *capture$3, IOSIntArray *capture$4, IOSIntArray *capture$5);

__attribute__((unused)) static OrgApacheLuceneSearchBlockJoinComparatorSource_1 *new_OrgApacheLuceneSearchBlockJoinComparatorSource_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_(OrgApacheLuceneSearchBlockJoinComparatorSource *outer$, IOSIntArray *capture$0, IOSIntArray *capture$1, IOSObjectArray *capture$2, IOSObjectArray *capture$3, IOSIntArray *capture$4, IOSIntArray *capture$5) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchBlockJoinComparatorSource_1 *create_OrgApacheLuceneSearchBlockJoinComparatorSource_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_(OrgApacheLuceneSearchBlockJoinComparatorSource *outer$, IOSIntArray *capture$0, IOSIntArray *capture$1, IOSObjectArray *capture$2, IOSObjectArray *capture$3, IOSIntArray *capture$4, IOSIntArray *capture$5);

@interface OrgApacheLuceneSearchBlockJoinComparatorSource_1_1 : NSObject < OrgApacheLuceneSearchLeafFieldComparator > {
 @public
  OrgApacheLuceneSearchBlockJoinComparatorSource_1 *this$0_;
}

- (instancetype)initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1:(OrgApacheLuceneSearchBlockJoinComparatorSource_1 *)outer$;

- (jint)compareBottomWithInt:(jint)doc;

- (jint)compareTopWithInt:(jint)doc;

- (void)copy__WithInt:(jint)slot
              withInt:(jint)doc OBJC_METHOD_FAMILY_NONE;

- (void)setBottomWithInt:(jint)slot;

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchBlockJoinComparatorSource_1_1)

__attribute__((unused)) static void OrgApacheLuceneSearchBlockJoinComparatorSource_1_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_(OrgApacheLuceneSearchBlockJoinComparatorSource_1_1 *self, OrgApacheLuceneSearchBlockJoinComparatorSource_1 *outer$);

__attribute__((unused)) static OrgApacheLuceneSearchBlockJoinComparatorSource_1_1 *new_OrgApacheLuceneSearchBlockJoinComparatorSource_1_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_(OrgApacheLuceneSearchBlockJoinComparatorSource_1 *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchBlockJoinComparatorSource_1_1 *create_OrgApacheLuceneSearchBlockJoinComparatorSource_1_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_(OrgApacheLuceneSearchBlockJoinComparatorSource_1 *outer$);

@implementation OrgApacheLuceneSearchBlockJoinComparatorSource

- (instancetype)initWithOrgApacheLuceneSearchFilter:(OrgApacheLuceneSearchFilter *)parentsFilter
                      withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)parentSort {
  OrgApacheLuceneSearchBlockJoinComparatorSource_initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_(self, parentsFilter, parentSort);
  return self;
}

- (instancetype)initWithOrgApacheLuceneSearchFilter:(OrgApacheLuceneSearchFilter *)parentsFilter
                      withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)parentSort
                      withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)childSort {
  OrgApacheLuceneSearchBlockJoinComparatorSource_initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_(self, parentsFilter, parentSort, childSort);
  return self;
}

- (OrgApacheLuceneSearchFieldComparator *)newComparatorWithNSString:(NSString *)fieldname
                                                            withInt:(jint)numHits
                                                            withInt:(jint)sortPos
                                                        withBoolean:(jboolean)reversed {
  IOSIntArray *parentSlots = [IOSIntArray arrayWithLength:numHits];
  IOSIntArray *childSlots = [IOSIntArray arrayWithLength:numHits];
  IOSObjectArray *parentFields = [((OrgApacheLuceneSearchSort *) nil_chk(parentSort_)) getSort];
  IOSIntArray *parentReverseMul = [IOSIntArray arrayWithLength:((IOSObjectArray *) nil_chk(parentFields))->size_];
  IOSObjectArray *parentComparators = [IOSObjectArray arrayWithLength:parentFields->size_ type:OrgApacheLuceneSearchFieldComparator_class_()];
  for (jint i = 0; i < parentFields->size_; i++) {
    *IOSIntArray_GetRef(parentReverseMul, i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(parentFields, i))) getReverse] ? -1 : 1;
    IOSObjectArray_Set(parentComparators, i, [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(parentFields, i))) getComparatorWithInt:1 withInt:i]);
  }
  IOSObjectArray *childFields = [((OrgApacheLuceneSearchSort *) nil_chk(childSort_)) getSort];
  IOSIntArray *childReverseMul = [IOSIntArray arrayWithLength:((IOSObjectArray *) nil_chk(childFields))->size_];
  IOSObjectArray *childComparators = [IOSObjectArray arrayWithLength:childFields->size_ type:OrgApacheLuceneSearchFieldComparator_class_()];
  for (jint i = 0; i < childFields->size_; i++) {
    *IOSIntArray_GetRef(childReverseMul, i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(childFields, i))) getReverse] ? -1 : 1;
    IOSObjectArray_Set(childComparators, i, [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(childFields, i))) getComparatorWithInt:1 withInt:i]);
  }
  return create_OrgApacheLuceneSearchBlockJoinComparatorSource_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_(self, childSlots, parentSlots, parentComparators, childComparators, childReverseMul, parentReverseMul);
}

- (NSString *)description {
  return JreStrcat("$@$@C", @"blockJoin(parentSort=", parentSort_, @",childSort=", childSort_, ')');
}

- (void)dealloc {
  RELEASE_(parentsFilter_);
  RELEASE_(parentSort_);
  RELEASE_(childSort_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 1, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchFieldComparator;", 0x1, 2, 3, 4, 5, -1, -1 },
    { NULL, "LNSString;", 0x1, 6, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneSearchFilter:withOrgApacheLuceneSearchSort:);
  methods[1].selector = @selector(initWithOrgApacheLuceneSearchFilter:withOrgApacheLuceneSearchSort:withOrgApacheLuceneSearchSort:);
  methods[2].selector = @selector(newComparatorWithNSString:withInt:withInt:withBoolean:);
  methods[3].selector = @selector(description);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "parentsFilter_", "LOrgApacheLuceneSearchFilter;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "parentSort_", "LOrgApacheLuceneSearchSort;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "childSort_", "LOrgApacheLuceneSearchSort;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneSearchFilter;LOrgApacheLuceneSearchSort;", "LOrgApacheLuceneSearchFilter;LOrgApacheLuceneSearchSort;LOrgApacheLuceneSearchSort;", "newComparator", "LNSString;IIZ", "LJavaIoIOException;", "(Ljava/lang/String;IIZ)Lorg/apache/lucene/search/FieldComparator<Ljava/lang/Integer;>;", "toString" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchBlockJoinComparatorSource = { "BlockJoinComparatorSource", "org.apache.lucene.search", ptrTable, methods, fields, 7, 0x1, 4, 3, -1, -1, -1, -1, -1 };
  return &_OrgApacheLuceneSearchBlockJoinComparatorSource;
}

@end

void OrgApacheLuceneSearchBlockJoinComparatorSource_initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_(OrgApacheLuceneSearchBlockJoinComparatorSource *self, OrgApacheLuceneSearchFilter *parentsFilter, OrgApacheLuceneSearchSort *parentSort) {
  OrgApacheLuceneSearchBlockJoinComparatorSource_initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_(self, parentsFilter, parentSort, create_OrgApacheLuceneSearchSort_initWithOrgApacheLuceneSearchSortField_(JreLoadStatic(OrgApacheLuceneSearchSortField, FIELD_DOC)));
}

OrgApacheLuceneSearchBlockJoinComparatorSource *new_OrgApacheLuceneSearchBlockJoinComparatorSource_initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_(OrgApacheLuceneSearchFilter *parentsFilter, OrgApacheLuceneSearchSort *parentSort) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchBlockJoinComparatorSource, initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_, parentsFilter, parentSort)
}

OrgApacheLuceneSearchBlockJoinComparatorSource *create_OrgApacheLuceneSearchBlockJoinComparatorSource_initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_(OrgApacheLuceneSearchFilter *parentsFilter, OrgApacheLuceneSearchSort *parentSort) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchBlockJoinComparatorSource, initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_, parentsFilter, parentSort)
}

void OrgApacheLuceneSearchBlockJoinComparatorSource_initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_(OrgApacheLuceneSearchBlockJoinComparatorSource *self, OrgApacheLuceneSearchFilter *parentsFilter, OrgApacheLuceneSearchSort *parentSort, OrgApacheLuceneSearchSort *childSort) {
  OrgApacheLuceneSearchFieldComparatorSource_init(self);
  JreStrongAssign(&self->parentsFilter_, parentsFilter);
  JreStrongAssign(&self->parentSort_, parentSort);
  JreStrongAssign(&self->childSort_, childSort);
}

OrgApacheLuceneSearchBlockJoinComparatorSource *new_OrgApacheLuceneSearchBlockJoinComparatorSource_initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_(OrgApacheLuceneSearchFilter *parentsFilter, OrgApacheLuceneSearchSort *parentSort, OrgApacheLuceneSearchSort *childSort) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchBlockJoinComparatorSource, initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_, parentsFilter, parentSort, childSort)
}

OrgApacheLuceneSearchBlockJoinComparatorSource *create_OrgApacheLuceneSearchBlockJoinComparatorSource_initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_(OrgApacheLuceneSearchFilter *parentsFilter, OrgApacheLuceneSearchSort *parentSort, OrgApacheLuceneSearchSort *childSort) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchBlockJoinComparatorSource, initWithOrgApacheLuceneSearchFilter_withOrgApacheLuceneSearchSort_withOrgApacheLuceneSearchSort_, parentsFilter, parentSort, childSort)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchBlockJoinComparatorSource)

@implementation OrgApacheLuceneSearchBlockJoinComparatorSource_1

- (instancetype)initWithOrgApacheLuceneSearchBlockJoinComparatorSource:(OrgApacheLuceneSearchBlockJoinComparatorSource *)outer$
                                                          withIntArray:(IOSIntArray *)capture$0
                                                          withIntArray:(IOSIntArray *)capture$1
                         withOrgApacheLuceneSearchFieldComparatorArray:(IOSObjectArray *)capture$2
                         withOrgApacheLuceneSearchFieldComparatorArray:(IOSObjectArray *)capture$3
                                                          withIntArray:(IOSIntArray *)capture$4
                                                          withIntArray:(IOSIntArray *)capture$5 {
  OrgApacheLuceneSearchBlockJoinComparatorSource_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_(self, outer$, capture$0, capture$1, capture$2, capture$3, capture$4, capture$5);
  return self;
}

- (jint)compareWithInt:(jint)slot1
               withInt:(jint)slot2 {
  @try {
    return [self compareWithInt:IOSIntArray_Get(nil_chk(val$childSlots_), slot1) withInt:IOSIntArray_Get(nil_chk(val$parentSlots_), slot1) withInt:IOSIntArray_Get(val$childSlots_, slot2) withInt:IOSIntArray_Get(val$parentSlots_, slot2)];
  }
  @catch (JavaIoIOException *e) {
    @throw create_JavaLangRuntimeException_initWithJavaLangThrowable_(e);
  }
}

- (void)setTopValueWithId:(JavaLangInteger *)value {
  @throw create_JavaLangUnsupportedOperationException_initWithNSString_(@"this comparator cannot be used with deep paging");
}

- (id<OrgApacheLuceneSearchLeafFieldComparator>)getLeafComparatorWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  if (parentBits_ != nil) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(@"This comparator can only be used on a single segment");
  }
  OrgApacheLuceneSearchDocIdSet *parents = [((OrgApacheLuceneSearchFilter *) nil_chk(this$0_->parentsFilter_)) getDocIdSetWithOrgApacheLuceneIndexLeafReaderContext:context withOrgApacheLuceneUtilBits:nil];
  if (parents == nil) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$@$", @"LeafReader ", [((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context)) reader], @" contains no parents!"));
  }
  if ([parents isKindOfClass:[OrgApacheLuceneUtilBitDocIdSet class]] == false) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$@", @"parentFilter must return BitSet; got ", parents));
  }
  JreStrongAssign(&parentBits_, (OrgApacheLuceneUtilBitSet *) cast_chk([parents bits], [OrgApacheLuceneUtilBitSet class]));
  JreStrongAssignAndConsume(&parentLeafComparators_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(val$parentComparators_))->size_ type:OrgApacheLuceneSearchLeafFieldComparator_class_()]);
  for (jint i = 0; i < val$parentComparators_->size_; i++) {
    IOSObjectArray_Set(nil_chk(parentLeafComparators_), i, [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(val$parentComparators_, i))) getLeafComparatorWithOrgApacheLuceneIndexLeafReaderContext:context]);
  }
  JreStrongAssignAndConsume(&childLeafComparators_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(val$childComparators_))->size_ type:OrgApacheLuceneSearchLeafFieldComparator_class_()]);
  for (jint i = 0; i < val$childComparators_->size_; i++) {
    IOSObjectArray_Set(nil_chk(childLeafComparators_), i, [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(val$childComparators_, i))) getLeafComparatorWithOrgApacheLuceneIndexLeafReaderContext:context]);
  }
  return create_OrgApacheLuceneSearchBlockJoinComparatorSource_1_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_(self);
}

- (JavaLangInteger *)valueWithInt:(jint)slot {
  @throw create_JavaLangUnsupportedOperationException_initWithNSString_(@"filling sort field values is not yet supported");
}

- (jint)parentWithInt:(jint)doc {
  return [((OrgApacheLuceneUtilBitSet *) nil_chk(parentBits_)) nextSetBitWithInt:doc];
}

- (jint)compareWithInt:(jint)docID1
               withInt:(jint)parent1
               withInt:(jint)docID2
               withInt:(jint)parent2 {
  if (parent1 == parent2) {
    if (docID1 == parent1 || docID2 == parent2) {
      return docID1 - docID2;
    }
    else {
      return [self compareWithInt:docID1 withInt:docID2 withOrgApacheLuceneSearchLeafFieldComparatorArray:childLeafComparators_ withIntArray:val$childReverseMul_];
    }
  }
  else {
    jint cmp = [self compareWithInt:parent1 withInt:parent2 withOrgApacheLuceneSearchLeafFieldComparatorArray:parentLeafComparators_ withIntArray:val$parentReverseMul_];
    if (cmp == 0) {
      return parent1 - parent2;
    }
    else {
      return cmp;
    }
  }
}

- (jint)compareWithInt:(jint)docID1
               withInt:(jint)docID2
withOrgApacheLuceneSearchLeafFieldComparatorArray:(IOSObjectArray *)comparators
          withIntArray:(IOSIntArray *)reverseMul {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(comparators))->size_; i++) {
    [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(IOSObjectArray_Get(comparators, i))) copy__WithInt:0 withInt:docID1];
    [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(IOSObjectArray_Get(comparators, i))) setBottomWithInt:0];
    jint comp = IOSIntArray_Get(nil_chk(reverseMul), i) * [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(IOSObjectArray_Get(comparators, i))) compareBottomWithInt:docID2];
    if (comp != 0) {
      return comp;
    }
  }
  return 0;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(val$childSlots_);
  RELEASE_(val$parentSlots_);
  RELEASE_(val$parentComparators_);
  RELEASE_(val$childComparators_);
  RELEASE_(val$childReverseMul_);
  RELEASE_(val$parentReverseMul_);
  RELEASE_(parentBits_);
  RELEASE_(parentLeafComparators_);
  RELEASE_(childLeafComparators_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "I", 0x1, 1, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 3, 4, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchLeafFieldComparator;", 0x1, 5, 6, 7, -1, -1, -1 },
    { NULL, "LJavaLangInteger;", 0x1, 8, 9, -1, -1, -1, -1 },
    { NULL, "I", 0x0, 10, 9, -1, -1, -1, -1 },
    { NULL, "I", 0x0, 1, 11, 7, -1, -1, -1 },
    { NULL, "I", 0x0, 1, 12, 7, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneSearchBlockJoinComparatorSource:withIntArray:withIntArray:withOrgApacheLuceneSearchFieldComparatorArray:withOrgApacheLuceneSearchFieldComparatorArray:withIntArray:withIntArray:);
  methods[1].selector = @selector(compareWithInt:withInt:);
  methods[2].selector = @selector(setTopValueWithId:);
  methods[3].selector = @selector(getLeafComparatorWithOrgApacheLuceneIndexLeafReaderContext:);
  methods[4].selector = @selector(valueWithInt:);
  methods[5].selector = @selector(parentWithInt:);
  methods[6].selector = @selector(compareWithInt:withInt:withInt:withInt:);
  methods[7].selector = @selector(compareWithInt:withInt:withOrgApacheLuceneSearchLeafFieldComparatorArray:withIntArray:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneSearchBlockJoinComparatorSource;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "val$childSlots_", "[I", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "val$parentSlots_", "[I", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "val$parentComparators_", "[LOrgApacheLuceneSearchFieldComparator;", .constantValue.asLong = 0, 0x1012, -1, -1, 13, -1 },
    { "val$childComparators_", "[LOrgApacheLuceneSearchFieldComparator;", .constantValue.asLong = 0, 0x1012, -1, -1, 13, -1 },
    { "val$childReverseMul_", "[I", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "val$parentReverseMul_", "[I", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "bottomParent_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "bottomChild_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "parentBits_", "LOrgApacheLuceneUtilBitSet;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "parentLeafComparators_", "[LOrgApacheLuceneSearchLeafFieldComparator;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "childLeafComparators_", "[LOrgApacheLuceneSearchLeafFieldComparator;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneSearchBlockJoinComparatorSource;[I[I[LOrgApacheLuceneSearchFieldComparator;[LOrgApacheLuceneSearchFieldComparator;[I[I", "compare", "II", "setTopValue", "LJavaLangInteger;", "getLeafComparator", "LOrgApacheLuceneIndexLeafReaderContext;", "LJavaIoIOException;", "value", "I", "parent", "IIII", "II[LOrgApacheLuceneSearchLeafFieldComparator;[I", "[Lorg/apache/lucene/search/FieldComparator<*>;", "LOrgApacheLuceneSearchBlockJoinComparatorSource;", "newComparatorWithNSString:withInt:withInt:withBoolean:", "Lorg/apache/lucene/search/FieldComparator<Ljava/lang/Integer;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchBlockJoinComparatorSource_1 = { "", "org.apache.lucene.search", ptrTable, methods, fields, 7, 0x8010, 8, 12, 14, -1, 15, 16, -1 };
  return &_OrgApacheLuceneSearchBlockJoinComparatorSource_1;
}

@end

void OrgApacheLuceneSearchBlockJoinComparatorSource_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_(OrgApacheLuceneSearchBlockJoinComparatorSource_1 *self, OrgApacheLuceneSearchBlockJoinComparatorSource *outer$, IOSIntArray *capture$0, IOSIntArray *capture$1, IOSObjectArray *capture$2, IOSObjectArray *capture$3, IOSIntArray *capture$4, IOSIntArray *capture$5) {
  JreStrongAssign(&self->this$0_, outer$);
  JreStrongAssign(&self->val$childSlots_, capture$0);
  JreStrongAssign(&self->val$parentSlots_, capture$1);
  JreStrongAssign(&self->val$parentComparators_, capture$2);
  JreStrongAssign(&self->val$childComparators_, capture$3);
  JreStrongAssign(&self->val$childReverseMul_, capture$4);
  JreStrongAssign(&self->val$parentReverseMul_, capture$5);
  OrgApacheLuceneSearchFieldComparator_init(self);
}

OrgApacheLuceneSearchBlockJoinComparatorSource_1 *new_OrgApacheLuceneSearchBlockJoinComparatorSource_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_(OrgApacheLuceneSearchBlockJoinComparatorSource *outer$, IOSIntArray *capture$0, IOSIntArray *capture$1, IOSObjectArray *capture$2, IOSObjectArray *capture$3, IOSIntArray *capture$4, IOSIntArray *capture$5) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchBlockJoinComparatorSource_1, initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_, outer$, capture$0, capture$1, capture$2, capture$3, capture$4, capture$5)
}

OrgApacheLuceneSearchBlockJoinComparatorSource_1 *create_OrgApacheLuceneSearchBlockJoinComparatorSource_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_(OrgApacheLuceneSearchBlockJoinComparatorSource *outer$, IOSIntArray *capture$0, IOSIntArray *capture$1, IOSObjectArray *capture$2, IOSObjectArray *capture$3, IOSIntArray *capture$4, IOSIntArray *capture$5) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchBlockJoinComparatorSource_1, initWithOrgApacheLuceneSearchBlockJoinComparatorSource_withIntArray_withIntArray_withOrgApacheLuceneSearchFieldComparatorArray_withOrgApacheLuceneSearchFieldComparatorArray_withIntArray_withIntArray_, outer$, capture$0, capture$1, capture$2, capture$3, capture$4, capture$5)
}

@implementation OrgApacheLuceneSearchBlockJoinComparatorSource_1_1

- (instancetype)initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1:(OrgApacheLuceneSearchBlockJoinComparatorSource_1 *)outer$ {
  OrgApacheLuceneSearchBlockJoinComparatorSource_1_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_(self, outer$);
  return self;
}

- (jint)compareBottomWithInt:(jint)doc {
  return [this$0_ compareWithInt:this$0_->bottomChild_ withInt:this$0_->bottomParent_ withInt:doc withInt:[this$0_ parentWithInt:doc]];
}

- (jint)compareTopWithInt:(jint)doc {
  @throw create_JavaLangUnsupportedOperationException_initWithNSString_(@"this comparator cannot be used with deep paging");
}

- (void)copy__WithInt:(jint)slot
              withInt:(jint)doc {
  *IOSIntArray_GetRef(nil_chk(this$0_->val$childSlots_), slot) = doc;
  *IOSIntArray_GetRef(nil_chk(this$0_->val$parentSlots_), slot) = [this$0_ parentWithInt:doc];
}

- (void)setBottomWithInt:(jint)slot {
  this$0_->bottomParent_ = IOSIntArray_Get(nil_chk(this$0_->val$parentSlots_), slot);
  this$0_->bottomChild_ = IOSIntArray_Get(nil_chk(this$0_->val$childSlots_), slot);
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
  {
    IOSObjectArray *a__ = this$0_->parentLeafComparators_;
    id<OrgApacheLuceneSearchLeafFieldComparator> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgApacheLuceneSearchLeafFieldComparator> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgApacheLuceneSearchLeafFieldComparator> comp = *b__++;
      [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(comp)) setScorerWithOrgApacheLuceneSearchScorer:scorer];
    }
  }
  {
    IOSObjectArray *a__ = this$0_->childLeafComparators_;
    id<OrgApacheLuceneSearchLeafFieldComparator> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgApacheLuceneSearchLeafFieldComparator> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgApacheLuceneSearchLeafFieldComparator> comp = *b__++;
      [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(comp)) setScorerWithOrgApacheLuceneSearchScorer:scorer];
    }
  }
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "I", 0x1, 1, 2, 3, -1, -1, -1 },
    { NULL, "I", 0x1, 4, 2, 3, -1, -1, -1 },
    { NULL, "V", 0x1, 5, 6, 3, -1, -1, -1 },
    { NULL, "V", 0x1, 7, 2, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 8, 9, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1:);
  methods[1].selector = @selector(compareBottomWithInt:);
  methods[2].selector = @selector(compareTopWithInt:);
  methods[3].selector = @selector(copy__WithInt:withInt:);
  methods[4].selector = @selector(setBottomWithInt:);
  methods[5].selector = @selector(setScorerWithOrgApacheLuceneSearchScorer:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneSearchBlockJoinComparatorSource_1;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneSearchBlockJoinComparatorSource_1;", "compareBottom", "I", "LJavaIoIOException;", "compareTop", "copy", "II", "setBottom", "setScorer", "LOrgApacheLuceneSearchScorer;", "getLeafComparatorWithOrgApacheLuceneIndexLeafReaderContext:" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchBlockJoinComparatorSource_1_1 = { "", "org.apache.lucene.search", ptrTable, methods, fields, 7, 0x8010, 6, 1, 0, -1, 10, -1, -1 };
  return &_OrgApacheLuceneSearchBlockJoinComparatorSource_1_1;
}

@end

void OrgApacheLuceneSearchBlockJoinComparatorSource_1_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_(OrgApacheLuceneSearchBlockJoinComparatorSource_1_1 *self, OrgApacheLuceneSearchBlockJoinComparatorSource_1 *outer$) {
  JreStrongAssign(&self->this$0_, outer$);
  NSObject_init(self);
}

OrgApacheLuceneSearchBlockJoinComparatorSource_1_1 *new_OrgApacheLuceneSearchBlockJoinComparatorSource_1_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_(OrgApacheLuceneSearchBlockJoinComparatorSource_1 *outer$) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchBlockJoinComparatorSource_1_1, initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_, outer$)
}

OrgApacheLuceneSearchBlockJoinComparatorSource_1_1 *create_OrgApacheLuceneSearchBlockJoinComparatorSource_1_1_initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_(OrgApacheLuceneSearchBlockJoinComparatorSource_1 *outer$) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchBlockJoinComparatorSource_1_1, initWithOrgApacheLuceneSearchBlockJoinComparatorSource_1_, outer$)
}
