//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./suggest/src/java/org/apache/lucene/search/suggest/document/CompletionTokenStream.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/Closeable.h"
#include "java/lang/CharSequence.h"
#include "org/apache/lucene/analysis/TokenStream.h"
#include "org/apache/lucene/analysis/TokenStreamToAutomaton.h"
#include "org/apache/lucene/analysis/tokenattributes/CharTermAttribute.h"
#include "org/apache/lucene/analysis/tokenattributes/PayloadAttribute.h"
#include "org/apache/lucene/analysis/tokenattributes/TermToBytesRefAttribute.h"
#include "org/apache/lucene/search/suggest/document/CompletionAnalyzer.h"
#include "org/apache/lucene/search/suggest/document/CompletionTokenStream.h"
#include "org/apache/lucene/util/AttributeImpl.h"
#include "org/apache/lucene/util/AttributeReflector.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/BytesRefBuilder.h"
#include "org/apache/lucene/util/CharsRef.h"
#include "org/apache/lucene/util/CharsRefBuilder.h"
#include "org/apache/lucene/util/IOUtils.h"
#include "org/apache/lucene/util/IntsRef.h"
#include "org/apache/lucene/util/automaton/Automaton.h"
#include "org/apache/lucene/util/automaton/FiniteStringsIterator.h"
#include "org/apache/lucene/util/automaton/LimitedFiniteStringsIterator.h"
#include "org/apache/lucene/util/automaton/Operations.h"
#include "org/apache/lucene/util/automaton/Transition.h"
#include "org/apache/lucene/util/fst/Util.h"

#if __has_feature(objc_arc)
#error "org/apache/lucene/search/suggest/document/CompletionTokenStream must not be compiled with ARC (-fobjc-arc)"
#endif

@interface OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream () {
 @public
  id<OrgApacheLuceneAnalysisTokenattributesPayloadAttribute> payloadAttr_;
  id<OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute> bytesAtt_;
  OrgApacheLuceneAnalysisTokenStream *input_;
  OrgApacheLuceneUtilAutomatonFiniteStringsIterator *finiteStrings_;
  OrgApacheLuceneUtilBytesRef *payload_;
  id<OrgApacheLuceneAnalysisTokenattributesCharTermAttribute> charTermAttribute_;
}

+ (OrgApacheLuceneUtilAutomatonAutomaton *)replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton:(OrgApacheLuceneUtilAutomatonAutomaton *)a
                                                                                   withBoolean:(jboolean)preserveSep
                                                                                       withInt:(jint)sepLabel;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, payloadAttr_, id<OrgApacheLuceneAnalysisTokenattributesPayloadAttribute>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, bytesAtt_, id<OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, input_, OrgApacheLuceneAnalysisTokenStream *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, finiteStrings_, OrgApacheLuceneUtilAutomatonFiniteStringsIterator *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, payload_, OrgApacheLuceneUtilBytesRef *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, charTermAttribute_, id<OrgApacheLuceneAnalysisTokenattributesCharTermAttribute>)

__attribute__((unused)) static OrgApacheLuceneUtilAutomatonAutomaton *OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton_withBoolean_withInt_(OrgApacheLuceneUtilAutomatonAutomaton *a, jboolean preserveSep, jint sepLabel);

/*!
 @brief Just escapes the 0xff byte (which we still for SEP).
 */
@interface OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton : OrgApacheLuceneAnalysisTokenStreamToAutomaton {
 @public
  OrgApacheLuceneUtilBytesRefBuilder *spare_;
  jchar sepLabel_;
}

- (instancetype)initWithChar:(jchar)sepLabel;

- (OrgApacheLuceneUtilBytesRef *)changeTokenWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)inArg;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton, spare_, OrgApacheLuceneUtilBytesRefBuilder *)

__attribute__((unused)) static void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *self, jchar sepLabel);

__attribute__((unused)) static OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(jchar sepLabel) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *create_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(jchar sepLabel);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton)

@interface OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute : NSObject

@end

@interface OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl () {
 @public
  OrgApacheLuceneUtilBytesRefBuilder *bytes_;
  OrgApacheLuceneUtilCharsRefBuilder *charsRef_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl, bytes_, OrgApacheLuceneUtilBytesRefBuilder *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl, charsRef_, OrgApacheLuceneUtilCharsRefBuilder *)

@implementation OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream

- (instancetype)initWithOrgApacheLuceneAnalysisTokenStream:(OrgApacheLuceneAnalysisTokenStream *)input {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_(self, input);
  return self;
}

- (instancetype)initWithOrgApacheLuceneAnalysisTokenStream:(OrgApacheLuceneAnalysisTokenStream *)input
                                               withBoolean:(jboolean)preserveSep
                                               withBoolean:(jboolean)preservePositionIncrements
                                                   withInt:(jint)maxGraphExpansions {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(self, input, preserveSep, preservePositionIncrements, maxGraphExpansions);
  return self;
}

- (void)setPayloadWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)payload {
  JreStrongAssign(&self->payload_, payload);
}

- (jboolean)incrementToken {
  [self clearAttributes];
  if (finiteStrings_ == nil) {
    OrgApacheLuceneUtilAutomatonAutomaton *automaton = JreRetainedLocalValue([self toAutomaton]);
    JreStrongAssignAndConsume(&finiteStrings_, new_OrgApacheLuceneUtilAutomatonLimitedFiniteStringsIterator_initWithOrgApacheLuceneUtilAutomatonAutomaton_withInt_(automaton, maxGraphExpansions_));
  }
  OrgApacheLuceneUtilIntsRef *string = JreRetainedLocalValue([finiteStrings_ next]);
  if (string == nil) {
    return false;
  }
  OrgApacheLuceneUtilFstUtil_toBytesRefWithOrgApacheLuceneUtilIntsRef_withOrgApacheLuceneUtilBytesRefBuilder_(string, [((id<OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute>) nil_chk(bytesAtt_)) builder]);
  if (charTermAttribute_ != nil) {
    [charTermAttribute_ setLengthWithInt:0];
    [((id<OrgApacheLuceneAnalysisTokenattributesCharTermAttribute>) nil_chk(charTermAttribute_)) appendWithJavaLangCharSequence:[bytesAtt_ toUTF16]];
  }
  if (payload_ != nil) {
    [((id<OrgApacheLuceneAnalysisTokenattributesPayloadAttribute>) nil_chk(payloadAttr_)) setPayloadWithOrgApacheLuceneUtilBytesRef:self->payload_];
  }
  return true;
}

- (void)end {
  [super end];
  if (finiteStrings_ == nil) {
    [((OrgApacheLuceneAnalysisTokenStream *) nil_chk(input_)) end];
  }
}

- (void)close {
  if (finiteStrings_ == nil) {
    [((OrgApacheLuceneAnalysisTokenStream *) nil_chk(input_)) close];
  }
}

- (void)reset {
  [super reset];
  if ([self hasAttributeWithIOSClass:OrgApacheLuceneAnalysisTokenattributesCharTermAttribute_class_()]) {
    JreStrongAssign(&charTermAttribute_, [self getAttributeWithIOSClass:OrgApacheLuceneAnalysisTokenattributesCharTermAttribute_class_()]);
  }
  JreStrongAssign(&finiteStrings_, nil);
}

- (OrgApacheLuceneUtilAutomatonAutomaton *)toAutomaton {
  return [self toAutomatonWithBoolean:false];
}

- (OrgApacheLuceneUtilAutomatonAutomaton *)toAutomatonWithBoolean:(jboolean)unicodeAware {
  OrgApacheLuceneUtilAutomatonAutomaton *automaton = nil;
  @try {
    OrgApacheLuceneAnalysisTokenStreamToAutomaton *tsta;
    if (preserveSep_) {
      tsta = create_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_((jchar) OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_SEP_LABEL);
    }
    else {
      tsta = create_OrgApacheLuceneAnalysisTokenStreamToAutomaton_init();
    }
    [tsta setPreservePositionIncrementsWithBoolean:preservePositionIncrements_];
    [tsta setUnicodeArcsWithBoolean:unicodeAware];
    automaton = [tsta toAutomatonWithOrgApacheLuceneAnalysisTokenStream:input_];
  }
  @finally {
    OrgApacheLuceneUtilIOUtils_closeWhileHandlingExceptionWithJavaIoCloseableArray_([IOSObjectArray arrayWithObjects:(id[]){ input_ } count:1 type:JavaIoCloseable_class_()]);
  }
  automaton = OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton_withBoolean_withInt_(automaton, preserveSep_, OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_SEP_LABEL);
  return OrgApacheLuceneUtilAutomatonOperations_determinizeWithOrgApacheLuceneUtilAutomatonAutomaton_withInt_(automaton, maxGraphExpansions_);
}

+ (OrgApacheLuceneUtilAutomatonAutomaton *)replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton:(OrgApacheLuceneUtilAutomatonAutomaton *)a
                                                                                   withBoolean:(jboolean)preserveSep
                                                                                       withInt:(jint)sepLabel {
  return OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton_withBoolean_withInt_(a, preserveSep, sepLabel);
}

- (void)dealloc {
  RELEASE_(payloadAttr_);
  RELEASE_(bytesAtt_);
  RELEASE_(input_);
  RELEASE_(finiteStrings_);
  RELEASE_(payload_);
  RELEASE_(charTermAttribute_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, NULL, 0x0, -1, 1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 2, 3, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, 4, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, 4, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, 4, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, 4, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilAutomatonAutomaton;", 0x1, -1, -1, 4, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilAutomatonAutomaton;", 0x1, 5, 6, 4, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilAutomatonAutomaton;", 0xa, 7, 8, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneAnalysisTokenStream:);
  methods[1].selector = @selector(initWithOrgApacheLuceneAnalysisTokenStream:withBoolean:withBoolean:withInt:);
  methods[2].selector = @selector(setPayloadWithOrgApacheLuceneUtilBytesRef:);
  methods[3].selector = @selector(incrementToken);
  methods[4].selector = @selector(end);
  methods[5].selector = @selector(close);
  methods[6].selector = @selector(reset);
  methods[7].selector = @selector(toAutomaton);
  methods[8].selector = @selector(toAutomatonWithBoolean:);
  methods[9].selector = @selector(replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton:withBoolean:withInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "payloadAttr_", "LOrgApacheLuceneAnalysisTokenattributesPayloadAttribute;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "bytesAtt_", "LOrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "input_", "LOrgApacheLuceneAnalysisTokenStream;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "preserveSep_", "Z", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "preservePositionIncrements_", "Z", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "maxGraphExpansions_", "I", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "finiteStrings_", "LOrgApacheLuceneUtilAutomatonFiniteStringsIterator;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "payload_", "LOrgApacheLuceneUtilBytesRef;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "charTermAttribute_", "LOrgApacheLuceneAnalysisTokenattributesCharTermAttribute;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneAnalysisTokenStream;", "LOrgApacheLuceneAnalysisTokenStream;ZZI", "setPayload", "LOrgApacheLuceneUtilBytesRef;", "LJavaIoIOException;", "toAutomaton", "Z", "replaceSep", "LOrgApacheLuceneUtilAutomatonAutomaton;ZI", "LOrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton;LOrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute;LOrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream = { "CompletionTokenStream", "org.apache.lucene.search.suggest.document", ptrTable, methods, fields, 7, 0x11, 10, 9, -1, 9, -1, -1, -1 };
  return &_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream;
}

@end

void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *self, OrgApacheLuceneAnalysisTokenStream *input) {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(self, input, OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_DEFAULT_PRESERVE_SEP, OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_DEFAULT_PRESERVE_POSITION_INCREMENTS, OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_DEFAULT_MAX_GRAPH_EXPANSIONS);
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_(OrgApacheLuceneAnalysisTokenStream *input) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, initWithOrgApacheLuceneAnalysisTokenStream_, input)
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *create_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_(OrgApacheLuceneAnalysisTokenStream *input) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, initWithOrgApacheLuceneAnalysisTokenStream_, input)
}

void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *self, OrgApacheLuceneAnalysisTokenStream *input, jboolean preserveSep, jboolean preservePositionIncrements, jint maxGraphExpansions) {
  OrgApacheLuceneAnalysisTokenStream_init(self);
  JreStrongAssign(&self->payloadAttr_, [self addAttributeWithIOSClass:OrgApacheLuceneAnalysisTokenattributesPayloadAttribute_class_()]);
  JreStrongAssign(&self->bytesAtt_, [self addAttributeWithIOSClass:OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute_class_()]);
  JreStrongAssign(&self->input_, input);
  self->preserveSep_ = preserveSep;
  self->preservePositionIncrements_ = preservePositionIncrements;
  self->maxGraphExpansions_ = maxGraphExpansions;
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(OrgApacheLuceneAnalysisTokenStream *input, jboolean preserveSep, jboolean preservePositionIncrements, jint maxGraphExpansions) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_, input, preserveSep, preservePositionIncrements, maxGraphExpansions)
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *create_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(OrgApacheLuceneAnalysisTokenStream *input, jboolean preserveSep, jboolean preservePositionIncrements, jint maxGraphExpansions) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_, input, preserveSep, preservePositionIncrements, maxGraphExpansions)
}

OrgApacheLuceneUtilAutomatonAutomaton *OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton_withBoolean_withInt_(OrgApacheLuceneUtilAutomatonAutomaton *a, jboolean preserveSep, jint sepLabel) {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initialize();
  OrgApacheLuceneUtilAutomatonAutomaton *result = create_OrgApacheLuceneUtilAutomatonAutomaton_init();
  jint numStates = [((OrgApacheLuceneUtilAutomatonAutomaton *) nil_chk(a)) getNumStates];
  for (jint s = 0; s < numStates; s++) {
    [result createState];
    [result setAcceptWithInt:s withBoolean:[a isAcceptWithInt:s]];
  }
  OrgApacheLuceneUtilAutomatonTransition *t = create_OrgApacheLuceneUtilAutomatonTransition_init();
  IOSIntArray *topoSortStates = OrgApacheLuceneUtilAutomatonOperations_topoSortStatesWithOrgApacheLuceneUtilAutomatonAutomaton_(a);
  for (jint i = 0; i < ((IOSIntArray *) nil_chk(topoSortStates))->size_; i++) {
    jint state = IOSIntArray_Get(topoSortStates, topoSortStates->size_ - 1 - i);
    jint count = [a initTransitionWithInt:state withOrgApacheLuceneUtilAutomatonTransition:t];
    for (jint j = 0; j < count; j++) {
      [a getNextTransitionWithOrgApacheLuceneUtilAutomatonTransition:t];
      if (t->min_ == OrgApacheLuceneAnalysisTokenStreamToAutomaton_POS_SEP) {
        JreAssert(t->max_ == OrgApacheLuceneAnalysisTokenStreamToAutomaton_POS_SEP, @"org/apache/lucene/search/suggest/document/CompletionTokenStream.java:242 condition failed: assert t.max == TokenStreamToAutomaton.POS_SEP;");
        if (preserveSep) {
          [result addTransitionWithInt:state withInt:t->dest_ withInt:sepLabel];
        }
        else {
          [result addEpsilonWithInt:state withInt:t->dest_];
        }
      }
      else if (t->min_ == OrgApacheLuceneAnalysisTokenStreamToAutomaton_HOLE) {
        JreAssert(t->max_ == OrgApacheLuceneAnalysisTokenStreamToAutomaton_HOLE, @"org/apache/lucene/search/suggest/document/CompletionTokenStream.java:250 condition failed: assert t.max == TokenStreamToAutomaton.HOLE;");
        [result addEpsilonWithInt:state withInt:t->dest_];
      }
      else {
        [result addTransitionWithInt:state withInt:t->dest_ withInt:t->min_ withInt:t->max_];
      }
    }
  }
  [result finishState];
  return result;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream)

@implementation OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton

- (instancetype)initWithChar:(jchar)sepLabel {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(self, sepLabel);
  return self;
}

- (OrgApacheLuceneUtilBytesRef *)changeTokenWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)inArg {
  jint upto = 0;
  for (jint i = 0; i < ((OrgApacheLuceneUtilBytesRef *) nil_chk(inArg))->length_; i++) {
    jbyte b = IOSByteArray_Get(nil_chk(inArg->bytes_), inArg->offset_ + i);
    if (b == (jbyte) sepLabel_) {
      [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(spare_)) growWithInt:upto + 2];
      [spare_ setByteAtWithInt:upto++ withByte:(jbyte) sepLabel_];
      [spare_ setByteAtWithInt:upto++ withByte:b];
    }
    else {
      [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(spare_)) growWithInt:upto + 1];
      [spare_ setByteAtWithInt:upto++ withByte:b];
    }
  }
  [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(spare_)) setLengthWithInt:upto];
  return [spare_ get];
}

- (void)dealloc {
  RELEASE_(spare_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilBytesRef;", 0x4, 1, 2, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithChar:);
  methods[1].selector = @selector(changeTokenWithOrgApacheLuceneUtilBytesRef:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "spare_", "LOrgApacheLuceneUtilBytesRefBuilder;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "sepLabel_", "C", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "C", "changeToken", "LOrgApacheLuceneUtilBytesRef;", "LOrgApacheLuceneSearchSuggestDocumentCompletionTokenStream;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton = { "EscapingTokenStreamToAutomaton", "org.apache.lucene.search.suggest.document", ptrTable, methods, fields, 7, 0x1a, 2, 2, 3, -1, -1, -1, -1 };
  return &_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton;
}

@end

void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *self, jchar sepLabel) {
  OrgApacheLuceneAnalysisTokenStreamToAutomaton_init(self);
  JreStrongAssignAndConsume(&self->spare_, new_OrgApacheLuceneUtilBytesRefBuilder_init());
  self->sepLabel_ = sepLabel;
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(jchar sepLabel) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton, initWithChar_, sepLabel)
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *create_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(jchar sepLabel) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton, initWithChar_, sepLabel)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton)

@implementation OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, "LOrgApacheLuceneUtilBytesRefBuilder;", 0x401, -1, -1, -1, -1, -1, -1 },
    { NULL, "LJavaLangCharSequence;", 0x401, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(builder);
  methods[1].selector = @selector(toUTF16);
  #pragma clang diagnostic pop
  static const void *ptrTable[] = { "LOrgApacheLuceneSearchSuggestDocumentCompletionTokenStream;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute = { "BytesRefBuilderTermAttribute", "org.apache.lucene.search.suggest.document", ptrTable, methods, NULL, 7, 0x60a, 2, 0, 0, -1, -1, -1, -1 };
  return &_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute;
}

@end

J2OBJC_INTERFACE_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute)

@implementation OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (OrgApacheLuceneUtilBytesRefBuilder *)builder {
  return bytes_;
}

- (OrgApacheLuceneUtilBytesRef *)getBytesRef {
  return [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(bytes_)) get];
}

- (void)clear {
  [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(bytes_)) clear];
}

- (void)copyToWithOrgApacheLuceneUtilAttributeImpl:(OrgApacheLuceneUtilAttributeImpl *)target {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *other = (OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *) cast_chk(target, [OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl class]);
  [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(((OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *) nil_chk(other))->bytes_)) copyBytesWithOrgApacheLuceneUtilBytesRefBuilder:bytes_];
}

- (OrgApacheLuceneUtilAttributeImpl *)java_clone {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *other = create_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init();
  [self copyToWithOrgApacheLuceneUtilAttributeImpl:other];
  return other;
}

- (void)reflectWithWithOrgApacheLuceneUtilAttributeReflector:(id<OrgApacheLuceneUtilAttributeReflector>)reflector {
  [((id<OrgApacheLuceneUtilAttributeReflector>) nil_chk(reflector)) reflectWithIOSClass:OrgApacheLuceneAnalysisTokenattributesTermToBytesRefAttribute_class_() withNSString:@"bytes" withId:[self getBytesRef]];
}

- (id<JavaLangCharSequence>)toUTF16 {
  if (charsRef_ == nil) {
    JreStrongAssignAndConsume(&charsRef_, new_OrgApacheLuceneUtilCharsRefBuilder_init());
  }
  [charsRef_ copyUTF8BytesWithOrgApacheLuceneUtilBytesRef:[self getBytesRef]];
  return [((OrgApacheLuceneUtilCharsRefBuilder *) nil_chk(charsRef_)) get];
}

- (void)dealloc {
  RELEASE_(bytes_);
  RELEASE_(charsRef_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilBytesRefBuilder;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilBytesRef;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 0, 1, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilAttributeImpl;", 0x1, 2, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 3, 4, -1, -1, -1, -1 },
    { NULL, "LJavaLangCharSequence;", 0x1, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(builder);
  methods[2].selector = @selector(getBytesRef);
  methods[3].selector = @selector(clear);
  methods[4].selector = @selector(copyToWithOrgApacheLuceneUtilAttributeImpl:);
  methods[5].selector = @selector(java_clone);
  methods[6].selector = @selector(reflectWithWithOrgApacheLuceneUtilAttributeReflector:);
  methods[7].selector = @selector(toUTF16);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "bytes_", "LOrgApacheLuceneUtilBytesRefBuilder;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "charsRef_", "LOrgApacheLuceneUtilCharsRefBuilder;", .constantValue.asLong = 0, 0x82, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "copyTo", "LOrgApacheLuceneUtilAttributeImpl;", "clone", "reflectWith", "LOrgApacheLuceneUtilAttributeReflector;", "LOrgApacheLuceneSearchSuggestDocumentCompletionTokenStream;" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl = { "BytesRefBuilderTermAttributeImpl", "org.apache.lucene.search.suggest.document", ptrTable, methods, fields, 7, 0x19, 8, 2, 5, -1, -1, -1, -1 };
  return &_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl;
}

@end

void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *self) {
  OrgApacheLuceneUtilAttributeImpl_init(self);
  JreStrongAssignAndConsume(&self->bytes_, new_OrgApacheLuceneUtilBytesRefBuilder_init());
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init() {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl, init)
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *create_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init() {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl)
