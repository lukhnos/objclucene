//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/index/SegmentInfo.java
//

#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Deprecated.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/StringBuilder.h"
#include "java/lang/annotation/Annotation.h"
#include "java/util/Arrays.h"
#include "java/util/Collection.h"
#include "java/util/Collections.h"
#include "java/util/HashSet.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "java/util/regex/Matcher.h"
#include "java/util/regex/Pattern.h"
#include "org/apache/lucene/codecs/Codec.h"
#include "org/apache/lucene/index/IndexFileNames.h"
#include "org/apache/lucene/index/SegmentInfo.h"
#include "org/apache/lucene/store/Directory.h"
#include "org/apache/lucene/store/TrackingDirectoryWrapper.h"
#include "org/apache/lucene/util/StringHelper.h"
#include "org/apache/lucene/util/Version.h"
#include "org/lukhnos/portmobile/util/Objects.h"

@interface OrgApacheLuceneIndexSegmentInfo () {
 @public
  jint maxDoc_;
  jboolean isCompoundFile_;
  /*!
   @brief Id that uniquely identifies this segment.
   */
  IOSByteArray *id__;
  OrgApacheLuceneCodecsCodec *codec_;
  id<JavaUtilMap> diagnostics_;
  id<JavaUtilMap> attributes_;
  OrgApacheLuceneUtilVersion *version__;
  id<JavaUtilSet> setFiles_;
}

- (void)checkFileNamesWithJavaUtilCollection:(id<JavaUtilCollection>)files;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexSegmentInfo, id__, IOSByteArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexSegmentInfo, codec_, OrgApacheLuceneCodecsCodec *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexSegmentInfo, diagnostics_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexSegmentInfo, attributes_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexSegmentInfo, version__, OrgApacheLuceneUtilVersion *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexSegmentInfo, setFiles_, id<JavaUtilSet>)

__attribute__((unused)) static void OrgApacheLuceneIndexSegmentInfo_checkFileNamesWithJavaUtilCollection_(OrgApacheLuceneIndexSegmentInfo *self, id<JavaUtilCollection> files);

@implementation OrgApacheLuceneIndexSegmentInfo

+ (jint)NO_ {
  return OrgApacheLuceneIndexSegmentInfo_NO;
}

+ (jint)YES_ {
  return OrgApacheLuceneIndexSegmentInfo_YES;
}

- (void)setDiagnosticsWithJavaUtilMap:(id<JavaUtilMap>)diagnostics {
  JreStrongAssign(&self->diagnostics_, OrgLukhnosPortmobileUtilObjects_requireNonNullWithId_(diagnostics));
}

- (id<JavaUtilMap>)getDiagnostics {
  return diagnostics_;
}

- (instancetype)initWithOrgApacheLuceneStoreDirectory:(OrgApacheLuceneStoreDirectory *)dir
                       withOrgApacheLuceneUtilVersion:(OrgApacheLuceneUtilVersion *)version_
                                         withNSString:(NSString *)name
                                              withInt:(jint)maxDoc
                                          withBoolean:(jboolean)isCompoundFile
                       withOrgApacheLuceneCodecsCodec:(OrgApacheLuceneCodecsCodec *)codec
                                      withJavaUtilMap:(id<JavaUtilMap>)diagnostics
                                        withByteArray:(IOSByteArray *)id_
                                      withJavaUtilMap:(id<JavaUtilMap>)attributes {
  OrgApacheLuceneIndexSegmentInfo_initWithOrgApacheLuceneStoreDirectory_withOrgApacheLuceneUtilVersion_withNSString_withInt_withBoolean_withOrgApacheLuceneCodecsCodec_withJavaUtilMap_withByteArray_withJavaUtilMap_(self, dir, version_, name, maxDoc, isCompoundFile, codec, diagnostics, id_, attributes);
  return self;
}

- (void)setUseCompoundFileWithBoolean:(jboolean)isCompoundFile {
  self->isCompoundFile_ = isCompoundFile;
}

- (jboolean)getUseCompoundFile {
  return isCompoundFile_;
}

- (void)setCodecWithOrgApacheLuceneCodecsCodec:(OrgApacheLuceneCodecsCodec *)codec {
  JreAssert((self->codec_ == nil), (@"org/apache/lucene/index/SegmentInfo.java:131 condition failed: assert this.codec == null;"));
  if (codec == nil) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(@"codec must be non-null");
  }
  JreStrongAssign(&self->codec_, codec);
}

- (OrgApacheLuceneCodecsCodec *)getCodec {
  return codec_;
}

- (jint)maxDoc {
  if (self->maxDoc_ == -1) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(@"maxDoc isn't set yet");
  }
  return maxDoc_;
}

- (void)setMaxDocWithInt:(jint)maxDoc {
  if (self->maxDoc_ != -1) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$I$I", @"maxDoc was already set: this.maxDoc=", self->maxDoc_, @" vs maxDoc=", maxDoc));
  }
  self->maxDoc_ = maxDoc;
}

- (id<JavaUtilSet>)files {
  if (setFiles_ == nil) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(@"files were not computed yet");
  }
  return JavaUtilCollections_unmodifiableSetWithJavaUtilSet_(setFiles_);
}

- (NSString *)description {
  return [self toStringWithInt:0];
}

- (NSString *)toStringWithOrgApacheLuceneStoreDirectory:(OrgApacheLuceneStoreDirectory *)dir
                                                withInt:(jint)delCount {
  return [self toStringWithInt:delCount];
}

- (NSString *)toStringWithInt:(jint)delCount {
  JavaLangStringBuilder *s = create_JavaLangStringBuilder_init();
  [((JavaLangStringBuilder *) nil_chk([((JavaLangStringBuilder *) nil_chk([((JavaLangStringBuilder *) nil_chk([((JavaLangStringBuilder *) nil_chk([s appendWithNSString:name_])) appendWithChar:'('])) appendWithId:version__ == nil ? @"?" : version__])) appendWithChar:')'])) appendWithChar:':'];
  jchar cfs = [self getUseCompoundFile] ? 'c' : 'C';
  [s appendWithChar:cfs];
  [s appendWithInt:maxDoc_];
  if (delCount != 0) {
    [((JavaLangStringBuilder *) nil_chk([s appendWithChar:'/'])) appendWithInt:delCount];
  }
  NSString *sorter_key = @"sorter";
  NSString *sorter_val = [((id<JavaUtilMap>) nil_chk(diagnostics_)) getWithId:sorter_key];
  if (sorter_val != nil) {
    [s appendWithNSString:@":["];
    [s appendWithNSString:sorter_key];
    [s appendWithChar:'='];
    [s appendWithNSString:sorter_val];
    [s appendWithChar:']'];
  }
  return [s description];
}

- (jboolean)isEqual:(id)obj {
  if (self == obj) return true;
  if ([obj isKindOfClass:[OrgApacheLuceneIndexSegmentInfo class]]) {
    OrgApacheLuceneIndexSegmentInfo *other = (OrgApacheLuceneIndexSegmentInfo *) cast_chk(obj, [OrgApacheLuceneIndexSegmentInfo class]);
    return ((OrgApacheLuceneIndexSegmentInfo *) nil_chk(other))->dir_ == dir_ && [((NSString *) nil_chk(other->name_)) isEqual:name_];
  }
  else {
    return false;
  }
}

- (NSUInteger)hash {
  return ((jint) [((OrgApacheLuceneStoreDirectory *) nil_chk(dir_)) hash]) + ((jint) [((NSString *) nil_chk(name_)) hash]);
}

- (OrgApacheLuceneUtilVersion *)getVersion {
  return version__;
}

- (IOSByteArray *)getId {
  return id__ == nil ? nil : [id__ clone];
}

- (void)setFilesWithJavaUtilCollection:(id<JavaUtilCollection>)files {
  JreStrongAssignAndConsume(&setFiles_, new_JavaUtilHashSet_init());
  [self addFilesWithJavaUtilCollection:files];
}

- (void)addFilesWithJavaUtilCollection:(id<JavaUtilCollection>)files {
  OrgApacheLuceneIndexSegmentInfo_checkFileNamesWithJavaUtilCollection_(self, files);
  for (NSString * __strong f in nil_chk(files)) {
    [((id<JavaUtilSet>) nil_chk(setFiles_)) addWithId:[self namedForThisSegmentWithNSString:f]];
  }
}

- (void)addFileWithNSString:(NSString *)file {
  OrgApacheLuceneIndexSegmentInfo_checkFileNamesWithJavaUtilCollection_(self, JavaUtilCollections_singletonWithId_(file));
  [((id<JavaUtilSet>) nil_chk(setFiles_)) addWithId:[self namedForThisSegmentWithNSString:file]];
}

- (void)checkFileNamesWithJavaUtilCollection:(id<JavaUtilCollection>)files {
  OrgApacheLuceneIndexSegmentInfo_checkFileNamesWithJavaUtilCollection_(self, files);
}

- (NSString *)namedForThisSegmentWithNSString:(NSString *)file {
  return JreStrcat("$$", name_, OrgApacheLuceneIndexIndexFileNames_stripSegmentNameWithNSString_(file));
}

- (NSString *)getAttributeWithNSString:(NSString *)key {
  return [((id<JavaUtilMap>) nil_chk(attributes_)) getWithId:key];
}

- (NSString *)putAttributeWithNSString:(NSString *)key
                          withNSString:(NSString *)value {
  return [((id<JavaUtilMap>) nil_chk(attributes_)) putWithId:key withId:value];
}

- (id<JavaUtilMap>)getAttributes {
  return attributes_;
}

+ (IOSObjectArray *)__annotations_toStringWithOrgApacheLuceneStoreDirectory_withInt_ {
  return [IOSObjectArray arrayWithObjects:(id[]){ create_JavaLangDeprecated() } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

- (void)dealloc {
  RELEASE_(name_);
  RELEASE_(dir_);
  RELEASE_(id__);
  RELEASE_(codec_);
  RELEASE_(diagnostics_);
  RELEASE_(attributes_);
  RELEASE_(version__);
  RELEASE_(setFiles_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "setDiagnosticsWithJavaUtilMap:", "setDiagnostics", "V", 0x0, NULL, "(Ljava/util/Map<Ljava/lang/String;Ljava/lang/String;>;)V" },
    { "getDiagnostics", NULL, "Ljava.util.Map;", 0x1, NULL, "()Ljava/util/Map<Ljava/lang/String;Ljava/lang/String;>;" },
    { "initWithOrgApacheLuceneStoreDirectory:withOrgApacheLuceneUtilVersion:withNSString:withInt:withBoolean:withOrgApacheLuceneCodecsCodec:withJavaUtilMap:withByteArray:withJavaUtilMap:", "SegmentInfo", NULL, 0x1, NULL, "(Lorg/apache/lucene/store/Directory;Lorg/apache/lucene/util/Version;Ljava/lang/String;IZLorg/apache/lucene/codecs/Codec;Ljava/util/Map<Ljava/lang/String;Ljava/lang/String;>;[BLjava/util/Map<Ljava/lang/String;Ljava/lang/String;>;)V" },
    { "setUseCompoundFileWithBoolean:", "setUseCompoundFile", "V", 0x0, NULL, NULL },
    { "getUseCompoundFile", NULL, "Z", 0x1, NULL, NULL },
    { "setCodecWithOrgApacheLuceneCodecsCodec:", "setCodec", "V", 0x1, NULL, NULL },
    { "getCodec", NULL, "Lorg.apache.lucene.codecs.Codec;", 0x1, NULL, NULL },
    { "maxDoc", NULL, "I", 0x1, NULL, NULL },
    { "setMaxDocWithInt:", "setMaxDoc", "V", 0x0, NULL, NULL },
    { "files", NULL, "Ljava.util.Set;", 0x1, NULL, "()Ljava/util/Set<Ljava/lang/String;>;" },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "toStringWithOrgApacheLuceneStoreDirectory:withInt:", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "toStringWithInt:", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "isEqual:", "equals", "Z", 0x1, NULL, NULL },
    { "hash", "hashCode", "I", 0x1, NULL, NULL },
    { "getVersion", NULL, "Lorg.apache.lucene.util.Version;", 0x1, NULL, NULL },
    { "getId", NULL, "[B", 0x1, NULL, NULL },
    { "setFilesWithJavaUtilCollection:", "setFiles", "V", 0x1, NULL, "(Ljava/util/Collection<Ljava/lang/String;>;)V" },
    { "addFilesWithJavaUtilCollection:", "addFiles", "V", 0x1, NULL, "(Ljava/util/Collection<Ljava/lang/String;>;)V" },
    { "addFileWithNSString:", "addFile", "V", 0x1, NULL, NULL },
    { "checkFileNamesWithJavaUtilCollection:", "checkFileNames", "V", 0x2, NULL, "(Ljava/util/Collection<Ljava/lang/String;>;)V" },
    { "namedForThisSegmentWithNSString:", "namedForThisSegment", "Ljava.lang.String;", 0x0, NULL, NULL },
    { "getAttributeWithNSString:", "getAttribute", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "putAttributeWithNSString:withNSString:", "putAttribute", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "getAttributes", NULL, "Ljava.util.Map;", 0x1, NULL, "()Ljava/util/Map<Ljava/lang/String;Ljava/lang/String;>;" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "NO", "NO", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneIndexSegmentInfo_NO },
    { "YES", "YES", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneIndexSegmentInfo_YES },
    { "name_", NULL, 0x11, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "maxDoc_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "dir_", NULL, 0x11, "Lorg.apache.lucene.store.Directory;", NULL, NULL, .constantValue.asLong = 0 },
    { "isCompoundFile_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "id__", "id", 0x12, "[B", NULL, NULL, .constantValue.asLong = 0 },
    { "codec_", NULL, 0x2, "Lorg.apache.lucene.codecs.Codec;", NULL, NULL, .constantValue.asLong = 0 },
    { "diagnostics_", NULL, 0x2, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/String;Ljava/lang/String;>;", .constantValue.asLong = 0 },
    { "attributes_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/String;Ljava/lang/String;>;", .constantValue.asLong = 0 },
    { "version__", "version", 0x2, "Lorg.apache.lucene.util.Version;", NULL, NULL, .constantValue.asLong = 0 },
    { "setFiles_", NULL, 0x2, "Ljava.util.Set;", NULL, "Ljava/util/Set<Ljava/lang/String;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneIndexSegmentInfo = { 2, "SegmentInfo", "org.apache.lucene.index", NULL, 0x11, 25, methods, 12, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneIndexSegmentInfo;
}

@end

void OrgApacheLuceneIndexSegmentInfo_initWithOrgApacheLuceneStoreDirectory_withOrgApacheLuceneUtilVersion_withNSString_withInt_withBoolean_withOrgApacheLuceneCodecsCodec_withJavaUtilMap_withByteArray_withJavaUtilMap_(OrgApacheLuceneIndexSegmentInfo *self, OrgApacheLuceneStoreDirectory *dir, OrgApacheLuceneUtilVersion *version_, NSString *name, jint maxDoc, jboolean isCompoundFile, OrgApacheLuceneCodecsCodec *codec, id<JavaUtilMap> diagnostics, IOSByteArray *id_, id<JavaUtilMap> attributes) {
  NSObject_init(self);
  JreAssert((!([dir isKindOfClass:[OrgApacheLuceneStoreTrackingDirectoryWrapper class]])), (@"org/apache/lucene/index/SegmentInfo.java:96 condition failed: assert !(dir instanceof TrackingDirectoryWrapper);"));
  JreStrongAssign(&self->dir_, OrgLukhnosPortmobileUtilObjects_requireNonNullWithId_(dir));
  JreStrongAssign(&self->version__, OrgLukhnosPortmobileUtilObjects_requireNonNullWithId_(version_));
  JreStrongAssign(&self->name_, OrgLukhnosPortmobileUtilObjects_requireNonNullWithId_(name));
  self->maxDoc_ = maxDoc;
  self->isCompoundFile_ = isCompoundFile;
  JreStrongAssign(&self->codec_, codec);
  JreStrongAssign(&self->diagnostics_, OrgLukhnosPortmobileUtilObjects_requireNonNullWithId_(diagnostics));
  JreStrongAssign(&self->id__, id_);
  if (id_ != nil && id_->size_ != OrgApacheLuceneUtilStringHelper_ID_LENGTH) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$$", @"invalid id: ", JavaUtilArrays_toStringWithByteArray_(id_)));
  }
  JreStrongAssign(&self->attributes_, OrgLukhnosPortmobileUtilObjects_requireNonNullWithId_(attributes));
}

OrgApacheLuceneIndexSegmentInfo *new_OrgApacheLuceneIndexSegmentInfo_initWithOrgApacheLuceneStoreDirectory_withOrgApacheLuceneUtilVersion_withNSString_withInt_withBoolean_withOrgApacheLuceneCodecsCodec_withJavaUtilMap_withByteArray_withJavaUtilMap_(OrgApacheLuceneStoreDirectory *dir, OrgApacheLuceneUtilVersion *version_, NSString *name, jint maxDoc, jboolean isCompoundFile, OrgApacheLuceneCodecsCodec *codec, id<JavaUtilMap> diagnostics, IOSByteArray *id_, id<JavaUtilMap> attributes) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneIndexSegmentInfo, initWithOrgApacheLuceneStoreDirectory_withOrgApacheLuceneUtilVersion_withNSString_withInt_withBoolean_withOrgApacheLuceneCodecsCodec_withJavaUtilMap_withByteArray_withJavaUtilMap_, dir, version_, name, maxDoc, isCompoundFile, codec, diagnostics, id_, attributes)
}

OrgApacheLuceneIndexSegmentInfo *create_OrgApacheLuceneIndexSegmentInfo_initWithOrgApacheLuceneStoreDirectory_withOrgApacheLuceneUtilVersion_withNSString_withInt_withBoolean_withOrgApacheLuceneCodecsCodec_withJavaUtilMap_withByteArray_withJavaUtilMap_(OrgApacheLuceneStoreDirectory *dir, OrgApacheLuceneUtilVersion *version_, NSString *name, jint maxDoc, jboolean isCompoundFile, OrgApacheLuceneCodecsCodec *codec, id<JavaUtilMap> diagnostics, IOSByteArray *id_, id<JavaUtilMap> attributes) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneIndexSegmentInfo, initWithOrgApacheLuceneStoreDirectory_withOrgApacheLuceneUtilVersion_withNSString_withInt_withBoolean_withOrgApacheLuceneCodecsCodec_withJavaUtilMap_withByteArray_withJavaUtilMap_, dir, version_, name, maxDoc, isCompoundFile, codec, diagnostics, id_, attributes)
}

void OrgApacheLuceneIndexSegmentInfo_checkFileNamesWithJavaUtilCollection_(OrgApacheLuceneIndexSegmentInfo *self, id<JavaUtilCollection> files) {
  JavaUtilRegexMatcher *m = [((JavaUtilRegexPattern *) nil_chk(JreLoadStatic(OrgApacheLuceneIndexIndexFileNames, CODEC_FILE_PATTERN))) matcherWithJavaLangCharSequence:@""];
  for (NSString * __strong file in nil_chk(files)) {
    [((JavaUtilRegexMatcher *) nil_chk(m)) resetWithJavaLangCharSequence:file];
    if (![m matches]) {
      @throw create_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$$$$", @"invalid codec filename '", file, @"', must match: ", [JreLoadStatic(OrgApacheLuceneIndexIndexFileNames, CODEC_FILE_PATTERN) pattern]));
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexSegmentInfo)
