//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/index/SegmentCommitInfo.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/lang/Deprecated.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/annotation/Annotation.h"
#include "java/util/Collection.h"
#include "java/util/Collections.h"
#include "java/util/HashMap.h"
#include "java/util/HashSet.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "org/apache/lucene/codecs/Codec.h"
#include "org/apache/lucene/codecs/LiveDocsFormat.h"
#include "org/apache/lucene/index/SegmentCommitInfo.h"
#include "org/apache/lucene/index/SegmentInfo.h"
#include "org/apache/lucene/store/Directory.h"

@interface OrgApacheLuceneIndexSegmentCommitInfo () {
 @public
  jint delCount_;
  jlong delGen_;
  jlong nextWriteDelGen_;
  jlong fieldInfosGen_;
  jlong nextWriteFieldInfosGen_;
  jlong docValuesGen_;
  jlong nextWriteDocValuesGen_;
  id<JavaUtilMap> dvUpdatesFiles_;
  id<JavaUtilSet> fieldInfosFiles_;
  id<JavaUtilMap> genUpdatesFiles_;
  volatile_jlong sizeInBytes_;
  jlong bufferedDeletesGen_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexSegmentCommitInfo, dvUpdatesFiles_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexSegmentCommitInfo, fieldInfosFiles_, id<JavaUtilSet>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexSegmentCommitInfo, genUpdatesFiles_, id<JavaUtilMap>)

@implementation OrgApacheLuceneIndexSegmentCommitInfo

- (instancetype)initWithOrgApacheLuceneIndexSegmentInfo:(OrgApacheLuceneIndexSegmentInfo *)info
                                                withInt:(jint)delCount
                                               withLong:(jlong)delGen
                                               withLong:(jlong)fieldInfosGen
                                               withLong:(jlong)docValuesGen {
  OrgApacheLuceneIndexSegmentCommitInfo_initWithOrgApacheLuceneIndexSegmentInfo_withInt_withLong_withLong_withLong_(self, info, delCount, delGen, fieldInfosGen, docValuesGen);
  return self;
}

- (void)setGenUpdatesFilesWithJavaUtilMap:(id<JavaUtilMap>)genUpdatesFiles {
  [((id<JavaUtilMap>) nil_chk(self->genUpdatesFiles_)) clear];
  for (id<JavaUtilMap_Entry> __strong kv in nil_chk([((id<JavaUtilMap>) nil_chk(genUpdatesFiles)) entrySet])) {
    id<JavaUtilSet> set = create_JavaUtilHashSet_init();
    for (NSString * __strong file in nil_chk([((id<JavaUtilMap_Entry>) nil_chk(kv)) getValue])) {
      [set addWithId:[((OrgApacheLuceneIndexSegmentInfo *) nil_chk(info_)) namedForThisSegmentWithNSString:file]];
    }
    [self->genUpdatesFiles_ putWithId:[kv getKey] withId:set];
  }
}

- (id<JavaUtilMap>)getDocValuesUpdatesFiles {
  return JavaUtilCollections_unmodifiableMapWithJavaUtilMap_(dvUpdatesFiles_);
}

- (void)setDocValuesUpdatesFilesWithJavaUtilMap:(id<JavaUtilMap>)dvUpdatesFiles {
  [((id<JavaUtilMap>) nil_chk(self->dvUpdatesFiles_)) clear];
  for (id<JavaUtilMap_Entry> __strong kv in nil_chk([((id<JavaUtilMap>) nil_chk(dvUpdatesFiles)) entrySet])) {
    id<JavaUtilSet> set = create_JavaUtilHashSet_init();
    for (NSString * __strong file in nil_chk([((id<JavaUtilMap_Entry>) nil_chk(kv)) getValue])) {
      [set addWithId:[((OrgApacheLuceneIndexSegmentInfo *) nil_chk(info_)) namedForThisSegmentWithNSString:file]];
    }
    [self->dvUpdatesFiles_ putWithId:[kv getKey] withId:set];
  }
}

- (id<JavaUtilSet>)getFieldInfosFiles {
  return JavaUtilCollections_unmodifiableSetWithJavaUtilSet_(fieldInfosFiles_);
}

- (void)setFieldInfosFilesWithJavaUtilSet:(id<JavaUtilSet>)fieldInfosFiles {
  [((id<JavaUtilSet>) nil_chk(self->fieldInfosFiles_)) clear];
  for (NSString * __strong file in nil_chk(fieldInfosFiles)) {
    [self->fieldInfosFiles_ addWithId:[((OrgApacheLuceneIndexSegmentInfo *) nil_chk(info_)) namedForThisSegmentWithNSString:file]];
  }
}

- (void)advanceDelGen {
  delGen_ = nextWriteDelGen_;
  nextWriteDelGen_ = delGen_ + 1;
  JreAssignVolatileLong(&sizeInBytes_, -1);
}

- (void)advanceNextWriteDelGen {
  nextWriteDelGen_++;
}

- (jlong)getNextWriteDelGen {
  return nextWriteDelGen_;
}

- (void)setNextWriteDelGenWithLong:(jlong)v {
  nextWriteDelGen_ = v;
}

- (void)advanceFieldInfosGen {
  fieldInfosGen_ = nextWriteFieldInfosGen_;
  nextWriteFieldInfosGen_ = fieldInfosGen_ + 1;
  JreAssignVolatileLong(&sizeInBytes_, -1);
}

- (void)advanceNextWriteFieldInfosGen {
  nextWriteFieldInfosGen_++;
}

- (jlong)getNextWriteFieldInfosGen {
  return nextWriteFieldInfosGen_;
}

- (void)setNextWriteFieldInfosGenWithLong:(jlong)v {
  nextWriteFieldInfosGen_ = v;
}

- (void)advanceDocValuesGen {
  docValuesGen_ = nextWriteDocValuesGen_;
  nextWriteDocValuesGen_ = docValuesGen_ + 1;
  JreAssignVolatileLong(&sizeInBytes_, -1);
}

- (void)advanceNextWriteDocValuesGen {
  nextWriteDocValuesGen_++;
}

- (jlong)getNextWriteDocValuesGen {
  return nextWriteDocValuesGen_;
}

- (void)setNextWriteDocValuesGenWithLong:(jlong)v {
  nextWriteDocValuesGen_ = v;
}

- (jlong)sizeInBytes {
  if (JreLoadVolatileLong(&sizeInBytes_) == -1) {
    jlong sum = 0;
    for (NSString * __strong fileName in nil_chk([self files])) {
      sum += [((OrgApacheLuceneStoreDirectory *) nil_chk(((OrgApacheLuceneIndexSegmentInfo *) nil_chk(info_))->dir_)) fileLengthWithNSString:fileName];
    }
    JreAssignVolatileLong(&sizeInBytes_, sum);
  }
  return JreLoadVolatileLong(&sizeInBytes_);
}

- (id<JavaUtilCollection>)files {
  id<JavaUtilCollection> files = create_JavaUtilHashSet_initWithJavaUtilCollection_([((OrgApacheLuceneIndexSegmentInfo *) nil_chk(info_)) files]);
  [((OrgApacheLuceneCodecsLiveDocsFormat *) nil_chk([((OrgApacheLuceneCodecsCodec *) nil_chk([info_ getCodec])) liveDocsFormat])) filesWithOrgApacheLuceneIndexSegmentCommitInfo:self withJavaUtilCollection:files];
  for (id<JavaUtilSet> __strong updateFiles in nil_chk([((id<JavaUtilMap>) nil_chk(genUpdatesFiles_)) values])) {
    [files addAllWithJavaUtilCollection:updateFiles];
  }
  for (id<JavaUtilSet> __strong updatefiles in nil_chk([((id<JavaUtilMap>) nil_chk(dvUpdatesFiles_)) values])) {
    [files addAllWithJavaUtilCollection:updatefiles];
  }
  [files addAllWithJavaUtilCollection:fieldInfosFiles_];
  return files;
}

- (jlong)getBufferedDeletesGen {
  return bufferedDeletesGen_;
}

- (void)setBufferedDeletesGenWithLong:(jlong)v {
  bufferedDeletesGen_ = v;
  JreAssignVolatileLong(&sizeInBytes_, -1);
}

- (jboolean)hasDeletions {
  return delGen_ != -1;
}

- (jboolean)hasFieldUpdates {
  return fieldInfosGen_ != -1;
}

- (jlong)getNextFieldInfosGen {
  return nextWriteFieldInfosGen_;
}

- (jlong)getFieldInfosGen {
  return fieldInfosGen_;
}

- (jlong)getNextDocValuesGen {
  return nextWriteDocValuesGen_;
}

- (jlong)getDocValuesGen {
  return docValuesGen_;
}

- (jlong)getNextDelGen {
  return nextWriteDelGen_;
}

- (jlong)getDelGen {
  return delGen_;
}

- (jint)getDelCount {
  return delCount_;
}

- (void)setDelCountWithInt:(jint)delCount {
  if (delCount < 0 || delCount > [((OrgApacheLuceneIndexSegmentInfo *) nil_chk(info_)) maxDoc]) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$IC", @"invalid delCount=", delCount, @" (maxDoc=", [((OrgApacheLuceneIndexSegmentInfo *) nil_chk(info_)) maxDoc], ')'));
  }
  self->delCount_ = delCount;
}

- (NSString *)toStringWithOrgApacheLuceneStoreDirectory:(OrgApacheLuceneStoreDirectory *)dir
                                                withInt:(jint)pendingDelCount {
  return [self toStringWithInt:pendingDelCount];
}

- (NSString *)toStringWithInt:(jint)pendingDelCount {
  NSString *s = [((OrgApacheLuceneIndexSegmentInfo *) nil_chk(info_)) toStringWithInt:delCount_ + pendingDelCount];
  if (delGen_ != -1) {
    JreStrAppend(&s, "$J", @":delGen=", delGen_);
  }
  if (fieldInfosGen_ != -1) {
    JreStrAppend(&s, "$J", @":fieldInfosGen=", fieldInfosGen_);
  }
  if (docValuesGen_ != -1) {
    JreStrAppend(&s, "$J", @":dvGen=", docValuesGen_);
  }
  return s;
}

- (NSString *)description {
  return [self toStringWithInt:0];
}

- (OrgApacheLuceneIndexSegmentCommitInfo *)clone {
  OrgApacheLuceneIndexSegmentCommitInfo *other = create_OrgApacheLuceneIndexSegmentCommitInfo_initWithOrgApacheLuceneIndexSegmentInfo_withInt_withLong_withLong_withLong_(info_, delCount_, delGen_, fieldInfosGen_, docValuesGen_);
  other->nextWriteDelGen_ = nextWriteDelGen_;
  other->nextWriteFieldInfosGen_ = nextWriteFieldInfosGen_;
  other->nextWriteDocValuesGen_ = nextWriteDocValuesGen_;
  for (id<JavaUtilMap_Entry> __strong e in nil_chk([((id<JavaUtilMap>) nil_chk(genUpdatesFiles_)) entrySet])) {
    [other->genUpdatesFiles_ putWithId:[((id<JavaUtilMap_Entry>) nil_chk(e)) getKey] withId:create_JavaUtilHashSet_initWithJavaUtilCollection_([e getValue])];
  }
  for (id<JavaUtilMap_Entry> __strong e in nil_chk([((id<JavaUtilMap>) nil_chk(dvUpdatesFiles_)) entrySet])) {
    [other->dvUpdatesFiles_ putWithId:[((id<JavaUtilMap_Entry>) nil_chk(e)) getKey] withId:create_JavaUtilHashSet_initWithJavaUtilCollection_([e getValue])];
  }
  [((id<JavaUtilSet>) nil_chk(other->fieldInfosFiles_)) addAllWithJavaUtilCollection:fieldInfosFiles_];
  return other;
}

+ (IOSObjectArray *)__annotations_genUpdatesFiles_ {
  return [IOSObjectArray arrayWithObjects:(id[]){ create_JavaLangDeprecated() } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

+ (IOSObjectArray *)__annotations_setGenUpdatesFilesWithJavaUtilMap_ {
  return [IOSObjectArray arrayWithObjects:(id[]){ create_JavaLangDeprecated() } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

+ (IOSObjectArray *)__annotations_toStringWithOrgApacheLuceneStoreDirectory_withInt_ {
  return [IOSObjectArray arrayWithObjects:(id[]){ create_JavaLangDeprecated() } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

- (void)dealloc {
  RELEASE_(info_);
  RELEASE_(dvUpdatesFiles_);
  RELEASE_(fieldInfosFiles_);
  RELEASE_(genUpdatesFiles_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneIndexSegmentInfo:withInt:withLong:withLong:withLong:", "SegmentCommitInfo", NULL, 0x1, NULL, NULL },
    { "setGenUpdatesFilesWithJavaUtilMap:", "setGenUpdatesFiles", "V", 0x1, NULL, "(Ljava/util/Map<Ljava/lang/Long;Ljava/util/Set<Ljava/lang/String;>;>;)V" },
    { "getDocValuesUpdatesFiles", NULL, "Ljava.util.Map;", 0x1, NULL, "()Ljava/util/Map<Ljava/lang/Integer;Ljava/util/Set<Ljava/lang/String;>;>;" },
    { "setDocValuesUpdatesFilesWithJavaUtilMap:", "setDocValuesUpdatesFiles", "V", 0x1, NULL, "(Ljava/util/Map<Ljava/lang/Integer;Ljava/util/Set<Ljava/lang/String;>;>;)V" },
    { "getFieldInfosFiles", NULL, "Ljava.util.Set;", 0x1, NULL, "()Ljava/util/Set<Ljava/lang/String;>;" },
    { "setFieldInfosFilesWithJavaUtilSet:", "setFieldInfosFiles", "V", 0x1, NULL, "(Ljava/util/Set<Ljava/lang/String;>;)V" },
    { "advanceDelGen", NULL, "V", 0x0, NULL, NULL },
    { "advanceNextWriteDelGen", NULL, "V", 0x0, NULL, NULL },
    { "getNextWriteDelGen", NULL, "J", 0x0, NULL, NULL },
    { "setNextWriteDelGenWithLong:", "setNextWriteDelGen", "V", 0x0, NULL, NULL },
    { "advanceFieldInfosGen", NULL, "V", 0x0, NULL, NULL },
    { "advanceNextWriteFieldInfosGen", NULL, "V", 0x0, NULL, NULL },
    { "getNextWriteFieldInfosGen", NULL, "J", 0x0, NULL, NULL },
    { "setNextWriteFieldInfosGenWithLong:", "setNextWriteFieldInfosGen", "V", 0x0, NULL, NULL },
    { "advanceDocValuesGen", NULL, "V", 0x0, NULL, NULL },
    { "advanceNextWriteDocValuesGen", NULL, "V", 0x0, NULL, NULL },
    { "getNextWriteDocValuesGen", NULL, "J", 0x0, NULL, NULL },
    { "setNextWriteDocValuesGenWithLong:", "setNextWriteDocValuesGen", "V", 0x0, NULL, NULL },
    { "sizeInBytes", NULL, "J", 0x1, "Ljava.io.IOException;", NULL },
    { "files", NULL, "Ljava.util.Collection;", 0x1, "Ljava.io.IOException;", "()Ljava/util/Collection<Ljava/lang/String;>;" },
    { "getBufferedDeletesGen", NULL, "J", 0x0, NULL, NULL },
    { "setBufferedDeletesGenWithLong:", "setBufferedDeletesGen", "V", 0x0, NULL, NULL },
    { "hasDeletions", NULL, "Z", 0x1, NULL, NULL },
    { "hasFieldUpdates", NULL, "Z", 0x1, NULL, NULL },
    { "getNextFieldInfosGen", NULL, "J", 0x1, NULL, NULL },
    { "getFieldInfosGen", NULL, "J", 0x1, NULL, NULL },
    { "getNextDocValuesGen", NULL, "J", 0x1, NULL, NULL },
    { "getDocValuesGen", NULL, "J", 0x1, NULL, NULL },
    { "getNextDelGen", NULL, "J", 0x1, NULL, NULL },
    { "getDelGen", NULL, "J", 0x1, NULL, NULL },
    { "getDelCount", NULL, "I", 0x1, NULL, NULL },
    { "setDelCountWithInt:", "setDelCount", "V", 0x0, NULL, NULL },
    { "toStringWithOrgApacheLuceneStoreDirectory:withInt:", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "toStringWithInt:", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "clone", NULL, "Lorg.apache.lucene.index.SegmentCommitInfo;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "info_", NULL, 0x11, "Lorg.apache.lucene.index.SegmentInfo;", NULL, NULL, .constantValue.asLong = 0 },
    { "delCount_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "delGen_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "nextWriteDelGen_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "fieldInfosGen_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "nextWriteFieldInfosGen_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "docValuesGen_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "nextWriteDocValuesGen_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "dvUpdatesFiles_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/Integer;Ljava/util/Set<Ljava/lang/String;>;>;", .constantValue.asLong = 0 },
    { "fieldInfosFiles_", NULL, 0x12, "Ljava.util.Set;", NULL, "Ljava/util/Set<Ljava/lang/String;>;", .constantValue.asLong = 0 },
    { "genUpdatesFiles_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/Long;Ljava/util/Set<Ljava/lang/String;>;>;", .constantValue.asLong = 0 },
    { "sizeInBytes_", NULL, 0x42, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "bufferedDeletesGen_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneIndexSegmentCommitInfo = { 2, "SegmentCommitInfo", "org.apache.lucene.index", NULL, 0x1, 36, methods, 13, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneIndexSegmentCommitInfo;
}

@end

void OrgApacheLuceneIndexSegmentCommitInfo_initWithOrgApacheLuceneIndexSegmentInfo_withInt_withLong_withLong_withLong_(OrgApacheLuceneIndexSegmentCommitInfo *self, OrgApacheLuceneIndexSegmentInfo *info, jint delCount, jlong delGen, jlong fieldInfosGen, jlong docValuesGen) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->dvUpdatesFiles_, new_JavaUtilHashMap_init());
  JreStrongAssignAndConsume(&self->fieldInfosFiles_, new_JavaUtilHashSet_init());
  JreStrongAssignAndConsume(&self->genUpdatesFiles_, new_JavaUtilHashMap_init());
  JreAssignVolatileLong(&self->sizeInBytes_, -1);
  JreStrongAssign(&self->info_, info);
  self->delCount_ = delCount;
  self->delGen_ = delGen;
  self->nextWriteDelGen_ = delGen == -1 ? 1 : delGen + 1;
  self->fieldInfosGen_ = fieldInfosGen;
  self->nextWriteFieldInfosGen_ = fieldInfosGen == -1 ? 1 : fieldInfosGen + 1;
  self->docValuesGen_ = docValuesGen;
  self->nextWriteDocValuesGen_ = docValuesGen == -1 ? 1 : docValuesGen + 1;
}

OrgApacheLuceneIndexSegmentCommitInfo *new_OrgApacheLuceneIndexSegmentCommitInfo_initWithOrgApacheLuceneIndexSegmentInfo_withInt_withLong_withLong_withLong_(OrgApacheLuceneIndexSegmentInfo *info, jint delCount, jlong delGen, jlong fieldInfosGen, jlong docValuesGen) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneIndexSegmentCommitInfo, initWithOrgApacheLuceneIndexSegmentInfo_withInt_withLong_withLong_withLong_, info, delCount, delGen, fieldInfosGen, docValuesGen)
}

OrgApacheLuceneIndexSegmentCommitInfo *create_OrgApacheLuceneIndexSegmentCommitInfo_initWithOrgApacheLuceneIndexSegmentInfo_withInt_withLong_withLong_withLong_(OrgApacheLuceneIndexSegmentInfo *info, jint delCount, jlong delGen, jlong fieldInfosGen, jlong docValuesGen) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneIndexSegmentCommitInfo, initWithOrgApacheLuceneIndexSegmentInfo_withInt_withLong_withLong_withLong_, info, delCount, delGen, fieldInfosGen, docValuesGen)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexSegmentCommitInfo)
