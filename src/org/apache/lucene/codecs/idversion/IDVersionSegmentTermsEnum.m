//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./sandbox/src/java/org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/io/PrintStream.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/Long.h"
#include "java/lang/Math.h"
#include "java/lang/RuntimeException.h"
#include "java/lang/System.h"
#include "java/lang/UnsupportedOperationException.h"
#include "org/apache/lucene/codecs/BlockTermState.h"
#include "org/apache/lucene/codecs/PostingsReaderBase.h"
#include "org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.h"
#include "org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnumFrame.h"
#include "org/apache/lucene/codecs/idversion/IDVersionTermState.h"
#include "org/apache/lucene/codecs/idversion/VersionBlockTreeTermsReader.h"
#include "org/apache/lucene/codecs/idversion/VersionBlockTreeTermsWriter.h"
#include "org/apache/lucene/codecs/idversion/VersionFieldReader.h"
#include "org/apache/lucene/index/FieldInfo.h"
#include "org/apache/lucene/index/PostingsEnum.h"
#include "org/apache/lucene/index/TermState.h"
#include "org/apache/lucene/index/TermsEnum.h"
#include "org/apache/lucene/store/ByteArrayDataInput.h"
#include "org/apache/lucene/store/IndexInput.h"
#include "org/apache/lucene/util/ArrayUtil.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/BytesRefBuilder.h"
#include "org/apache/lucene/util/RamUsageEstimator.h"
#include "org/apache/lucene/util/fst/FST.h"
#include "org/apache/lucene/util/fst/PairOutputs.h"
#include "org/apache/lucene/util/fst/Util.h"

@interface OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum () {
 @public
  IOSObjectArray *stack_;
  OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *staticFrame_;
  jint targetBeforeCurrentLength_;
  OrgApacheLuceneStoreByteArrayDataInput *scratchReader_;
  jint validIndexPrefix_;
  jboolean eof_;
  OrgApacheLuceneUtilFstFST_BytesReader *fstReader_;
  IOSObjectArray *arcs_;
}

- (OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *)getFrameWithInt:(jint)ord;

- (OrgApacheLuceneUtilFstFST_Arc *)getArcWithInt:(jint)ord;

- (jboolean)clearEOF;

- (jboolean)setEOF;

- (void)printSeekStateWithJavaIoPrintStream:(JavaIoPrintStream *)outArg;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum, stack_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum, staticFrame_, OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum, scratchReader_, OrgApacheLuceneStoreByteArrayDataInput *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum, fstReader_, OrgApacheLuceneUtilFstFST_BytesReader *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum, arcs_, IOSObjectArray *)

__attribute__((unused)) static OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getFrameWithInt_(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *self, jint ord);

__attribute__((unused)) static OrgApacheLuceneUtilFstFST_Arc *OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getArcWithInt_(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *self, jint ord);

__attribute__((unused)) static jboolean OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_clearEOF(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *self);

__attribute__((unused)) static jboolean OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_setEOF(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *self);

@implementation OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum

- (instancetype)initWithOrgApacheLuceneCodecsIdversionVersionFieldReader:(OrgApacheLuceneCodecsIdversionVersionFieldReader *)fr {
  OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_initWithOrgApacheLuceneCodecsIdversionVersionFieldReader_(self, fr);
  return self;
}

- (void)initIndexInput {
  if (self->in_ == nil) {
    JreStrongAssign(&self->in_, [((OrgApacheLuceneStoreIndexInput *) nil_chk(((OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsReader *) nil_chk(((OrgApacheLuceneCodecsIdversionVersionFieldReader *) nil_chk(fr_))->parent_))->in_)) clone]);
  }
}

- (OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *)getFrameWithInt:(jint)ord {
  return OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getFrameWithInt_(self, ord);
}

- (OrgApacheLuceneUtilFstFST_Arc *)getArcWithInt:(jint)ord {
  return OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getArcWithInt_(self, ord);
}

- (OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *)pushFrameWithOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)arc
                                                                  withOrgApacheLuceneUtilFstPairOutputs_Pair:(OrgApacheLuceneUtilFstPairOutputs_Pair *)frameData
                                                                                                     withInt:(jint)length {
  [((OrgApacheLuceneStoreByteArrayDataInput *) nil_chk(scratchReader_)) resetWithByteArray:((OrgApacheLuceneUtilBytesRef *) nil_chk(((OrgApacheLuceneUtilFstPairOutputs_Pair *) nil_chk(frameData))->output1_))->bytes_ withInt:((OrgApacheLuceneUtilBytesRef *) frameData->output1_)->offset_ withInt:((OrgApacheLuceneUtilBytesRef *) frameData->output1_)->length_];
  jlong code = [scratchReader_ readVLong];
  jlong fpSeek = JreURShift64(code, OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAGS_NUM_BITS);
  OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *f = OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getFrameWithInt_(self, 1 + ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->ord_);
  ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(f))->maxIDVersion_ = JavaLangLong_MAX_VALUE - [((JavaLangLong *) nil_chk(frameData->output2_)) longLongValue];
  f->hasTerms_ = ((code & OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAG_HAS_TERMS) != 0);
  f->hasTermsOrig_ = f->hasTerms_;
  f->isFloor_ = ((code & OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAG_IS_FLOOR) != 0);
  if (f->isFloor_) {
    [f setFloorDataWithOrgApacheLuceneStoreByteArrayDataInput:scratchReader_ withOrgApacheLuceneUtilBytesRef:((OrgApacheLuceneUtilBytesRef *) frameData->output1_)];
  }
  [self pushFrameWithOrgApacheLuceneUtilFstFST_Arc:arc withLong:fpSeek withInt:length];
  return f;
}

- (OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *)pushFrameWithOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)arc
                                                                                                    withLong:(jlong)fp
                                                                                                     withInt:(jint)length {
  OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *f = OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getFrameWithInt_(self, 1 + ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->ord_);
  JreStrongAssign(&((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(f))->arc_, arc);
  if (f->fpOrig_ == fp && f->nextEnt_ != -1) {
    if (f->prefix_ > targetBeforeCurrentLength_) {
      [f rewind];
    }
    else {
    }
    JreAssert((length == f->prefix_), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:179 condition failed: assert length == f.prefix;"));
  }
  else {
    f->nextEnt_ = -1;
    f->prefix_ = length;
    ((OrgApacheLuceneCodecsBlockTermState *) nil_chk(f->state_))->termBlockOrd_ = 0;
    f->fpOrig_ = f->fp_ = fp;
    f->lastSubFP_ = -1;
  }
  return f;
}

- (jboolean)clearEOF {
  return OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_clearEOF(self);
}

- (jboolean)setEOF {
  return OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_setEOF(self);
}

- (jboolean)seekExactWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)target {
  return [self seekExactWithOrgApacheLuceneUtilBytesRef:target withLong:0];
}

+ (NSString *)brToStringWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)b {
  return OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_brToStringWithOrgApacheLuceneUtilBytesRef_(b);
}

- (jlong)getVersion {
  return ((OrgApacheLuceneCodecsIdversionIDVersionTermState *) nil_chk(((OrgApacheLuceneCodecsIdversionIDVersionTermState *) cast_chk(((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->state_, [OrgApacheLuceneCodecsIdversionIDVersionTermState class]))))->idVersion_;
}

- (jboolean)seekExactWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)target
                                            withLong:(jlong)minIDVersion {
  if (((OrgApacheLuceneCodecsIdversionVersionFieldReader *) nil_chk(fr_))->index_ == nil) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(@"terms index was not loaded");
  }
  [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) growWithInt:1 + ((OrgApacheLuceneUtilBytesRef *) nil_chk(target))->length_];
  JreAssert((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_clearEOF(self)), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:246 condition failed: assert clearEOF();"));
  OrgApacheLuceneUtilFstFST_Arc *arc;
  jint targetUpto;
  OrgApacheLuceneUtilFstPairOutputs_Pair *output;
  jlong startFrameFP = ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->fp_;
  targetBeforeCurrentLength_ = currentFrame_->ord_;
  jboolean changed = false;
  if (currentFrame_ != staticFrame_) {
    arc = IOSObjectArray_Get(nil_chk(arcs_), 0);
    JreAssert(([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc)) isFinal]), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:279 condition failed: assert arc.isFinal();"));
    output = ((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->output_);
    targetUpto = 0;
    OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *lastFrame = IOSObjectArray_Get(nil_chk(stack_), 0);
    JreAssert((validIndexPrefix_ <= [term_ length]), (JreStrcat("$I$I$@", @"validIndexPrefix=", validIndexPrefix_, @" term.length=", [term_ length], @" seg=", fr_->parent_)));
    jint targetLimit = JavaLangMath_minWithInt_withInt_(target->length_, validIndexPrefix_);
    jint cmp = 0;
    while (targetUpto < targetLimit) {
      cmp = ([term_ byteAtWithInt:targetUpto] & (jint) 0xFF) - (IOSByteArray_Get(nil_chk(target->bytes_), target->offset_ + targetUpto) & (jint) 0xFF);
      if (cmp != 0) {
        break;
      }
      arc = IOSObjectArray_Get(nil_chk(arcs_), 1 + targetUpto);
      JreAssert((((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->label_ == (IOSByteArray_Get(target->bytes_, target->offset_ + targetUpto) & (jint) 0xFF)), (JreStrcat("$C$C", @"arc.label=", (jchar) arc->label_, @" targetLabel=", (jchar) (IOSByteArray_Get(target->bytes_, target->offset_ + targetUpto) & (jint) 0xFF))));
      if (arc->output_ != JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, NO_OUTPUT)) {
        output = [((OrgApacheLuceneUtilFstPairOutputs *) nil_chk(JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, FST_OUTPUTS))) addWithId:output withId:((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->output_)];
      }
      if ([arc isFinal]) {
        lastFrame = IOSObjectArray_Get(nil_chk(stack_), 1 + ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(lastFrame))->ord_);
      }
      targetUpto++;
    }
    if (cmp == 0) {
      jint targetUptoMid = targetUpto;
      jint targetLimit2 = JavaLangMath_minWithInt_withInt_(target->length_, [term_ length]);
      while (targetUpto < targetLimit2) {
        cmp = ([term_ byteAtWithInt:targetUpto] & (jint) 0xFF) - (IOSByteArray_Get(nil_chk(target->bytes_), target->offset_ + targetUpto) & (jint) 0xFF);
        if (cmp != 0) {
          break;
        }
        targetUpto++;
      }
      if (cmp == 0) {
        cmp = [term_ length] - target->length_;
      }
      targetUpto = targetUptoMid;
    }
    if (cmp < 0) {
      JreStrongAssign(&currentFrame_, lastFrame);
    }
    else if (cmp > 0) {
      targetBeforeCurrentLength_ = 0;
      changed = true;
      JreStrongAssign(&currentFrame_, lastFrame);
      [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) rewind];
    }
    else {
      JreAssert(([term_ length] == target->length_), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:364 condition failed: assert term.length() == target.length;"));
      if (termExists_) {
        if (((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->maxIDVersion_ < minIDVersion) {
          return false;
        }
        [currentFrame_ decodeMetaData];
        if (((OrgApacheLuceneCodecsIdversionIDVersionTermState *) nil_chk(((OrgApacheLuceneCodecsIdversionIDVersionTermState *) cast_chk(((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->state_, [OrgApacheLuceneCodecsIdversionIDVersionTermState class]))))->idVersion_ < minIDVersion) {
          return false;
        }
        return true;
      }
      else {
      }
    }
  }
  else {
    targetBeforeCurrentLength_ = -1;
    arc = [fr_->index_ getFirstArcWithOrgApacheLuceneUtilFstFST_Arc:IOSObjectArray_Get(nil_chk(arcs_), 0)];
    JreAssert(([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc)) isFinal]), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:406 condition failed: assert arc.isFinal();"));
    JreAssert((arc->output_ != nil), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:407 condition failed: assert arc.output != null;"));
    output = ((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->output_);
    JreStrongAssign(&currentFrame_, staticFrame_);
    targetUpto = 0;
    JreStrongAssign(&currentFrame_, [self pushFrameWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstPairOutputs_Pair:[((OrgApacheLuceneUtilFstPairOutputs *) nil_chk(JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, FST_OUTPUTS))) addWithId:output withId:((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->nextFinalOutput_)] withInt:0]);
  }
  while (targetUpto < target->length_) {
    jint targetLabel = IOSByteArray_Get(nil_chk(target->bytes_), target->offset_ + targetUpto) & (jint) 0xFF;
    OrgApacheLuceneUtilFstFST_Arc *nextArc = [fr_->index_ findTargetArcWithInt:targetLabel withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_Arc:OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getArcWithInt_(self, 1 + targetUpto) withOrgApacheLuceneUtilFstFST_BytesReader:fstReader_];
    if (nextArc == nil) {
      validIndexPrefix_ = ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->prefix_;
      [currentFrame_ scanToFloorFrameWithOrgApacheLuceneUtilBytesRef:target];
      if (!((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->hasTerms_) {
        termExists_ = false;
        [term_ setByteAtWithInt:targetUpto withByte:(jbyte) targetLabel];
        [term_ setLengthWithInt:1 + targetUpto];
        return false;
      }
      if (currentFrame_->maxIDVersion_ < minIDVersion) {
        if (currentFrame_->fp_ != startFrameFP || changed) {
          termExists_ = false;
          [term_ setByteAtWithInt:targetUpto withByte:(jbyte) targetLabel];
          [term_ setLengthWithInt:1 + targetUpto];
          validIndexPrefix_ = JavaLangMath_minWithInt_withInt_(validIndexPrefix_, [term_ length]);
        }
        return false;
      }
      [currentFrame_ loadBlock];
      OrgApacheLuceneIndexTermsEnum_SeekStatus *result = [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) scanToTermWithOrgApacheLuceneUtilBytesRef:target withBoolean:true];
      if (result == JreLoadEnum(OrgApacheLuceneIndexTermsEnum_SeekStatus, FOUND)) {
        [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) decodeMetaData];
        if (((OrgApacheLuceneCodecsIdversionIDVersionTermState *) nil_chk(((OrgApacheLuceneCodecsIdversionIDVersionTermState *) cast_chk(((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->state_, [OrgApacheLuceneCodecsIdversionIDVersionTermState class]))))->idVersion_ < minIDVersion) {
          return false;
        }
        return true;
      }
      else {
        return false;
      }
    }
    else {
      arc = nextArc;
      if ([term_ byteAtWithInt:targetUpto] != (jbyte) targetLabel) {
        changed = true;
        [term_ setByteAtWithInt:targetUpto withByte:(jbyte) targetLabel];
        termExists_ = false;
      }
      JreAssert((arc->output_ != nil), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:520 condition failed: assert arc.output != null;"));
      if (arc->output_ != JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, NO_OUTPUT)) {
        output = [((OrgApacheLuceneUtilFstPairOutputs *) nil_chk(JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, FST_OUTPUTS))) addWithId:output withId:((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->output_)];
      }
      targetUpto++;
      if ([arc isFinal]) {
        JreStrongAssign(&currentFrame_, [self pushFrameWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstPairOutputs_Pair:[((OrgApacheLuceneUtilFstPairOutputs *) nil_chk(JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, FST_OUTPUTS))) addWithId:output withId:((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->nextFinalOutput_)] withInt:targetUpto]);
      }
    }
  }
  validIndexPrefix_ = ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->prefix_;
  [currentFrame_ scanToFloorFrameWithOrgApacheLuceneUtilBytesRef:target];
  if (!((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->hasTerms_) {
    termExists_ = false;
    [term_ setLengthWithInt:targetUpto];
    return false;
  }
  if (currentFrame_->maxIDVersion_ < minIDVersion) {
    termExists_ = false;
    [term_ setLengthWithInt:targetUpto];
    return false;
  }
  [currentFrame_ loadBlock];
  OrgApacheLuceneIndexTermsEnum_SeekStatus *result = [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) scanToTermWithOrgApacheLuceneUtilBytesRef:target withBoolean:true];
  if (result == JreLoadEnum(OrgApacheLuceneIndexTermsEnum_SeekStatus, FOUND)) {
    [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) decodeMetaData];
    if (((OrgApacheLuceneCodecsIdversionIDVersionTermState *) nil_chk(((OrgApacheLuceneCodecsIdversionIDVersionTermState *) cast_chk(((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->state_, [OrgApacheLuceneCodecsIdversionIDVersionTermState class]))))->idVersion_ < minIDVersion) {
      return false;
    }
    return true;
  }
  else {
    return false;
  }
}

- (OrgApacheLuceneIndexTermsEnum_SeekStatus *)seekCeilWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)target {
  if (((OrgApacheLuceneCodecsIdversionVersionFieldReader *) nil_chk(fr_))->index_ == nil) {
    @throw create_JavaLangIllegalStateException_initWithNSString_(@"terms index was not loaded");
  }
  [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) growWithInt:1 + ((OrgApacheLuceneUtilBytesRef *) nil_chk(target))->length_];
  JreAssert((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_clearEOF(self)), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:594 condition failed: assert clearEOF();"));
  OrgApacheLuceneUtilFstFST_Arc *arc;
  jint targetUpto;
  OrgApacheLuceneUtilFstPairOutputs_Pair *output;
  targetBeforeCurrentLength_ = ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->ord_;
  if (currentFrame_ != staticFrame_) {
    arc = IOSObjectArray_Get(nil_chk(arcs_), 0);
    JreAssert(([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc)) isFinal]), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:621 condition failed: assert arc.isFinal();"));
    output = ((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->output_);
    targetUpto = 0;
    OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *lastFrame = IOSObjectArray_Get(nil_chk(stack_), 0);
    JreAssert((validIndexPrefix_ <= [term_ length]), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:626 condition failed: assert validIndexPrefix <= term.length();"));
    jint targetLimit = JavaLangMath_minWithInt_withInt_(target->length_, validIndexPrefix_);
    jint cmp = 0;
    while (targetUpto < targetLimit) {
      cmp = ([term_ byteAtWithInt:targetUpto] & (jint) 0xFF) - (IOSByteArray_Get(nil_chk(target->bytes_), target->offset_ + targetUpto) & (jint) 0xFF);
      if (cmp != 0) {
        break;
      }
      arc = IOSObjectArray_Get(nil_chk(arcs_), 1 + targetUpto);
      JreAssert((((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->label_ == (IOSByteArray_Get(target->bytes_, target->offset_ + targetUpto) & (jint) 0xFF)), (JreStrcat("$C$C", @"arc.label=", (jchar) arc->label_, @" targetLabel=", (jchar) (IOSByteArray_Get(target->bytes_, target->offset_ + targetUpto) & (jint) 0xFF))));
      if (arc->output_ != JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, NO_OUTPUT)) {
        output = [((OrgApacheLuceneUtilFstPairOutputs *) nil_chk(JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, FST_OUTPUTS))) addWithId:output withId:((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->output_)];
      }
      if ([arc isFinal]) {
        lastFrame = IOSObjectArray_Get(nil_chk(stack_), 1 + ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(lastFrame))->ord_);
      }
      targetUpto++;
    }
    if (cmp == 0) {
      jint targetUptoMid = targetUpto;
      jint targetLimit2 = JavaLangMath_minWithInt_withInt_(target->length_, [term_ length]);
      while (targetUpto < targetLimit2) {
        cmp = ([term_ byteAtWithInt:targetUpto] & (jint) 0xFF) - (IOSByteArray_Get(nil_chk(target->bytes_), target->offset_ + targetUpto) & (jint) 0xFF);
        if (cmp != 0) {
          break;
        }
        targetUpto++;
      }
      if (cmp == 0) {
        cmp = [term_ length] - target->length_;
      }
      targetUpto = targetUptoMid;
    }
    if (cmp < 0) {
      JreStrongAssign(&currentFrame_, lastFrame);
    }
    else if (cmp > 0) {
      targetBeforeCurrentLength_ = 0;
      JreStrongAssign(&currentFrame_, lastFrame);
      [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) rewind];
    }
    else {
      JreAssert(([term_ length] == target->length_), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:705 condition failed: assert term.length() == target.length;"));
      if (termExists_) {
        return JreLoadEnum(OrgApacheLuceneIndexTermsEnum_SeekStatus, FOUND);
      }
      else {
      }
    }
  }
  else {
    targetBeforeCurrentLength_ = -1;
    arc = [fr_->index_ getFirstArcWithOrgApacheLuceneUtilFstFST_Arc:IOSObjectArray_Get(nil_chk(arcs_), 0)];
    JreAssert(([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc)) isFinal]), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:724 condition failed: assert arc.isFinal();"));
    JreAssert((arc->output_ != nil), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:725 condition failed: assert arc.output != null;"));
    output = ((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->output_);
    JreStrongAssign(&currentFrame_, staticFrame_);
    targetUpto = 0;
    JreStrongAssign(&currentFrame_, [self pushFrameWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstPairOutputs_Pair:[((OrgApacheLuceneUtilFstPairOutputs *) nil_chk(JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, FST_OUTPUTS))) addWithId:output withId:((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->nextFinalOutput_)] withInt:0]);
  }
  while (targetUpto < target->length_) {
    jint targetLabel = IOSByteArray_Get(nil_chk(target->bytes_), target->offset_ + targetUpto) & (jint) 0xFF;
    OrgApacheLuceneUtilFstFST_Arc *nextArc = [fr_->index_ findTargetArcWithInt:targetLabel withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_Arc:OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getArcWithInt_(self, 1 + targetUpto) withOrgApacheLuceneUtilFstFST_BytesReader:fstReader_];
    if (nextArc == nil) {
      validIndexPrefix_ = ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->prefix_;
      [currentFrame_ scanToFloorFrameWithOrgApacheLuceneUtilBytesRef:target];
      [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) loadBlock];
      OrgApacheLuceneIndexTermsEnum_SeekStatus *result = [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) scanToTermWithOrgApacheLuceneUtilBytesRef:target withBoolean:false];
      if (result == JreLoadEnum(OrgApacheLuceneIndexTermsEnum_SeekStatus, END)) {
        [term_ copyBytesWithOrgApacheLuceneUtilBytesRef:target];
        termExists_ = false;
        if ([self next] != nil) {
          return JreLoadEnum(OrgApacheLuceneIndexTermsEnum_SeekStatus, NOT_FOUND);
        }
        else {
          return JreLoadEnum(OrgApacheLuceneIndexTermsEnum_SeekStatus, END);
        }
      }
      else {
        return result;
      }
    }
    else {
      [term_ setByteAtWithInt:targetUpto withByte:(jbyte) targetLabel];
      arc = nextArc;
      JreAssert((arc->output_ != nil), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:792 condition failed: assert arc.output != null;"));
      if (arc->output_ != JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, NO_OUTPUT)) {
        output = [((OrgApacheLuceneUtilFstPairOutputs *) nil_chk(JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, FST_OUTPUTS))) addWithId:output withId:((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->output_)];
      }
      targetUpto++;
      if ([arc isFinal]) {
        JreStrongAssign(&currentFrame_, [self pushFrameWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstPairOutputs_Pair:[((OrgApacheLuceneUtilFstPairOutputs *) nil_chk(JreLoadStatic(OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter, FST_OUTPUTS))) addWithId:output withId:((OrgApacheLuceneUtilFstPairOutputs_Pair *) arc->nextFinalOutput_)] withInt:targetUpto]);
      }
    }
  }
  validIndexPrefix_ = ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->prefix_;
  [currentFrame_ scanToFloorFrameWithOrgApacheLuceneUtilBytesRef:target];
  [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) loadBlock];
  OrgApacheLuceneIndexTermsEnum_SeekStatus *result = [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) scanToTermWithOrgApacheLuceneUtilBytesRef:target withBoolean:false];
  if (result == JreLoadEnum(OrgApacheLuceneIndexTermsEnum_SeekStatus, END)) {
    [term_ copyBytesWithOrgApacheLuceneUtilBytesRef:target];
    termExists_ = false;
    if ([self next] != nil) {
      return JreLoadEnum(OrgApacheLuceneIndexTermsEnum_SeekStatus, NOT_FOUND);
    }
    else {
      return JreLoadEnum(OrgApacheLuceneIndexTermsEnum_SeekStatus, END);
    }
  }
  else {
    return result;
  }
}

- (void)printSeekStateWithJavaIoPrintStream:(JavaIoPrintStream *)outArg {
  if (currentFrame_ == staticFrame_) {
    [((JavaIoPrintStream *) nil_chk(outArg)) printlnWithNSString:@"  no prior seek"];
  }
  else {
    [((JavaIoPrintStream *) nil_chk(outArg)) printlnWithNSString:@"  prior seek state:"];
    __unused jint ord = 0;
    __unused jboolean isSeekFrame = true;
    while (true) {
      __unused OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *f = OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getFrameWithInt_(self, ord);
      JreAssert((f != nil), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:848 condition failed: assert f != null;"));
      __unused OrgApacheLuceneUtilBytesRef *prefix = create_OrgApacheLuceneUtilBytesRef_initWithByteArray_withInt_withInt_([((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) bytes], 0, ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(f))->prefix_);
      if (f->nextEnt_ == -1) {
        [outArg printlnWithNSString:JreStrcat("$$$I$J$$I$$$$Z$Z$J$Z$I$I", @"    frame ", (isSeekFrame ? @"(seek)" : @"(next)"), @" ord=", ord, @" fp=", f->fp_, (f->isFloor_ ? (JreStrcat("$JC", @" (fpOrig=", f->fpOrig_, ')')) : @""), @" prefixLen=", f->prefix_, @" prefix=", OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_brToStringWithOrgApacheLuceneUtilBytesRef_(prefix), (f->nextEnt_ == -1 ? @"" : (JreStrcat("$IC", @" (of ", f->entCount_, ')'))), @" hasTerms=", f->hasTerms_, @" isFloor=", f->isFloor_, @" code=", ((JreLShift64(f->fp_, OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAGS_NUM_BITS)) + (f->hasTerms_ ? OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAG_HAS_TERMS : 0) + (f->isFloor_ ? OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAG_IS_FLOOR : 0)), @" isLastInFloor=", f->isLastInFloor_, @" mdUpto=", f->metaDataUpto_, @" tbOrd=", [f getTermBlockOrd])];
      }
      else {
        [outArg printlnWithNSString:JreStrcat("$$$I$J$$I$$$I$$Z$Z$J$J$Z$I$I", @"    frame ", (isSeekFrame ? @"(seek, loaded)" : @"(next, loaded)"), @" ord=", ord, @" fp=", f->fp_, (f->isFloor_ ? (JreStrcat("$JC", @" (fpOrig=", f->fpOrig_, ')')) : @""), @" prefixLen=", f->prefix_, @" prefix=", OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_brToStringWithOrgApacheLuceneUtilBytesRef_(prefix), @" nextEnt=", f->nextEnt_, (f->nextEnt_ == -1 ? @"" : (JreStrcat("$IC", @" (of ", f->entCount_, ')'))), @" hasTerms=", f->hasTerms_, @" isFloor=", f->isFloor_, @" code=", ((JreLShift64(f->fp_, OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAGS_NUM_BITS)) + (f->hasTerms_ ? OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAG_HAS_TERMS : 0) + (f->isFloor_ ? OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAG_IS_FLOOR : 0)), @" lastSubFP=", f->lastSubFP_, @" isLastInFloor=", f->isLastInFloor_, @" mdUpto=", f->metaDataUpto_, @" tbOrd=", [f getTermBlockOrd])];
      }
      if (((OrgApacheLuceneCodecsIdversionVersionFieldReader *) nil_chk(fr_))->index_ != nil) {
        JreAssert((!isSeekFrame || f->arc_ != nil), (JreStrcat("$Z$@", @"isSeekFrame=", isSeekFrame, @" f.arc=", f->arc_)));
        if (f->prefix_ > 0 && isSeekFrame && ((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(f->arc_))->label_ != ([term_ byteAtWithInt:f->prefix_ - 1] & (jint) 0xFF)) {
          [outArg printlnWithNSString:JreStrcat("$C$C", @"      broken seek state: arc.label=", (jchar) ((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(f->arc_))->label_, @" vs term byte=", (jchar) ([term_ byteAtWithInt:f->prefix_ - 1] & (jint) 0xFF))];
          @throw create_JavaLangRuntimeException_initWithNSString_(@"seek state is broken");
        }
        __unused OrgApacheLuceneUtilFstPairOutputs_Pair *output = OrgApacheLuceneUtilFstUtil_getWithOrgApacheLuceneUtilFstFST_withOrgApacheLuceneUtilBytesRef_(fr_->index_, prefix);
        if (output == nil) {
          [outArg printlnWithNSString:@"      broken seek state: prefix is not final in index"];
          @throw create_JavaLangRuntimeException_initWithNSString_(@"seek state is broken");
        }
        else if (isSeekFrame && !f->isFloor_) {
          __unused OrgApacheLuceneStoreByteArrayDataInput *reader = create_OrgApacheLuceneStoreByteArrayDataInput_initWithByteArray_withInt_withInt_(((OrgApacheLuceneUtilBytesRef *) nil_chk(output->output1_))->bytes_, ((OrgApacheLuceneUtilBytesRef *) output->output1_)->offset_, ((OrgApacheLuceneUtilBytesRef *) output->output1_)->length_);
          __unused jlong codeOrig = [reader readVLong];
          __unused jlong code = (JreLShift64(f->fp_, OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAGS_NUM_BITS)) | (f->hasTerms_ ? OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAG_HAS_TERMS : 0) | (f->isFloor_ ? OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsWriter_OUTPUT_FLAG_IS_FLOOR : 0);
          if (codeOrig != code) {
            [outArg printlnWithNSString:JreStrcat("$J$J", @"      broken seek state: output code=", codeOrig, @" doesn't match frame code=", code)];
            @throw create_JavaLangRuntimeException_initWithNSString_(@"seek state is broken");
          }
        }
      }
      if (f == currentFrame_) {
        break;
      }
      if (f->prefix_ == validIndexPrefix_) {
        isSeekFrame = false;
      }
      ord++;
    }
  }
}

- (OrgApacheLuceneUtilBytesRef *)next {
  if (in_ == nil) {
    OrgApacheLuceneUtilFstFST_Arc *arc;
    if (((OrgApacheLuceneCodecsIdversionVersionFieldReader *) nil_chk(fr_))->index_ != nil) {
      arc = [fr_->index_ getFirstArcWithOrgApacheLuceneUtilFstFST_Arc:IOSObjectArray_Get(nil_chk(arcs_), 0)];
      JreAssert(([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc)) isFinal]), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:898 condition failed: assert arc.isFinal();"));
    }
    else {
      arc = nil;
    }
    JreStrongAssign(&currentFrame_, [self pushFrameWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstPairOutputs_Pair:fr_->rootCode_ withInt:0]);
    [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) loadBlock];
  }
  targetBeforeCurrentLength_ = ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->ord_;
  JreAssert((!eof_), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:908 condition failed: assert !eof;"));
  if (currentFrame_ == staticFrame_) {
    jboolean result = [self seekExactWithOrgApacheLuceneUtilBytesRef:[((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) get]];
    JreAssert((result), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:923 condition failed: assert result;"));
  }
  while (((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->nextEnt_ == currentFrame_->entCount_) {
    if (!currentFrame_->isLastInFloor_) {
      [currentFrame_ loadNextFloorBlock];
    }
    else {
      if (currentFrame_->ord_ == 0) {
        JreAssert((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_setEOF(self)), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:934 condition failed: assert setEOF();"));
        [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) clear];
        validIndexPrefix_ = 0;
        [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) rewind];
        termExists_ = false;
        return nil;
      }
      jlong lastFP = currentFrame_->fpOrig_;
      JreStrongAssign(&currentFrame_, IOSObjectArray_Get(nil_chk(stack_), currentFrame_->ord_ - 1));
      if (((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->nextEnt_ == -1 || currentFrame_->lastSubFP_ != lastFP) {
        [currentFrame_ scanToFloorFrameWithOrgApacheLuceneUtilBytesRef:[((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) get]];
        [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) loadBlock];
        [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) scanToSubBlockWithLong:lastFP];
      }
      validIndexPrefix_ = JavaLangMath_minWithInt_withInt_(validIndexPrefix_, ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->prefix_);
    }
  }
  while (true) {
    if ([((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) next]) {
      JreStrongAssign(&currentFrame_, [self pushFrameWithOrgApacheLuceneUtilFstFST_Arc:nil withLong:((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->lastSubFP_ withInt:[((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) length]]);
      ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->isFloor_ = false;
      [currentFrame_ loadBlock];
    }
    else {
      return [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) get];
    }
  }
}

- (OrgApacheLuceneUtilBytesRef *)term {
  JreAssert((!eof_), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:981 condition failed: assert !eof;"));
  return [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) get];
}

- (jint)docFreq {
  JreAssert((!eof_), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:987 condition failed: assert !eof;"));
  return 1;
}

- (jlong)totalTermFreq {
  JreAssert((!eof_), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:993 condition failed: assert !eof;"));
  return 1;
}

- (OrgApacheLuceneIndexPostingsEnum *)postingsWithOrgApacheLuceneIndexPostingsEnum:(OrgApacheLuceneIndexPostingsEnum *)reuse
                                                                           withInt:(jint)flags {
  JreAssert((!eof_), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:999 condition failed: assert !eof;"));
  [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) decodeMetaData];
  return [((OrgApacheLuceneCodecsPostingsReaderBase *) nil_chk(((OrgApacheLuceneCodecsIdversionVersionBlockTreeTermsReader *) nil_chk(((OrgApacheLuceneCodecsIdversionVersionFieldReader *) nil_chk(fr_))->parent_))->postingsReader_)) postingsWithOrgApacheLuceneIndexFieldInfo:fr_->fieldInfo_ withOrgApacheLuceneCodecsBlockTermState:((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->state_ withOrgApacheLuceneIndexPostingsEnum:reuse withInt:flags];
}

- (void)seekExactWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)target
               withOrgApacheLuceneIndexTermState:(OrgApacheLuceneIndexTermState *)otherState {
  JreAssert((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_clearEOF(self)), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:1015 condition failed: assert clearEOF();"));
  if ([((OrgApacheLuceneUtilBytesRef *) nil_chk(target)) compareToWithId:[((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(term_)) get]] != 0 || !termExists_) {
    JreAssert((otherState != nil && [otherState isKindOfClass:[OrgApacheLuceneCodecsBlockTermState class]]), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:1017 condition failed: assert otherState != null && otherState instanceof BlockTermState;"));
    JreStrongAssign(&currentFrame_, staticFrame_);
    [((OrgApacheLuceneCodecsBlockTermState *) nil_chk(((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->state_)) copyFromWithOrgApacheLuceneIndexTermState:otherState];
    [term_ copyBytesWithOrgApacheLuceneUtilBytesRef:target];
    ((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->metaDataUpto_ = [currentFrame_ getTermBlockOrd];
    JreAssert((((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->metaDataUpto_ > 0), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:1022 condition failed: assert currentFrame.metaDataUpto > 0;"));
    validIndexPrefix_ = 0;
  }
  else {
  }
}

- (OrgApacheLuceneIndexTermState *)termState {
  JreAssert((!eof_), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:1033 condition failed: assert !eof;"));
  [((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_)) decodeMetaData];
  OrgApacheLuceneIndexTermState *ts = [((OrgApacheLuceneCodecsBlockTermState *) nil_chk(((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(currentFrame_))->state_)) clone];
  return ts;
}

- (void)seekExactWithLong:(jlong)ord {
  @throw create_JavaLangUnsupportedOperationException_init();
}

- (jlong)ord {
  @throw create_JavaLangUnsupportedOperationException_init();
}

- (NSString *)description {
  return JreStrcat("$@C", @"IDVersionSegmentTermsEnum(seg=", ((OrgApacheLuceneCodecsIdversionVersionFieldReader *) nil_chk(fr_))->parent_, ')');
}

- (void)dealloc {
  RELEASE_(in_);
  RELEASE_(stack_);
  RELEASE_(staticFrame_);
  RELEASE_(currentFrame_);
  RELEASE_(fr_);
  RELEASE_(scratchReader_);
  RELEASE_(term_);
  RELEASE_(fstReader_);
  RELEASE_(arcs_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneCodecsIdversionVersionFieldReader:", "IDVersionSegmentTermsEnum", NULL, 0x0, "Ljava.io.IOException;", NULL },
    { "initIndexInput", NULL, "V", 0x0, NULL, NULL },
    { "getFrameWithInt:", "getFrame", "Lorg.apache.lucene.codecs.idversion.IDVersionSegmentTermsEnumFrame;", 0x2, "Ljava.io.IOException;", NULL },
    { "getArcWithInt:", "getArc", "Lorg.apache.lucene.util.fst.FST$Arc;", 0x2, NULL, "(I)Lorg/apache/lucene/util/fst/FST$Arc<Lorg/apache/lucene/util/fst/PairOutputs$Pair<Lorg/apache/lucene/util/BytesRef;Ljava/lang/Long;>;>;" },
    { "pushFrameWithOrgApacheLuceneUtilFstFST_Arc:withOrgApacheLuceneUtilFstPairOutputs_Pair:withInt:", "pushFrame", "Lorg.apache.lucene.codecs.idversion.IDVersionSegmentTermsEnumFrame;", 0x0, "Ljava.io.IOException;", "(Lorg/apache/lucene/util/fst/FST$Arc<Lorg/apache/lucene/util/fst/PairOutputs$Pair<Lorg/apache/lucene/util/BytesRef;Ljava/lang/Long;>;>;Lorg/apache/lucene/util/fst/PairOutputs$Pair<Lorg/apache/lucene/util/BytesRef;Ljava/lang/Long;>;I)Lorg/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnumFrame;" },
    { "pushFrameWithOrgApacheLuceneUtilFstFST_Arc:withLong:withInt:", "pushFrame", "Lorg.apache.lucene.codecs.idversion.IDVersionSegmentTermsEnumFrame;", 0x0, "Ljava.io.IOException;", "(Lorg/apache/lucene/util/fst/FST$Arc<Lorg/apache/lucene/util/fst/PairOutputs$Pair<Lorg/apache/lucene/util/BytesRef;Ljava/lang/Long;>;>;JI)Lorg/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnumFrame;" },
    { "clearEOF", NULL, "Z", 0x2, NULL, NULL },
    { "setEOF", NULL, "Z", 0x2, NULL, NULL },
    { "seekExactWithOrgApacheLuceneUtilBytesRef:", "seekExact", "Z", 0x1, "Ljava.io.IOException;", NULL },
    { "brToStringWithOrgApacheLuceneUtilBytesRef:", "brToString", "Ljava.lang.String;", 0x8, NULL, NULL },
    { "getVersion", NULL, "J", 0x1, NULL, NULL },
    { "seekExactWithOrgApacheLuceneUtilBytesRef:withLong:", "seekExact", "Z", 0x1, "Ljava.io.IOException;", NULL },
    { "seekCeilWithOrgApacheLuceneUtilBytesRef:", "seekCeil", "Lorg.apache.lucene.index.TermsEnum$SeekStatus;", 0x1, "Ljava.io.IOException;", NULL },
    { "printSeekStateWithJavaIoPrintStream:", "printSeekState", "V", 0x2, "Ljava.io.IOException;", NULL },
    { "next", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, "Ljava.io.IOException;", NULL },
    { "term", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, NULL, NULL },
    { "docFreq", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "totalTermFreq", NULL, "J", 0x1, "Ljava.io.IOException;", NULL },
    { "postingsWithOrgApacheLuceneIndexPostingsEnum:withInt:", "postings", "Lorg.apache.lucene.index.PostingsEnum;", 0x1, "Ljava.io.IOException;", NULL },
    { "seekExactWithOrgApacheLuceneUtilBytesRef:withOrgApacheLuceneIndexTermState:", "seekExact", "V", 0x1, NULL, NULL },
    { "termState", NULL, "Lorg.apache.lucene.index.TermState;", 0x1, "Ljava.io.IOException;", NULL },
    { "seekExactWithLong:", "seekExact", "V", 0x1, NULL, NULL },
    { "ord", NULL, "J", 0x1, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "in_", NULL, 0x0, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "stack_", NULL, 0x2, "[Lorg.apache.lucene.codecs.idversion.IDVersionSegmentTermsEnumFrame;", NULL, NULL, .constantValue.asLong = 0 },
    { "staticFrame_", NULL, 0x12, "Lorg.apache.lucene.codecs.idversion.IDVersionSegmentTermsEnumFrame;", NULL, NULL, .constantValue.asLong = 0 },
    { "currentFrame_", NULL, 0x0, "Lorg.apache.lucene.codecs.idversion.IDVersionSegmentTermsEnumFrame;", NULL, NULL, .constantValue.asLong = 0 },
    { "termExists_", NULL, 0x0, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "fr_", NULL, 0x10, "Lorg.apache.lucene.codecs.idversion.VersionFieldReader;", NULL, NULL, .constantValue.asLong = 0 },
    { "targetBeforeCurrentLength_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "scratchReader_", NULL, 0x12, "Lorg.apache.lucene.store.ByteArrayDataInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "validIndexPrefix_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "eof_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "term_", NULL, 0x10, "Lorg.apache.lucene.util.BytesRefBuilder;", NULL, NULL, .constantValue.asLong = 0 },
    { "fstReader_", NULL, 0x12, "Lorg.apache.lucene.util.fst.FST$BytesReader;", NULL, NULL, .constantValue.asLong = 0 },
    { "arcs_", NULL, 0x2, "[Lorg.apache.lucene.util.fst.FST$Arc;", NULL, "[Lorg/apache/lucene/util/fst/FST$Arc<Lorg/apache/lucene/util/fst/PairOutputs$Pair<Lorg/apache/lucene/util/BytesRef;Ljava/lang/Long;>;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum = { 2, "IDVersionSegmentTermsEnum", "org.apache.lucene.codecs.idversion", NULL, 0x11, 24, methods, 13, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum;
}

@end

void OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_initWithOrgApacheLuceneCodecsIdversionVersionFieldReader_(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *self, OrgApacheLuceneCodecsIdversionVersionFieldReader *fr) {
  OrgApacheLuceneIndexTermsEnum_init(self);
  JreStrongAssignAndConsume(&self->scratchReader_, new_OrgApacheLuceneStoreByteArrayDataInput_init());
  JreStrongAssignAndConsume(&self->term_, new_OrgApacheLuceneUtilBytesRefBuilder_init());
  JreStrongAssignAndConsume(&self->arcs_, [IOSObjectArray newArrayWithLength:1 type:OrgApacheLuceneUtilFstFST_Arc_class_()]);
  JreStrongAssign(&self->fr_, fr);
  JreStrongAssignAndConsume(&self->stack_, [IOSObjectArray newArrayWithLength:0 type:OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame_class_()]);
  JreStrongAssignAndConsume(&self->staticFrame_, new_OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame_initWithOrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_withInt_(self, -1));
  if (((OrgApacheLuceneCodecsIdversionVersionFieldReader *) nil_chk(fr))->index_ == nil) {
    JreStrongAssign(&self->fstReader_, nil);
  }
  else {
    JreStrongAssign(&self->fstReader_, [fr->index_ getBytesReader]);
  }
  for (jint arcIdx = 0; arcIdx < ((IOSObjectArray *) nil_chk(self->arcs_))->size_; arcIdx++) {
    IOSObjectArray_SetAndConsume(self->arcs_, arcIdx, new_OrgApacheLuceneUtilFstFST_Arc_init());
  }
  JreStrongAssign(&self->currentFrame_, self->staticFrame_);
  OrgApacheLuceneUtilFstFST_Arc *arc;
  if (fr->index_ != nil) {
    arc = [fr->index_ getFirstArcWithOrgApacheLuceneUtilFstFST_Arc:IOSObjectArray_Get(self->arcs_, 0)];
    JreAssert(([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc)) isFinal]), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:97 condition failed: assert arc.isFinal();"));
  }
  else {
    arc = nil;
  }
  JreStrongAssign(&self->currentFrame_, self->staticFrame_);
  self->validIndexPrefix_ = 0;
}

OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *new_OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_initWithOrgApacheLuceneCodecsIdversionVersionFieldReader_(OrgApacheLuceneCodecsIdversionVersionFieldReader *fr) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum, initWithOrgApacheLuceneCodecsIdversionVersionFieldReader_, fr)
}

OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *create_OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_initWithOrgApacheLuceneCodecsIdversionVersionFieldReader_(OrgApacheLuceneCodecsIdversionVersionFieldReader *fr) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum, initWithOrgApacheLuceneCodecsIdversionVersionFieldReader_, fr)
}

OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getFrameWithInt_(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *self, jint ord) {
  if (ord >= ((IOSObjectArray *) nil_chk(self->stack_))->size_) {
    IOSObjectArray *next = [IOSObjectArray arrayWithLength:OrgApacheLuceneUtilArrayUtil_oversizeWithInt_withInt_(1 + ord, JreLoadStatic(OrgApacheLuceneUtilRamUsageEstimator, NUM_BYTES_OBJECT_REF)) type:OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame_class_()];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(self->stack_, 0, next, 0, ((IOSObjectArray *) nil_chk(self->stack_))->size_);
    for (jint stackOrd = ((IOSObjectArray *) nil_chk(self->stack_))->size_; stackOrd < next->size_; stackOrd++) {
      IOSObjectArray_SetAndConsume(next, stackOrd, new_OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame_initWithOrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_withInt_(self, stackOrd));
    }
    JreStrongAssign(&self->stack_, next);
  }
  JreAssert((((OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnumFrame *) nil_chk(IOSObjectArray_Get(self->stack_, ord)))->ord_ == ord), (@"org/apache/lucene/codecs/idversion/IDVersionSegmentTermsEnum.java:130 condition failed: assert stack[ord].ord == ord;"));
  return IOSObjectArray_Get(self->stack_, ord);
}

OrgApacheLuceneUtilFstFST_Arc *OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_getArcWithInt_(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *self, jint ord) {
  if (ord >= ((IOSObjectArray *) nil_chk(self->arcs_))->size_) {
    IOSObjectArray *next = [IOSObjectArray arrayWithLength:OrgApacheLuceneUtilArrayUtil_oversizeWithInt_withInt_(1 + ord, JreLoadStatic(OrgApacheLuceneUtilRamUsageEstimator, NUM_BYTES_OBJECT_REF)) type:OrgApacheLuceneUtilFstFST_Arc_class_()];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(self->arcs_, 0, next, 0, ((IOSObjectArray *) nil_chk(self->arcs_))->size_);
    for (jint arcOrd = ((IOSObjectArray *) nil_chk(self->arcs_))->size_; arcOrd < next->size_; arcOrd++) {
      IOSObjectArray_SetAndConsume(next, arcOrd, new_OrgApacheLuceneUtilFstFST_Arc_init());
    }
    JreStrongAssign(&self->arcs_, next);
  }
  return IOSObjectArray_Get(self->arcs_, ord);
}

jboolean OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_clearEOF(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *self) {
  self->eof_ = false;
  return true;
}

jboolean OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_setEOF(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum *self) {
  self->eof_ = true;
  return true;
}

NSString *OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_brToStringWithOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneUtilBytesRef *b) {
  OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum_initialize();
  @try {
    return JreStrcat("$C@", [((OrgApacheLuceneUtilBytesRef *) nil_chk(b)) utf8ToString], ' ', b);
  }
  @catch (NSException *t) {
    return [b description];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsIdversionIDVersionSegmentTermsEnum)
