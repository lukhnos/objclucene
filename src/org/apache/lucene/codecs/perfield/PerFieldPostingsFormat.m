//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/codecs/perfield/PerFieldPostingsFormat.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/Integer.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/Collections.h"
#include "java/util/HashMap.h"
#include "java/util/IdentityHashMap.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "java/util/TreeMap.h"
#include "java/util/TreeSet.h"
#include "org/apache/lucene/codecs/FieldsConsumer.h"
#include "org/apache/lucene/codecs/FieldsProducer.h"
#include "org/apache/lucene/codecs/PostingsFormat.h"
#include "org/apache/lucene/codecs/perfield/PerFieldPostingsFormat.h"
#include "org/apache/lucene/index/FieldInfo.h"
#include "org/apache/lucene/index/FieldInfos.h"
#include "org/apache/lucene/index/Fields.h"
#include "org/apache/lucene/index/FilterLeafReader.h"
#include "org/apache/lucene/index/IndexOptions.h"
#include "org/apache/lucene/index/SegmentInfo.h"
#include "org/apache/lucene/index/SegmentReadState.h"
#include "org/apache/lucene/index/SegmentWriteState.h"
#include "org/apache/lucene/index/Terms.h"
#include "org/apache/lucene/util/Accountables.h"
#include "org/apache/lucene/util/IOUtils.h"
#include "org/apache/lucene/util/RamUsageEstimator.h"

#if __has_feature(objc_arc)
#error "org/apache/lucene/codecs/perfield/PerFieldPostingsFormat must not be compiled with ARC (-fobjc-arc)"
#endif

@interface OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter : OrgApacheLuceneCodecsFieldsConsumer {
 @public
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *this$0_;
  OrgApacheLuceneIndexSegmentWriteState *writeState_;
  id<JavaUtilList> toClose_;
}

- (instancetype)initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat:(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *)outer$
                                  withOrgApacheLuceneIndexSegmentWriteState:(OrgApacheLuceneIndexSegmentWriteState *)writeState;

- (void)writeWithOrgApacheLuceneIndexFields:(OrgApacheLuceneIndexFields *)fields;

- (void)close;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter)

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter, writeState_, OrgApacheLuceneIndexSegmentWriteState *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter, toClose_, id<JavaUtilList>)

__attribute__((unused)) static void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter *self, OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *outer$, OrgApacheLuceneIndexSegmentWriteState *writeState);

__attribute__((unused)) static OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter *new_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *outer$, OrgApacheLuceneIndexSegmentWriteState *writeState) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter *create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *outer$, OrgApacheLuceneIndexSegmentWriteState *writeState);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter)

@interface OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1 : OrgApacheLuceneIndexFilterLeafReader_FilterFields {
 @public
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *val$group_;
}

- (instancetype)initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup:(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *)capture$0
                                                         withOrgApacheLuceneIndexFields:(OrgApacheLuceneIndexFields *)inArg;

- (id<JavaUtilIterator>)iterator;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1)

__attribute__((unused)) static void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1 *self, OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *capture$0, OrgApacheLuceneIndexFields *inArg);

__attribute__((unused)) static OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1 *new_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *capture$0, OrgApacheLuceneIndexFields *inArg) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1 *create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *capture$0, OrgApacheLuceneIndexFields *inArg);

@interface OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader : OrgApacheLuceneCodecsFieldsProducer {
 @public
  id<JavaUtilMap> fields_;
  id<JavaUtilMap> formats_;
  NSString *segment_;
}

- (instancetype)initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader:(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *)other;

- (instancetype)initWithOrgApacheLuceneIndexSegmentReadState:(OrgApacheLuceneIndexSegmentReadState *)readState;

- (id<JavaUtilIterator>)iterator;

- (OrgApacheLuceneIndexTerms *)termsWithNSString:(NSString *)field;

- (jint)size;

- (void)close;

- (jlong)ramBytesUsed;

- (id<JavaUtilCollection>)getChildResources;

- (void)checkIntegrity;

- (OrgApacheLuceneCodecsFieldsProducer *)getMergeInstance;

- (NSString *)description;

@end

J2OBJC_STATIC_INIT(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader)

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader, fields_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader, formats_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader, segment_, NSString *)

inline jlong OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_get_BASE_RAM_BYTES_USED(void);
static jlong OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_BASE_RAM_BYTES_USED;
J2OBJC_STATIC_FIELD_PRIMITIVE_FINAL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader, BASE_RAM_BYTES_USED, jlong)

__attribute__((unused)) static void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *self, OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *other);

__attribute__((unused)) static OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *new_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *other) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *other);

__attribute__((unused)) static void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *self, OrgApacheLuceneIndexSegmentReadState *readState);

__attribute__((unused)) static OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *new_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneIndexSegmentReadState *readState) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneIndexSegmentReadState *readState);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader)

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat)

NSString *OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_NAME = @"PerField40";
NSString *OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_FORMAT_KEY;
NSString *OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_SUFFIX_KEY;

@implementation OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat

+ (NSString *)PER_FIELD_NAME {
  return OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_NAME;
}

+ (NSString *)PER_FIELD_FORMAT_KEY {
  return OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_FORMAT_KEY;
}

+ (NSString *)PER_FIELD_SUFFIX_KEY {
  return OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_SUFFIX_KEY;
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (NSString *)getSuffixWithNSString:(NSString *)formatName
                       withNSString:(NSString *)suffix {
  return OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_getSuffixWithNSString_withNSString_(formatName, suffix);
}

+ (NSString *)getFullSegmentSuffixWithNSString:(NSString *)fieldName
                                  withNSString:(NSString *)outerSegmentSuffix
                                  withNSString:(NSString *)segmentSuffix {
  return OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_getFullSegmentSuffixWithNSString_withNSString_withNSString_(fieldName, outerSegmentSuffix, segmentSuffix);
}

- (OrgApacheLuceneCodecsFieldsConsumer *)fieldsConsumerWithOrgApacheLuceneIndexSegmentWriteState:(OrgApacheLuceneIndexSegmentWriteState *)state {
  return create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_(self, state);
}

- (OrgApacheLuceneCodecsFieldsProducer *)fieldsProducerWithOrgApacheLuceneIndexSegmentReadState:(OrgApacheLuceneIndexSegmentReadState *)state {
  return create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneIndexSegmentReadState_(state);
}

- (OrgApacheLuceneCodecsPostingsFormat *)getPostingsFormatForFieldWithNSString:(NSString *)field {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x8, 0, 1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x8, 2, 3, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneCodecsFieldsConsumer;", 0x11, 4, 5, 6, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneCodecsFieldsProducer;", 0x11, 7, 8, 6, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneCodecsPostingsFormat;", 0x401, 9, 10, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(getSuffixWithNSString:withNSString:);
  methods[2].selector = @selector(getFullSegmentSuffixWithNSString:withNSString:withNSString:);
  methods[3].selector = @selector(fieldsConsumerWithOrgApacheLuceneIndexSegmentWriteState:);
  methods[4].selector = @selector(fieldsProducerWithOrgApacheLuceneIndexSegmentReadState:);
  methods[5].selector = @selector(getPostingsFormatForFieldWithNSString:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "PER_FIELD_NAME", "LNSString;", .constantValue.asLong = 0, 0x19, -1, 11, -1, -1 },
    { "PER_FIELD_FORMAT_KEY", "LNSString;", .constantValue.asLong = 0, 0x19, -1, 12, -1, -1 },
    { "PER_FIELD_SUFFIX_KEY", "LNSString;", .constantValue.asLong = 0, 0x19, -1, 13, -1, -1 },
  };
  static const void *ptrTable[] = { "getSuffix", "LNSString;LNSString;", "getFullSegmentSuffix", "LNSString;LNSString;LNSString;", "fieldsConsumer", "LOrgApacheLuceneIndexSegmentWriteState;", "LJavaIoIOException;", "fieldsProducer", "LOrgApacheLuceneIndexSegmentReadState;", "getPostingsFormatForField", "LNSString;", &OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_NAME, &OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_FORMAT_KEY, &OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_SUFFIX_KEY, "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup;LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter;LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader;" };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat = { "PerFieldPostingsFormat", "org.apache.lucene.codecs.perfield", ptrTable, methods, fields, 7, 0x401, 6, 3, -1, 14, -1, -1, -1 };
  return &_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat;
}

+ (void)initialize {
  if (self == [OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat class]) {
    JreStrongAssign(&OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_FORMAT_KEY, JreStrcat("$$", [OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_class_() getSimpleName], @".format"));
    JreStrongAssign(&OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_SUFFIX_KEY, JreStrcat("$$", [OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_class_() getSimpleName], @".suffix"));
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat)
  }
}

@end

void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_init(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *self) {
  OrgApacheLuceneCodecsPostingsFormat_initWithNSString_(self, OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_PER_FIELD_NAME);
}

NSString *OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_getSuffixWithNSString_withNSString_(NSString *formatName, NSString *suffix) {
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_initialize();
  return JreStrcat("$C$", formatName, '_', suffix);
}

NSString *OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_getFullSegmentSuffixWithNSString_withNSString_withNSString_(NSString *fieldName, NSString *outerSegmentSuffix, NSString *segmentSuffix) {
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_initialize();
  if ([((NSString *) nil_chk(outerSegmentSuffix)) java_length] == 0) {
    return segmentSuffix;
  }
  else {
    @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$$$", @"cannot embed PerFieldPostingsFormat inside itself (field \"", fieldName, @"\" returned PerFieldPostingsFormat)"));
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat)

@implementation OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)dealloc {
  RELEASE_(fields_);
  RELEASE_(state_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "fields_", "LJavaUtilSet;", .constantValue.asLong = 0, 0x10, -1, -1, 0, -1 },
    { "suffix_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "state_", "LOrgApacheLuceneIndexSegmentWriteState;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "Ljava/util/Set<Ljava/lang/String;>;", "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat;" };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup = { "FieldsGroup", "org.apache.lucene.codecs.perfield", ptrTable, methods, fields, 7, 0x8, 1, 3, 1, -1, -1, -1, -1 };
  return &_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup;
}

@end

void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_init(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *self) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->fields_, new_JavaUtilTreeSet_init());
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *new_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_init() {
  J2OBJC_NEW_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup, init)
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_init() {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup)

@implementation OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter

- (instancetype)initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat:(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *)outer$
                                  withOrgApacheLuceneIndexSegmentWriteState:(OrgApacheLuceneIndexSegmentWriteState *)writeState {
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_(self, outer$, writeState);
  return self;
}

- (void)writeWithOrgApacheLuceneIndexFields:(OrgApacheLuceneIndexFields *)fields {
  id<JavaUtilMap> formatToGroups = create_JavaUtilHashMap_init();
  id<JavaUtilMap> suffixes = create_JavaUtilHashMap_init();
  for (NSString * __strong field in nil_chk(fields)) {
    OrgApacheLuceneIndexFieldInfo *fieldInfo = JreRetainedLocalValue([((OrgApacheLuceneIndexFieldInfos *) nil_chk(((OrgApacheLuceneIndexSegmentWriteState *) nil_chk(writeState_))->fieldInfos_)) fieldInfoWithNSString:field]);
    OrgApacheLuceneCodecsPostingsFormat *format = [this$0_ getPostingsFormatForFieldWithNSString:field];
    if (format == nil) {
      @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$$C", @"invalid null PostingsFormat for field=\"", field, '"'));
    }
    NSString *formatName = JreRetainedLocalValue([format getName]);
    OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *group = JreRetainedLocalValue([formatToGroups getWithId:format]);
    if (group == nil) {
      JavaLangInteger *suffix = JreRetainedLocalValue([suffixes getWithId:formatName]);
      if (suffix == nil) {
        suffix = JavaLangInteger_valueOfWithInt_(0);
      }
      else {
        suffix = JavaLangInteger_valueOfWithInt_([suffix intValue] + 1);
      }
      [suffixes putWithId:formatName withId:suffix];
      NSString *segmentSuffix = OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_getFullSegmentSuffixWithNSString_withNSString_withNSString_(field, writeState_->segmentSuffix_, OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_getSuffixWithNSString_withNSString_(formatName, JavaLangInteger_toStringWithInt_([suffix intValue])));
      group = create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_init();
      JreStrongAssignAndConsume(&group->state_, new_OrgApacheLuceneIndexSegmentWriteState_initWithOrgApacheLuceneIndexSegmentWriteState_withNSString_(writeState_, segmentSuffix));
      group->suffix_ = [suffix intValue];
      [formatToGroups putWithId:format withId:group];
    }
    else {
      if (![suffixes containsKeyWithId:formatName]) {
        @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$$$I", @"no suffix for format name: ", formatName, @", expected: ", group->suffix_));
      }
    }
    [((id<JavaUtilSet>) nil_chk(group->fields_)) addWithId:field];
    NSString *previousValue = JreRetainedLocalValue([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo)) putAttributeWithNSString:JreLoadStatic(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat, PER_FIELD_FORMAT_KEY) withNSString:formatName]);
    if (previousValue != nil) {
      @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$$$$$$$$", @"found existing value for ", JreLoadStatic(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat, PER_FIELD_FORMAT_KEY), @", field=", fieldInfo->name_, @", old=", previousValue, @", new=", formatName));
    }
    previousValue = [fieldInfo putAttributeWithNSString:JreLoadStatic(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat, PER_FIELD_SUFFIX_KEY) withNSString:JavaLangInteger_toStringWithInt_(group->suffix_)];
    if (previousValue != nil) {
      @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$$$$$$$I", @"found existing value for ", JreLoadStatic(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat, PER_FIELD_SUFFIX_KEY), @", field=", fieldInfo->name_, @", old=", previousValue, @", new=", group->suffix_));
    }
  }
  jboolean success = false;
  @try {
    for (id<JavaUtilMap_Entry> __strong ent in nil_chk([formatToGroups entrySet])) {
      OrgApacheLuceneCodecsPostingsFormat *format = JreRetainedLocalValue([((id<JavaUtilMap_Entry>) nil_chk(ent)) getKey]);
      OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *group = [ent getValue];
      OrgApacheLuceneIndexFields *maskedFields = create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_(group, fields);
      OrgApacheLuceneCodecsFieldsConsumer *consumer = JreRetainedLocalValue([((OrgApacheLuceneCodecsPostingsFormat *) nil_chk(format)) fieldsConsumerWithOrgApacheLuceneIndexSegmentWriteState:((OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *) nil_chk(group))->state_]);
      [((id<JavaUtilList>) nil_chk(toClose_)) addWithId:consumer];
      [((OrgApacheLuceneCodecsFieldsConsumer *) nil_chk(consumer)) writeWithOrgApacheLuceneIndexFields:maskedFields];
    }
    success = true;
  }
  @finally {
    if (success == false) {
      OrgApacheLuceneUtilIOUtils_closeWhileHandlingExceptionWithJavaLangIterable_(toClose_);
    }
  }
}

- (void)close {
  OrgApacheLuceneUtilIOUtils_closeWithJavaLangIterable_(toClose_);
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(writeState_);
  RELEASE_(toClose_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "V", 0x1, 1, 2, 3, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, 3, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat:withOrgApacheLuceneIndexSegmentWriteState:);
  methods[1].selector = @selector(writeWithOrgApacheLuceneIndexFields:);
  methods[2].selector = @selector(close);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "writeState_", "LOrgApacheLuceneIndexSegmentWriteState;", .constantValue.asLong = 0, 0x10, -1, -1, -1, -1 },
    { "toClose_", "LJavaUtilList;", .constantValue.asLong = 0, 0x10, -1, -1, 4, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat;LOrgApacheLuceneIndexSegmentWriteState;", "write", "LOrgApacheLuceneIndexFields;", "LJavaIoIOException;", "Ljava/util/List<Ljava/io/Closeable;>;", "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat;" };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter = { "FieldsWriter", "org.apache.lucene.codecs.perfield", ptrTable, methods, fields, 7, 0x2, 3, 3, 5, -1, -1, -1, -1 };
  return &_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter;
}

@end

void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter *self, OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *outer$, OrgApacheLuceneIndexSegmentWriteState *writeState) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneCodecsFieldsConsumer_init(self);
  JreStrongAssignAndConsume(&self->toClose_, new_JavaUtilArrayList_init());
  JreStrongAssign(&self->writeState_, writeState);
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter *new_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *outer$, OrgApacheLuceneIndexSegmentWriteState *writeState) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter, initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_, outer$, writeState)
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter *create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat *outer$, OrgApacheLuceneIndexSegmentWriteState *writeState) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter, initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_withOrgApacheLuceneIndexSegmentWriteState_, outer$, writeState)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter)

@implementation OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1

- (instancetype)initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup:(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *)capture$0
                                                         withOrgApacheLuceneIndexFields:(OrgApacheLuceneIndexFields *)inArg {
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_(self, capture$0, inArg);
  return self;
}

- (id<JavaUtilIterator>)iterator {
  return JreRetainedLocalValue([((id<JavaUtilSet>) nil_chk(((OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *) nil_chk(val$group_))->fields_)) iterator]);
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf);
}

- (void)dealloc {
  RELEASE_(val$group_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "LJavaUtilIterator;", 0x1, -1, -1, -1, 1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup:withOrgApacheLuceneIndexFields:);
  methods[1].selector = @selector(iterator);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "val$group_", "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup;LOrgApacheLuceneIndexFields;", "()Ljava/util/Iterator<Ljava/lang/String;>;", "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter;", "writeWithOrgApacheLuceneIndexFields:" };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1 = { "", "org.apache.lucene.codecs.perfield", ptrTable, methods, fields, 7, 0x8010, 2, 1, 2, -1, 3, -1, -1 };
  return &_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1;
}

@end

void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1 *self, OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *capture$0, OrgApacheLuceneIndexFields *inArg) {
  JreStrongAssign(&self->val$group_, capture$0);
  OrgApacheLuceneIndexFilterLeafReader_FilterFields_initWithOrgApacheLuceneIndexFields_(self, inArg);
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1 *new_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *capture$0, OrgApacheLuceneIndexFields *inArg) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1, initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_, capture$0, inArg)
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1 *create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup *capture$0, OrgApacheLuceneIndexFields *inArg) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsWriter_1, initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsGroup_withOrgApacheLuceneIndexFields_, capture$0, inArg)
}

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader)

@implementation OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader

- (instancetype)initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader:(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *)other {
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_(self, other);
  return self;
}

- (instancetype)initWithOrgApacheLuceneIndexSegmentReadState:(OrgApacheLuceneIndexSegmentReadState *)readState {
  OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneIndexSegmentReadState_(self, readState);
  return self;
}

- (id<JavaUtilIterator>)iterator {
  return [((id<JavaUtilSet>) nil_chk(JavaUtilCollections_unmodifiableSetWithJavaUtilSet_([((id<JavaUtilMap>) nil_chk(fields_)) keySet]))) iterator];
}

- (OrgApacheLuceneIndexTerms *)termsWithNSString:(NSString *)field {
  OrgApacheLuceneCodecsFieldsProducer *fieldsProducer = JreRetainedLocalValue([((id<JavaUtilMap>) nil_chk(fields_)) getWithId:field]);
  return fieldsProducer == nil ? nil : [fieldsProducer termsWithNSString:field];
}

- (jint)size {
  return [((id<JavaUtilMap>) nil_chk(fields_)) size];
}

- (void)close {
  OrgApacheLuceneUtilIOUtils_closeWithJavaLangIterable_([((id<JavaUtilMap>) nil_chk(formats_)) values]);
}

- (jlong)ramBytesUsed {
  jlong ramBytesUsed = OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_BASE_RAM_BYTES_USED;
  ramBytesUsed += [((id<JavaUtilMap>) nil_chk(fields_)) size] * 2LL * JreLoadStatic(OrgApacheLuceneUtilRamUsageEstimator, NUM_BYTES_OBJECT_REF);
  ramBytesUsed += [((id<JavaUtilMap>) nil_chk(formats_)) size] * 2LL * JreLoadStatic(OrgApacheLuceneUtilRamUsageEstimator, NUM_BYTES_OBJECT_REF);
  for (id<JavaUtilMap_Entry> __strong entry_ in nil_chk([formats_ entrySet])) {
    ramBytesUsed += [((OrgApacheLuceneCodecsFieldsProducer *) nil_chk([((id<JavaUtilMap_Entry>) nil_chk(entry_)) getValue])) ramBytesUsed];
  }
  return ramBytesUsed;
}

- (id<JavaUtilCollection>)getChildResources {
  return OrgApacheLuceneUtilAccountables_namedAccountablesWithNSString_withJavaUtilMap_(@"format", formats_);
}

- (void)checkIntegrity {
  for (OrgApacheLuceneCodecsFieldsProducer * __strong producer in nil_chk([((id<JavaUtilMap>) nil_chk(formats_)) values])) {
    [((OrgApacheLuceneCodecsFieldsProducer *) nil_chk(producer)) checkIntegrity];
  }
}

- (OrgApacheLuceneCodecsFieldsProducer *)getMergeInstance {
  return create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_(self);
}

- (NSString *)description {
  return JreStrcat("$$$IC", @"PerFieldPostings(segment=", segment_, @" formats=", [((id<JavaUtilMap>) nil_chk(formats_)) size], ')');
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf);
}

- (void)dealloc {
  RELEASE_(fields_);
  RELEASE_(formats_);
  RELEASE_(segment_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, 1, -1, -1, -1 },
    { NULL, NULL, 0x1, -1, 2, 1, -1, -1, -1 },
    { NULL, "LJavaUtilIterator;", 0x1, -1, -1, -1, 3, -1, -1 },
    { NULL, "LOrgApacheLuceneIndexTerms;", 0x1, 4, 5, 1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, 1, -1, -1, -1 },
    { NULL, "J", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LJavaUtilCollection;", 0x1, -1, -1, -1, 6, -1, -1 },
    { NULL, "V", 0x1, -1, -1, 1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneCodecsFieldsProducer;", 0x1, -1, -1, 1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, 7, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader:);
  methods[1].selector = @selector(initWithOrgApacheLuceneIndexSegmentReadState:);
  methods[2].selector = @selector(iterator);
  methods[3].selector = @selector(termsWithNSString:);
  methods[4].selector = @selector(size);
  methods[5].selector = @selector(close);
  methods[6].selector = @selector(ramBytesUsed);
  methods[7].selector = @selector(getChildResources);
  methods[8].selector = @selector(checkIntegrity);
  methods[9].selector = @selector(getMergeInstance);
  methods[10].selector = @selector(description);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "BASE_RAM_BYTES_USED", "J", .constantValue.asLong = 0, 0x1a, -1, 8, -1, -1 },
    { "fields_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 9, -1 },
    { "formats_", "LJavaUtilMap;", .constantValue.asLong = 0, 0x12, -1, -1, 9, -1 },
    { "segment_", "LNSString;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader;", "LJavaIoIOException;", "LOrgApacheLuceneIndexSegmentReadState;", "()Ljava/util/Iterator<Ljava/lang/String;>;", "terms", "LNSString;", "()Ljava/util/Collection<Lorg/apache/lucene/util/Accountable;>;", "toString", &OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_BASE_RAM_BYTES_USED, "Ljava/util/Map<Ljava/lang/String;Lorg/apache/lucene/codecs/FieldsProducer;>;", "LOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat;" };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader = { "FieldsReader", "org.apache.lucene.codecs.perfield", ptrTable, methods, fields, 7, 0xa, 11, 4, 10, -1, -1, -1, -1 };
  return &_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader;
}

+ (void)initialize {
  if (self == [OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader class]) {
    OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_BASE_RAM_BYTES_USED = OrgApacheLuceneUtilRamUsageEstimator_shallowSizeOfInstanceWithIOSClass_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_class_());
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader)
  }
}

@end

void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *self, OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *other) {
  OrgApacheLuceneCodecsFieldsProducer_init(self);
  JreStrongAssignAndConsume(&self->fields_, new_JavaUtilTreeMap_init());
  JreStrongAssignAndConsume(&self->formats_, new_JavaUtilHashMap_init());
  id<JavaUtilMap> oldToNew = create_JavaUtilIdentityHashMap_init();
  for (id<JavaUtilMap_Entry> __strong ent in nil_chk([((OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *) nil_chk(other))->formats_ entrySet])) {
    OrgApacheLuceneCodecsFieldsProducer *values = JreRetainedLocalValue([((OrgApacheLuceneCodecsFieldsProducer *) nil_chk([((id<JavaUtilMap_Entry>) nil_chk(ent)) getValue])) getMergeInstance]);
    [self->formats_ putWithId:[ent getKey] withId:values];
    [oldToNew putWithId:[ent getValue] withId:values];
  }
  for (id<JavaUtilMap_Entry> __strong ent in nil_chk([other->fields_ entrySet])) {
    OrgApacheLuceneCodecsFieldsProducer *producer = JreRetainedLocalValue([oldToNew getWithId:[((id<JavaUtilMap_Entry>) nil_chk(ent)) getValue]]);
    JreAssert(producer != nil, @"org/apache/lucene/codecs/perfield/PerFieldPostingsFormat.java:235 condition failed: assert producer != null;");
    [self->fields_ putWithId:[ent getKey] withId:producer];
  }
  JreStrongAssign(&self->segment_, other->segment_);
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *new_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *other) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader, initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_, other)
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *other) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader, initWithOrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_, other)
}

void OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *self, OrgApacheLuceneIndexSegmentReadState *readState) {
  OrgApacheLuceneCodecsFieldsProducer_init(self);
  JreStrongAssignAndConsume(&self->fields_, new_JavaUtilTreeMap_init());
  JreStrongAssignAndConsume(&self->formats_, new_JavaUtilHashMap_init());
  jboolean success = false;
  @try {
    for (OrgApacheLuceneIndexFieldInfo * __strong fi in nil_chk(((OrgApacheLuceneIndexSegmentReadState *) nil_chk(readState))->fieldInfos_)) {
      if ([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fi)) getIndexOptions] != JreLoadEnum(OrgApacheLuceneIndexIndexOptions, NONE)) {
        NSString *fieldName = fi->name_;
        NSString *formatName = [fi getAttributeWithNSString:JreLoadStatic(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat, PER_FIELD_FORMAT_KEY)];
        if (formatName != nil) {
          NSString *suffix = [fi getAttributeWithNSString:JreLoadStatic(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat, PER_FIELD_SUFFIX_KEY)];
          if (suffix == nil) {
            @throw create_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$$$$", @"missing attribute: ", JreLoadStatic(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat, PER_FIELD_SUFFIX_KEY), @" for field: ", fieldName));
          }
          OrgApacheLuceneCodecsPostingsFormat *format = OrgApacheLuceneCodecsPostingsFormat_forNameWithNSString_(formatName);
          NSString *segmentSuffix = OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_getSuffixWithNSString_withNSString_(formatName, suffix);
          if (![self->formats_ containsKeyWithId:segmentSuffix]) {
            [self->formats_ putWithId:segmentSuffix withId:[((OrgApacheLuceneCodecsPostingsFormat *) nil_chk(format)) fieldsProducerWithOrgApacheLuceneIndexSegmentReadState:create_OrgApacheLuceneIndexSegmentReadState_initWithOrgApacheLuceneIndexSegmentReadState_withNSString_(readState, segmentSuffix)]];
          }
          [self->fields_ putWithId:fieldName withId:[self->formats_ getWithId:segmentSuffix]];
        }
      }
    }
    success = true;
  }
  @finally {
    if (!success) {
      OrgApacheLuceneUtilIOUtils_closeWhileHandlingExceptionWithJavaLangIterable_([self->formats_ values]);
    }
  }
  JreStrongAssign(&self->segment_, ((OrgApacheLuceneIndexSegmentInfo *) nil_chk(readState->segmentInfo_))->name_);
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *new_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneIndexSegmentReadState *readState) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader, initWithOrgApacheLuceneIndexSegmentReadState_, readState)
}

OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader *create_OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneIndexSegmentReadState *readState) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader, initWithOrgApacheLuceneIndexSegmentReadState_, readState)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsPerfieldPerFieldPostingsFormat_FieldsReader)
