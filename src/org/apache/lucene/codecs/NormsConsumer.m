//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/codecs/NormsConsumer.java
//

#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Iterable.h"
#include "java/lang/Long.h"
#include "java/lang/UnsupportedOperationException.h"
#include "java/util/ArrayList.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/NoSuchElementException.h"
#include "java/util/Spliterator.h"
#include "java/util/function/Consumer.h"
#include "org/apache/lucene/codecs/NormsConsumer.h"
#include "org/apache/lucene/codecs/NormsProducer.h"
#include "org/apache/lucene/index/DocValues.h"
#include "org/apache/lucene/index/FieldInfo.h"
#include "org/apache/lucene/index/FieldInfos.h"
#include "org/apache/lucene/index/MergeState.h"
#include "org/apache/lucene/index/NumericDocValues.h"
#include "org/apache/lucene/util/Bits.h"

#if __has_feature(objc_arc)
#error "org/apache/lucene/codecs/NormsConsumer must not be compiled with ARC (-fobjc-arc)"
#endif

#pragma clang diagnostic ignored "-Wprotocol"

@interface OrgApacheLuceneCodecsNormsConsumer_1 : NSObject < JavaLangIterable > {
 @public
  id<JavaUtilList> val$toMerge_;
  OrgApacheLuceneIndexMergeState *val$mergeState_;
}

- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)capture$0
  withOrgApacheLuceneIndexMergeState:(OrgApacheLuceneIndexMergeState *)capture$1;

- (id<JavaUtilIterator>)iterator;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneCodecsNormsConsumer_1)

__attribute__((unused)) static void OrgApacheLuceneCodecsNormsConsumer_1_initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_(OrgApacheLuceneCodecsNormsConsumer_1 *self, id<JavaUtilList> capture$0, OrgApacheLuceneIndexMergeState *capture$1);

__attribute__((unused)) static OrgApacheLuceneCodecsNormsConsumer_1 *new_OrgApacheLuceneCodecsNormsConsumer_1_initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_(id<JavaUtilList> capture$0, OrgApacheLuceneIndexMergeState *capture$1) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneCodecsNormsConsumer_1 *create_OrgApacheLuceneCodecsNormsConsumer_1_initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_(id<JavaUtilList> capture$0, OrgApacheLuceneIndexMergeState *capture$1);

@interface OrgApacheLuceneCodecsNormsConsumer_1_1 : NSObject < JavaUtilIterator > {
 @public
  OrgApacheLuceneCodecsNormsConsumer_1 *this$0_;
  jint readerUpto_;
  jint docIDUpto_;
  jlong nextValue_;
  jint maxDoc_;
  OrgApacheLuceneIndexNumericDocValues *currentValues_;
  id<OrgApacheLuceneUtilBits> currentLiveDocs_;
  jboolean nextIsSet_;
}

- (instancetype)initWithOrgApacheLuceneCodecsNormsConsumer_1:(OrgApacheLuceneCodecsNormsConsumer_1 *)outer$;

- (jboolean)hasNext;

- (void)remove;

- (NSNumber *)next;

- (jboolean)setNext;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneCodecsNormsConsumer_1_1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsNormsConsumer_1_1, currentValues_, OrgApacheLuceneIndexNumericDocValues *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsNormsConsumer_1_1, currentLiveDocs_, id<OrgApacheLuceneUtilBits>)

__attribute__((unused)) static void OrgApacheLuceneCodecsNormsConsumer_1_1_initWithOrgApacheLuceneCodecsNormsConsumer_1_(OrgApacheLuceneCodecsNormsConsumer_1_1 *self, OrgApacheLuceneCodecsNormsConsumer_1 *outer$);

__attribute__((unused)) static OrgApacheLuceneCodecsNormsConsumer_1_1 *new_OrgApacheLuceneCodecsNormsConsumer_1_1_initWithOrgApacheLuceneCodecsNormsConsumer_1_(OrgApacheLuceneCodecsNormsConsumer_1 *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneCodecsNormsConsumer_1_1 *create_OrgApacheLuceneCodecsNormsConsumer_1_1_initWithOrgApacheLuceneCodecsNormsConsumer_1_(OrgApacheLuceneCodecsNormsConsumer_1 *outer$);

__attribute__((unused)) static jboolean OrgApacheLuceneCodecsNormsConsumer_1_1_setNext(OrgApacheLuceneCodecsNormsConsumer_1_1 *self);

@implementation OrgApacheLuceneCodecsNormsConsumer

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgApacheLuceneCodecsNormsConsumer_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)addNormsFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)field
                                  withJavaLangIterable:(id<JavaLangIterable>)values {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)mergeWithOrgApacheLuceneIndexMergeState:(OrgApacheLuceneIndexMergeState *)mergeState {
  {
    IOSObjectArray *a__ = ((OrgApacheLuceneIndexMergeState *) nil_chk(mergeState))->normsProducers_;
    OrgApacheLuceneCodecsNormsProducer * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    OrgApacheLuceneCodecsNormsProducer * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      OrgApacheLuceneCodecsNormsProducer *normsProducer = *b__++;
      if (normsProducer != nil) {
        [normsProducer checkIntegrity];
      }
    }
  }
  for (OrgApacheLuceneIndexFieldInfo * __strong mergeFieldInfo in nil_chk(mergeState->mergeFieldInfos_)) {
    if ([((OrgApacheLuceneIndexFieldInfo *) nil_chk(mergeFieldInfo)) hasNorms]) {
      id<JavaUtilList> toMerge = create_JavaUtilArrayList_init();
      for (jint i = 0; i < ((IOSObjectArray *) nil_chk(mergeState->normsProducers_))->size_; i++) {
        OrgApacheLuceneCodecsNormsProducer *normsProducer = IOSObjectArray_Get(mergeState->normsProducers_, i);
        OrgApacheLuceneIndexNumericDocValues *norms = nil;
        if (normsProducer != nil) {
          OrgApacheLuceneIndexFieldInfo *fieldInfo = JreRetainedLocalValue([((OrgApacheLuceneIndexFieldInfos *) nil_chk(IOSObjectArray_Get(nil_chk(mergeState->fieldInfos_), i))) fieldInfoWithNSString:mergeFieldInfo->name_]);
          if (fieldInfo != nil && [fieldInfo hasNorms]) {
            norms = [normsProducer getNormsWithOrgApacheLuceneIndexFieldInfo:fieldInfo];
          }
        }
        if (norms == nil) {
          norms = OrgApacheLuceneIndexDocValues_emptyNumeric();
        }
        [toMerge addWithId:norms];
      }
      [self mergeNormsFieldWithOrgApacheLuceneIndexFieldInfo:mergeFieldInfo withOrgApacheLuceneIndexMergeState:mergeState withJavaUtilList:toMerge];
    }
  }
}

- (void)mergeNormsFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo
                      withOrgApacheLuceneIndexMergeState:(OrgApacheLuceneIndexMergeState *)mergeState
                                        withJavaUtilList:(id<JavaUtilList>)toMerge {
  [self addNormsFieldWithOrgApacheLuceneIndexFieldInfo:fieldInfo withJavaLangIterable:create_OrgApacheLuceneCodecsNormsConsumer_1_initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_(toMerge, mergeState)];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x4, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x401, 0, 1, 2, 3, -1, -1 },
    { NULL, "V", 0x1, 4, 5, 2, -1, -1, -1 },
    { NULL, "V", 0x1, 6, 7, 2, 8, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(addNormsFieldWithOrgApacheLuceneIndexFieldInfo:withJavaLangIterable:);
  methods[2].selector = @selector(mergeWithOrgApacheLuceneIndexMergeState:);
  methods[3].selector = @selector(mergeNormsFieldWithOrgApacheLuceneIndexFieldInfo:withOrgApacheLuceneIndexMergeState:withJavaUtilList:);
  #pragma clang diagnostic pop
  static const void *ptrTable[] = { "addNormsField", "LOrgApacheLuceneIndexFieldInfo;LJavaLangIterable;", "LJavaIoIOException;", "(Lorg/apache/lucene/index/FieldInfo;Ljava/lang/Iterable<Ljava/lang/Number;>;)V", "merge", "LOrgApacheLuceneIndexMergeState;", "mergeNormsField", "LOrgApacheLuceneIndexFieldInfo;LOrgApacheLuceneIndexMergeState;LJavaUtilList;", "(Lorg/apache/lucene/index/FieldInfo;Lorg/apache/lucene/index/MergeState;Ljava/util/List<Lorg/apache/lucene/index/NumericDocValues;>;)V" };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsNormsConsumer = { "NormsConsumer", "org.apache.lucene.codecs", ptrTable, methods, NULL, 7, 0x401, 4, 0, -1, -1, -1, -1, -1 };
  return &_OrgApacheLuceneCodecsNormsConsumer;
}

@end

void OrgApacheLuceneCodecsNormsConsumer_init(OrgApacheLuceneCodecsNormsConsumer *self) {
  NSObject_init(self);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsNormsConsumer)

@implementation OrgApacheLuceneCodecsNormsConsumer_1

- (instancetype)initWithJavaUtilList:(id<JavaUtilList>)capture$0
  withOrgApacheLuceneIndexMergeState:(OrgApacheLuceneIndexMergeState *)capture$1 {
  OrgApacheLuceneCodecsNormsConsumer_1_initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_(self, capture$0, capture$1);
  return self;
}

- (id<JavaUtilIterator>)iterator {
  return create_OrgApacheLuceneCodecsNormsConsumer_1_1_initWithOrgApacheLuceneCodecsNormsConsumer_1_(self);
}

- (void)forEachWithJavaUtilFunctionConsumer:(id<JavaUtilFunctionConsumer>)arg0 {
  JavaLangIterable_forEachWithJavaUtilFunctionConsumer_(self, arg0);
}

- (id<JavaUtilSpliterator>)spliterator {
  return JavaLangIterable_spliterator(self);
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf);
}

- (void)dealloc {
  RELEASE_(val$toMerge_);
  RELEASE_(val$mergeState_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "LJavaUtilIterator;", 0x1, -1, -1, -1, 1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithJavaUtilList:withOrgApacheLuceneIndexMergeState:);
  methods[1].selector = @selector(iterator);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "val$toMerge_", "LJavaUtilList;", .constantValue.asLong = 0, 0x1012, -1, -1, 2, -1 },
    { "val$mergeState_", "LOrgApacheLuceneIndexMergeState;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LJavaUtilList;LOrgApacheLuceneIndexMergeState;", "()Ljava/util/Iterator<Ljava/lang/Number;>;", "Ljava/util/List<Lorg/apache/lucene/index/NumericDocValues;>;", "LOrgApacheLuceneCodecsNormsConsumer;", "mergeNormsFieldWithOrgApacheLuceneIndexFieldInfo:withOrgApacheLuceneIndexMergeState:withJavaUtilList:", "Ljava/lang/Object;Ljava/lang/Iterable<Ljava/lang/Number;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsNormsConsumer_1 = { "", "org.apache.lucene.codecs", ptrTable, methods, fields, 7, 0x8010, 2, 2, 3, -1, 4, 5, -1 };
  return &_OrgApacheLuceneCodecsNormsConsumer_1;
}

@end

void OrgApacheLuceneCodecsNormsConsumer_1_initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_(OrgApacheLuceneCodecsNormsConsumer_1 *self, id<JavaUtilList> capture$0, OrgApacheLuceneIndexMergeState *capture$1) {
  JreStrongAssign(&self->val$toMerge_, capture$0);
  JreStrongAssign(&self->val$mergeState_, capture$1);
  NSObject_init(self);
}

OrgApacheLuceneCodecsNormsConsumer_1 *new_OrgApacheLuceneCodecsNormsConsumer_1_initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_(id<JavaUtilList> capture$0, OrgApacheLuceneIndexMergeState *capture$1) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneCodecsNormsConsumer_1, initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_, capture$0, capture$1)
}

OrgApacheLuceneCodecsNormsConsumer_1 *create_OrgApacheLuceneCodecsNormsConsumer_1_initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_(id<JavaUtilList> capture$0, OrgApacheLuceneIndexMergeState *capture$1) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneCodecsNormsConsumer_1, initWithJavaUtilList_withOrgApacheLuceneIndexMergeState_, capture$0, capture$1)
}

@implementation OrgApacheLuceneCodecsNormsConsumer_1_1

- (instancetype)initWithOrgApacheLuceneCodecsNormsConsumer_1:(OrgApacheLuceneCodecsNormsConsumer_1 *)outer$ {
  OrgApacheLuceneCodecsNormsConsumer_1_1_initWithOrgApacheLuceneCodecsNormsConsumer_1_(self, outer$);
  return self;
}

- (jboolean)hasNext {
  return nextIsSet_ || OrgApacheLuceneCodecsNormsConsumer_1_1_setNext(self);
}

- (void)remove {
  @throw create_JavaLangUnsupportedOperationException_init();
}

- (NSNumber *)next {
  if (![self hasNext]) {
    @throw create_JavaUtilNoSuchElementException_init();
  }
  JreAssert(nextIsSet_, @"org/apache/lucene/codecs/NormsConsumer.java:138 condition failed: assert nextIsSet;");
  nextIsSet_ = false;
  return JavaLangLong_valueOfWithLong_(nextValue_);
}

- (jboolean)setNext {
  return OrgApacheLuceneCodecsNormsConsumer_1_1_setNext(self);
}

- (void)forEachRemainingWithJavaUtilFunctionConsumer:(id<JavaUtilFunctionConsumer>)arg0 {
  JavaUtilIterator_forEachRemainingWithJavaUtilFunctionConsumer_(self, arg0);
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(currentValues_);
  RELEASE_(currentLiveDocs_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSNumber;", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "Z", 0x2, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneCodecsNormsConsumer_1:);
  methods[1].selector = @selector(hasNext);
  methods[2].selector = @selector(remove);
  methods[3].selector = @selector(next);
  methods[4].selector = @selector(setNext);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneCodecsNormsConsumer_1;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "readerUpto_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "docIDUpto_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "nextValue_", "J", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "maxDoc_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "currentValues_", "LOrgApacheLuceneIndexNumericDocValues;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "currentLiveDocs_", "LOrgApacheLuceneUtilBits;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "nextIsSet_", "Z", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneCodecsNormsConsumer_1;", "iterator", "Ljava/lang/Object;Ljava/util/Iterator<Ljava/lang/Number;>;" };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsNormsConsumer_1_1 = { "", "org.apache.lucene.codecs", ptrTable, methods, fields, 7, 0x8010, 5, 8, 0, -1, 1, 2, -1 };
  return &_OrgApacheLuceneCodecsNormsConsumer_1_1;
}

@end

void OrgApacheLuceneCodecsNormsConsumer_1_1_initWithOrgApacheLuceneCodecsNormsConsumer_1_(OrgApacheLuceneCodecsNormsConsumer_1_1 *self, OrgApacheLuceneCodecsNormsConsumer_1 *outer$) {
  JreStrongAssign(&self->this$0_, outer$);
  NSObject_init(self);
  self->readerUpto_ = -1;
}

OrgApacheLuceneCodecsNormsConsumer_1_1 *new_OrgApacheLuceneCodecsNormsConsumer_1_1_initWithOrgApacheLuceneCodecsNormsConsumer_1_(OrgApacheLuceneCodecsNormsConsumer_1 *outer$) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneCodecsNormsConsumer_1_1, initWithOrgApacheLuceneCodecsNormsConsumer_1_, outer$)
}

OrgApacheLuceneCodecsNormsConsumer_1_1 *create_OrgApacheLuceneCodecsNormsConsumer_1_1_initWithOrgApacheLuceneCodecsNormsConsumer_1_(OrgApacheLuceneCodecsNormsConsumer_1 *outer$) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneCodecsNormsConsumer_1_1, initWithOrgApacheLuceneCodecsNormsConsumer_1_, outer$)
}

jboolean OrgApacheLuceneCodecsNormsConsumer_1_1_setNext(OrgApacheLuceneCodecsNormsConsumer_1_1 *self) {
  while (true) {
    if (self->readerUpto_ == [((id<JavaUtilList>) nil_chk(self->this$0_->val$toMerge_)) size]) {
      return false;
    }
    if (self->currentValues_ == nil || self->docIDUpto_ == self->maxDoc_) {
      self->readerUpto_++;
      if (self->readerUpto_ < [self->this$0_->val$toMerge_ size]) {
        JreStrongAssign(&self->currentValues_, [self->this$0_->val$toMerge_ getWithInt:self->readerUpto_]);
        JreStrongAssign(&self->currentLiveDocs_, IOSObjectArray_Get(nil_chk(((OrgApacheLuceneIndexMergeState *) nil_chk(self->this$0_->val$mergeState_))->liveDocs_), self->readerUpto_));
        self->maxDoc_ = IOSIntArray_Get(nil_chk(self->this$0_->val$mergeState_->maxDocs_), self->readerUpto_);
      }
      self->docIDUpto_ = 0;
      continue;
    }
    if (self->currentLiveDocs_ == nil || [self->currentLiveDocs_ getWithInt:self->docIDUpto_]) {
      self->nextIsSet_ = true;
      self->nextValue_ = [((OrgApacheLuceneIndexNumericDocValues *) nil_chk(self->currentValues_)) getWithInt:self->docIDUpto_];
      self->docIDUpto_++;
      return true;
    }
    self->docIDUpto_++;
  }
}
