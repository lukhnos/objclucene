//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/util/RoaringDocIdSet.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Math.h"
#include "java/util/Arrays.h"
#include "org/apache/lucene/search/DocIdSet.h"
#include "org/apache/lucene/search/DocIdSetIterator.h"
#include "org/apache/lucene/util/BitDocIdSet.h"
#include "org/apache/lucene/util/FixedBitSet.h"
#include "org/apache/lucene/util/NotDocIdSet.h"
#include "org/apache/lucene/util/RamUsageEstimator.h"
#include "org/apache/lucene/util/RoaringDocIdSet.h"

#if __has_feature(objc_arc)
#error "org/apache/lucene/util/RoaringDocIdSet must not be compiled with ARC (-fobjc-arc)"
#endif

@interface OrgApacheLuceneUtilRoaringDocIdSet () {
 @public
  IOSObjectArray *docIdSets_;
  jint cardinality_;
  jlong ramBytesUsed_;
}

- (instancetype)initWithOrgApacheLuceneSearchDocIdSetArray:(IOSObjectArray *)docIdSets
                                                   withInt:(jint)cardinality;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilRoaringDocIdSet, docIdSets_, IOSObjectArray *)

inline jint OrgApacheLuceneUtilRoaringDocIdSet_get_BLOCK_SIZE(void);
#define OrgApacheLuceneUtilRoaringDocIdSet_BLOCK_SIZE 65536
J2OBJC_STATIC_FIELD_CONSTANT(OrgApacheLuceneUtilRoaringDocIdSet, BLOCK_SIZE, jint)

inline jint OrgApacheLuceneUtilRoaringDocIdSet_get_MAX_ARRAY_LENGTH(void);
#define OrgApacheLuceneUtilRoaringDocIdSet_MAX_ARRAY_LENGTH 4096
J2OBJC_STATIC_FIELD_CONSTANT(OrgApacheLuceneUtilRoaringDocIdSet, MAX_ARRAY_LENGTH, jint)

inline jlong OrgApacheLuceneUtilRoaringDocIdSet_get_BASE_RAM_BYTES_USED(void);
static jlong OrgApacheLuceneUtilRoaringDocIdSet_BASE_RAM_BYTES_USED;
J2OBJC_STATIC_FIELD_PRIMITIVE_FINAL(OrgApacheLuceneUtilRoaringDocIdSet, BASE_RAM_BYTES_USED, jlong)

__attribute__((unused)) static void OrgApacheLuceneUtilRoaringDocIdSet_initWithOrgApacheLuceneSearchDocIdSetArray_withInt_(OrgApacheLuceneUtilRoaringDocIdSet *self, IOSObjectArray *docIdSets, jint cardinality);

__attribute__((unused)) static OrgApacheLuceneUtilRoaringDocIdSet *new_OrgApacheLuceneUtilRoaringDocIdSet_initWithOrgApacheLuceneSearchDocIdSetArray_withInt_(IOSObjectArray *docIdSets, jint cardinality) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneUtilRoaringDocIdSet *create_OrgApacheLuceneUtilRoaringDocIdSet_initWithOrgApacheLuceneSearchDocIdSetArray_withInt_(IOSObjectArray *docIdSets, jint cardinality);

@interface OrgApacheLuceneUtilRoaringDocIdSet_Builder () {
 @public
  jint maxDoc_;
  IOSObjectArray *sets_;
  jint cardinality_;
  jint lastDocId_;
  jint currentBlock_;
  jint currentBlockCardinality_;
  IOSShortArray *buffer_;
  OrgApacheLuceneUtilFixedBitSet *denseBuffer_;
}

- (void)flush;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilRoaringDocIdSet_Builder, sets_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilRoaringDocIdSet_Builder, buffer_, IOSShortArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilRoaringDocIdSet_Builder, denseBuffer_, OrgApacheLuceneUtilFixedBitSet *)

__attribute__((unused)) static void OrgApacheLuceneUtilRoaringDocIdSet_Builder_flush(OrgApacheLuceneUtilRoaringDocIdSet_Builder *self);

/*!
 @brief <code>DocIdSet</code> implementation that can store documents up to 2^16-1 in a short[].
 */
@interface OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet : OrgApacheLuceneSearchDocIdSet {
 @public
  IOSShortArray *docIDs_;
}

- (instancetype)initWithShortArray:(IOSShortArray *)docIDs;

- (jlong)ramBytesUsed;

- (OrgApacheLuceneSearchDocIdSetIterator *)iterator;

@end

J2OBJC_STATIC_INIT(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet)

J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet, docIDs_, IOSShortArray *)

inline jlong OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_get_BASE_RAM_BYTES_USED(void);
static jlong OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_BASE_RAM_BYTES_USED;
J2OBJC_STATIC_FIELD_PRIMITIVE_FINAL(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet, BASE_RAM_BYTES_USED, jlong)

__attribute__((unused)) static void OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_initWithShortArray_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *self, IOSShortArray *docIDs);

__attribute__((unused)) static OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *new_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_initWithShortArray_(IOSShortArray *docIDs) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *create_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_initWithShortArray_(IOSShortArray *docIDs);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet)

@interface OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 : OrgApacheLuceneSearchDocIdSetIterator {
 @public
  OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *this$0_;
  jint i_;
  jint doc_;
}

- (instancetype)initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet:(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *)outer$;

- (jint)docIdWithInt:(jint)i;

- (jint)nextDoc;

- (jint)docID;

- (jlong)cost;

- (jint)advanceWithInt:(jint)target;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1)

__attribute__((unused)) static void OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 *self, OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *outer$);

__attribute__((unused)) static OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 *new_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 *create_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *outer$);

__attribute__((unused)) static jint OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_docIdWithInt_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 *self, jint i);

@interface OrgApacheLuceneUtilRoaringDocIdSet_Iterator : OrgApacheLuceneSearchDocIdSetIterator {
 @public
  OrgApacheLuceneUtilRoaringDocIdSet *this$0_;
  jint block_;
  OrgApacheLuceneSearchDocIdSetIterator *sub_;
  jint doc_;
}

- (instancetype)initWithOrgApacheLuceneUtilRoaringDocIdSet:(OrgApacheLuceneUtilRoaringDocIdSet *)outer$;

- (jint)docID;

- (jint)nextDoc;

- (jint)advanceWithInt:(jint)target;

- (jint)firstDocFromNextBlock;

- (jlong)cost;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneUtilRoaringDocIdSet_Iterator)

J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilRoaringDocIdSet_Iterator, sub_, OrgApacheLuceneSearchDocIdSetIterator *)

__attribute__((unused)) static void OrgApacheLuceneUtilRoaringDocIdSet_Iterator_initWithOrgApacheLuceneUtilRoaringDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet_Iterator *self, OrgApacheLuceneUtilRoaringDocIdSet *outer$);

__attribute__((unused)) static OrgApacheLuceneUtilRoaringDocIdSet_Iterator *new_OrgApacheLuceneUtilRoaringDocIdSet_Iterator_initWithOrgApacheLuceneUtilRoaringDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneUtilRoaringDocIdSet_Iterator *create_OrgApacheLuceneUtilRoaringDocIdSet_Iterator_initWithOrgApacheLuceneUtilRoaringDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet *outer$);

__attribute__((unused)) static jint OrgApacheLuceneUtilRoaringDocIdSet_Iterator_firstDocFromNextBlock(OrgApacheLuceneUtilRoaringDocIdSet_Iterator *self);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneUtilRoaringDocIdSet_Iterator)

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneUtilRoaringDocIdSet)

@implementation OrgApacheLuceneUtilRoaringDocIdSet

- (instancetype)initWithOrgApacheLuceneSearchDocIdSetArray:(IOSObjectArray *)docIdSets
                                                   withInt:(jint)cardinality {
  OrgApacheLuceneUtilRoaringDocIdSet_initWithOrgApacheLuceneSearchDocIdSetArray_withInt_(self, docIdSets, cardinality);
  return self;
}

- (jboolean)isCacheable {
  return true;
}

- (jlong)ramBytesUsed {
  return ramBytesUsed_;
}

- (OrgApacheLuceneSearchDocIdSetIterator *)iterator {
  if (cardinality_ == 0) {
    return nil;
  }
  return create_OrgApacheLuceneUtilRoaringDocIdSet_Iterator_initWithOrgApacheLuceneUtilRoaringDocIdSet_(self);
}

- (jint)cardinality {
  return cardinality_;
}

- (NSString *)description {
  return JreStrcat("$IC", @"RoaringDocIdSet(cardinality=", cardinality_, ')');
}

- (void)dealloc {
  RELEASE_(docIdSets_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x2, -1, 0, -1, -1, -1, -1 },
    { NULL, "Z", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "J", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchDocIdSetIterator;", 0x1, -1, -1, 1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x1, 2, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneSearchDocIdSetArray:withInt:);
  methods[1].selector = @selector(isCacheable);
  methods[2].selector = @selector(ramBytesUsed);
  methods[3].selector = @selector(iterator);
  methods[4].selector = @selector(cardinality);
  methods[5].selector = @selector(description);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "BLOCK_SIZE", "I", .constantValue.asInt = OrgApacheLuceneUtilRoaringDocIdSet_BLOCK_SIZE, 0x1a, -1, -1, -1, -1 },
    { "MAX_ARRAY_LENGTH", "I", .constantValue.asInt = OrgApacheLuceneUtilRoaringDocIdSet_MAX_ARRAY_LENGTH, 0x1a, -1, -1, -1, -1 },
    { "BASE_RAM_BYTES_USED", "J", .constantValue.asLong = 0, 0x1a, -1, 3, -1, -1 },
    { "docIdSets_", "[LOrgApacheLuceneSearchDocIdSet;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "cardinality_", "I", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "ramBytesUsed_", "J", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "[LOrgApacheLuceneSearchDocIdSet;I", "LJavaIoIOException;", "toString", &OrgApacheLuceneUtilRoaringDocIdSet_BASE_RAM_BYTES_USED, "LOrgApacheLuceneUtilRoaringDocIdSet_Builder;LOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet;LOrgApacheLuceneUtilRoaringDocIdSet_Iterator;" };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilRoaringDocIdSet = { "RoaringDocIdSet", "org.apache.lucene.util", ptrTable, methods, fields, 7, 0x1, 6, 6, -1, 4, -1, -1, -1 };
  return &_OrgApacheLuceneUtilRoaringDocIdSet;
}

+ (void)initialize {
  if (self == [OrgApacheLuceneUtilRoaringDocIdSet class]) {
    OrgApacheLuceneUtilRoaringDocIdSet_BASE_RAM_BYTES_USED = OrgApacheLuceneUtilRamUsageEstimator_shallowSizeOfInstanceWithIOSClass_(OrgApacheLuceneUtilRoaringDocIdSet_class_());
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneUtilRoaringDocIdSet)
  }
}

@end

void OrgApacheLuceneUtilRoaringDocIdSet_initWithOrgApacheLuceneSearchDocIdSetArray_withInt_(OrgApacheLuceneUtilRoaringDocIdSet *self, IOSObjectArray *docIdSets, jint cardinality) {
  OrgApacheLuceneSearchDocIdSet_init(self);
  JreStrongAssign(&self->docIdSets_, docIdSets);
  jlong ramBytesUsed = OrgApacheLuceneUtilRoaringDocIdSet_BASE_RAM_BYTES_USED + OrgApacheLuceneUtilRamUsageEstimator_shallowSizeOfWithNSObjectArray_(docIdSets);
  {
    IOSObjectArray *a__ = self->docIdSets_;
    OrgApacheLuceneSearchDocIdSet * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    OrgApacheLuceneSearchDocIdSet * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      OrgApacheLuceneSearchDocIdSet *set = *b__++;
      if (set != nil) {
        ramBytesUsed += [set ramBytesUsed];
      }
    }
  }
  self->ramBytesUsed_ = ramBytesUsed;
  self->cardinality_ = cardinality;
}

OrgApacheLuceneUtilRoaringDocIdSet *new_OrgApacheLuceneUtilRoaringDocIdSet_initWithOrgApacheLuceneSearchDocIdSetArray_withInt_(IOSObjectArray *docIdSets, jint cardinality) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilRoaringDocIdSet, initWithOrgApacheLuceneSearchDocIdSetArray_withInt_, docIdSets, cardinality)
}

OrgApacheLuceneUtilRoaringDocIdSet *create_OrgApacheLuceneUtilRoaringDocIdSet_initWithOrgApacheLuceneSearchDocIdSetArray_withInt_(IOSObjectArray *docIdSets, jint cardinality) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilRoaringDocIdSet, initWithOrgApacheLuceneSearchDocIdSetArray_withInt_, docIdSets, cardinality)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilRoaringDocIdSet)

@implementation OrgApacheLuceneUtilRoaringDocIdSet_Builder

- (instancetype)initWithInt:(jint)maxDoc {
  OrgApacheLuceneUtilRoaringDocIdSet_Builder_initWithInt_(self, maxDoc);
  return self;
}

- (void)flush {
  OrgApacheLuceneUtilRoaringDocIdSet_Builder_flush(self);
}

- (OrgApacheLuceneUtilRoaringDocIdSet_Builder *)addWithInt:(jint)docId {
  if (docId <= lastDocId_) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$I", @"Doc ids must be added in-order, got ", docId, @" which is <= lastDocID=", lastDocId_));
  }
  jint block = JreURShift32(docId, 16);
  if (block != currentBlock_) {
    OrgApacheLuceneUtilRoaringDocIdSet_Builder_flush(self);
    currentBlock_ = block;
  }
  if (currentBlockCardinality_ < OrgApacheLuceneUtilRoaringDocIdSet_MAX_ARRAY_LENGTH) {
    *IOSShortArray_GetRef(nil_chk(buffer_), currentBlockCardinality_) = (jshort) docId;
  }
  else {
    if (denseBuffer_ == nil) {
      jint numBits = JavaLangMath_minWithInt_withInt_(JreLShift32(1, 16), maxDoc_ - (JreLShift32(block, 16)));
      JreStrongAssignAndConsume(&denseBuffer_, new_OrgApacheLuceneUtilFixedBitSet_initWithInt_(numBits));
      {
        IOSShortArray *a__ = buffer_;
        jshort const *b__ = ((IOSShortArray *) nil_chk(a__))->buffer_;
        jshort const *e__ = b__ + a__->size_;
        while (b__ < e__) {
          jshort doc = *b__++;
          [((OrgApacheLuceneUtilFixedBitSet *) nil_chk(denseBuffer_)) setWithInt:doc & (jint) 0xFFFF];
        }
      }
    }
    [((OrgApacheLuceneUtilFixedBitSet *) nil_chk(denseBuffer_)) setWithInt:docId & (jint) 0xFFFF];
  }
  lastDocId_ = docId;
  currentBlockCardinality_ += 1;
  return self;
}

- (OrgApacheLuceneUtilRoaringDocIdSet_Builder *)addWithOrgApacheLuceneSearchDocIdSetIterator:(OrgApacheLuceneSearchDocIdSetIterator *)disi {
  for (jint doc = [((OrgApacheLuceneSearchDocIdSetIterator *) nil_chk(disi)) nextDoc]; doc != OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS; doc = [disi nextDoc]) {
    [self addWithInt:doc];
  }
  return self;
}

- (OrgApacheLuceneUtilRoaringDocIdSet *)build {
  OrgApacheLuceneUtilRoaringDocIdSet_Builder_flush(self);
  return create_OrgApacheLuceneUtilRoaringDocIdSet_initWithOrgApacheLuceneSearchDocIdSetArray_withInt_(sets_, cardinality_);
}

- (void)dealloc {
  RELEASE_(sets_);
  RELEASE_(buffer_);
  RELEASE_(denseBuffer_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, 0, -1, -1, -1, -1 },
    { NULL, "V", 0x2, -1, -1, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilRoaringDocIdSet_Builder;", 0x1, 1, 0, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilRoaringDocIdSet_Builder;", 0x1, 1, 2, 3, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneUtilRoaringDocIdSet;", 0x1, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithInt:);
  methods[1].selector = @selector(flush);
  methods[2].selector = @selector(addWithInt:);
  methods[3].selector = @selector(addWithOrgApacheLuceneSearchDocIdSetIterator:);
  methods[4].selector = @selector(build);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "maxDoc_", "I", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "sets_", "[LOrgApacheLuceneSearchDocIdSet;", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "cardinality_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "lastDocId_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "currentBlock_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "currentBlockCardinality_", "I", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
    { "buffer_", "[S", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
    { "denseBuffer_", "LOrgApacheLuceneUtilFixedBitSet;", .constantValue.asLong = 0, 0x2, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "I", "add", "LOrgApacheLuceneSearchDocIdSetIterator;", "LJavaIoIOException;", "LOrgApacheLuceneUtilRoaringDocIdSet;" };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilRoaringDocIdSet_Builder = { "Builder", "org.apache.lucene.util", ptrTable, methods, fields, 7, 0x9, 5, 8, 4, -1, -1, -1, -1 };
  return &_OrgApacheLuceneUtilRoaringDocIdSet_Builder;
}

@end

void OrgApacheLuceneUtilRoaringDocIdSet_Builder_initWithInt_(OrgApacheLuceneUtilRoaringDocIdSet_Builder *self, jint maxDoc) {
  NSObject_init(self);
  self->maxDoc_ = maxDoc;
  JreStrongAssignAndConsume(&self->sets_, [IOSObjectArray newArrayWithLength:JreURShift32((maxDoc + (JreLShift32(1, 16)) - 1), 16) type:OrgApacheLuceneSearchDocIdSet_class_()]);
  self->lastDocId_ = -1;
  self->currentBlock_ = -1;
  JreStrongAssignAndConsume(&self->buffer_, [IOSShortArray newArrayWithLength:OrgApacheLuceneUtilRoaringDocIdSet_MAX_ARRAY_LENGTH]);
}

OrgApacheLuceneUtilRoaringDocIdSet_Builder *new_OrgApacheLuceneUtilRoaringDocIdSet_Builder_initWithInt_(jint maxDoc) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilRoaringDocIdSet_Builder, initWithInt_, maxDoc)
}

OrgApacheLuceneUtilRoaringDocIdSet_Builder *create_OrgApacheLuceneUtilRoaringDocIdSet_Builder_initWithInt_(jint maxDoc) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilRoaringDocIdSet_Builder, initWithInt_, maxDoc)
}

void OrgApacheLuceneUtilRoaringDocIdSet_Builder_flush(OrgApacheLuceneUtilRoaringDocIdSet_Builder *self) {
  JreAssert(self->currentBlockCardinality_ <= OrgApacheLuceneUtilRoaringDocIdSet_BLOCK_SIZE, @"org/apache/lucene/util/RoaringDocIdSet.java:71 condition failed: assert currentBlockCardinality <= BLOCK_SIZE;");
  if (self->currentBlockCardinality_ <= OrgApacheLuceneUtilRoaringDocIdSet_MAX_ARRAY_LENGTH) {
    JreAssert(self->denseBuffer_ == nil, @"org/apache/lucene/util/RoaringDocIdSet.java:74 condition failed: assert denseBuffer == null;");
    if (self->currentBlockCardinality_ > 0) {
      IOSObjectArray_SetAndConsume(nil_chk(self->sets_), self->currentBlock_, new_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_initWithShortArray_(JavaUtilArrays_copyOfWithShortArray_withInt_(self->buffer_, self->currentBlockCardinality_)));
    }
  }
  else {
    JreAssert(self->denseBuffer_ != nil, @"org/apache/lucene/util/RoaringDocIdSet.java:79 condition failed: assert denseBuffer != null;");
    JreAssert([((OrgApacheLuceneUtilFixedBitSet *) nil_chk(self->denseBuffer_)) cardinality] == self->currentBlockCardinality_, @"org/apache/lucene/util/RoaringDocIdSet.java:80 condition failed: assert denseBuffer.cardinality() == currentBlockCardinality;");
    if ([((OrgApacheLuceneUtilFixedBitSet *) nil_chk(self->denseBuffer_)) length] == OrgApacheLuceneUtilRoaringDocIdSet_BLOCK_SIZE && OrgApacheLuceneUtilRoaringDocIdSet_BLOCK_SIZE - self->currentBlockCardinality_ < OrgApacheLuceneUtilRoaringDocIdSet_MAX_ARRAY_LENGTH) {
      IOSShortArray *excludedDocs = [IOSShortArray arrayWithLength:OrgApacheLuceneUtilRoaringDocIdSet_BLOCK_SIZE - self->currentBlockCardinality_];
      [((OrgApacheLuceneUtilFixedBitSet *) nil_chk(self->denseBuffer_)) flipWithInt:0 withInt:[self->denseBuffer_ length]];
      jint excludedDoc = -1;
      for (jint i = 0; i < excludedDocs->size_; ++i) {
        excludedDoc = [((OrgApacheLuceneUtilFixedBitSet *) nil_chk(self->denseBuffer_)) nextSetBitWithInt:excludedDoc + 1];
        JreAssert(excludedDoc != OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS, @"org/apache/lucene/util/RoaringDocIdSet.java:88 condition failed: assert excludedDoc != DocIdSetIterator.NO_MORE_DOCS;");
        *IOSShortArray_GetRef(excludedDocs, i) = (jshort) excludedDoc;
      }
      JreAssert(excludedDoc + 1 == [((OrgApacheLuceneUtilFixedBitSet *) nil_chk(self->denseBuffer_)) length] || [((OrgApacheLuceneUtilFixedBitSet *) nil_chk(self->denseBuffer_)) nextSetBitWithInt:excludedDoc + 1] == OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS, @"org/apache/lucene/util/RoaringDocIdSet.java:91 condition failed: assert excludedDoc + 1 == denseBuffer.length() || denseBuffer.nextSetBit(excludedDoc + 1) == DocIdSetIterator.NO_MORE_DOCS;");
      IOSObjectArray_SetAndConsume(nil_chk(self->sets_), self->currentBlock_, new_OrgApacheLuceneUtilNotDocIdSet_initWithInt_withOrgApacheLuceneSearchDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet_BLOCK_SIZE, create_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_initWithShortArray_(excludedDocs)));
    }
    else {
      IOSObjectArray_SetAndConsume(nil_chk(self->sets_), self->currentBlock_, new_OrgApacheLuceneUtilBitDocIdSet_initWithOrgApacheLuceneUtilBitSet_withLong_(self->denseBuffer_, self->currentBlockCardinality_));
    }
    JreStrongAssign(&self->denseBuffer_, nil);
  }
  self->cardinality_ += self->currentBlockCardinality_;
  JreStrongAssign(&self->denseBuffer_, nil);
  self->currentBlockCardinality_ = 0;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilRoaringDocIdSet_Builder)

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet)

@implementation OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet

- (instancetype)initWithShortArray:(IOSShortArray *)docIDs {
  OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_initWithShortArray_(self, docIDs);
  return self;
}

- (jlong)ramBytesUsed {
  return OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_BASE_RAM_BYTES_USED + OrgApacheLuceneUtilRamUsageEstimator_sizeOfWithShortArray_(docIDs_);
}

- (OrgApacheLuceneSearchDocIdSetIterator *)iterator {
  return create_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_(self);
}

- (void)dealloc {
  RELEASE_(docIDs_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x2, -1, 0, -1, -1, -1, -1 },
    { NULL, "J", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LOrgApacheLuceneSearchDocIdSetIterator;", 0x1, -1, -1, 1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithShortArray:);
  methods[1].selector = @selector(ramBytesUsed);
  methods[2].selector = @selector(iterator);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "BASE_RAM_BYTES_USED", "J", .constantValue.asLong = 0, 0x1a, -1, 2, -1, -1 },
    { "docIDs_", "[S", .constantValue.asLong = 0, 0x12, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "[S", "LJavaIoIOException;", &OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_BASE_RAM_BYTES_USED, "LOrgApacheLuceneUtilRoaringDocIdSet;" };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet = { "ShortArrayDocIdSet", "org.apache.lucene.util", ptrTable, methods, fields, 7, 0xa, 3, 2, 3, -1, -1, -1, -1 };
  return &_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet;
}

+ (void)initialize {
  if (self == [OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet class]) {
    OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_BASE_RAM_BYTES_USED = OrgApacheLuceneUtilRamUsageEstimator_shallowSizeOfInstanceWithIOSClass_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_class_());
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet)
  }
}

@end

void OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_initWithShortArray_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *self, IOSShortArray *docIDs) {
  OrgApacheLuceneSearchDocIdSet_init(self);
  JreStrongAssign(&self->docIDs_, docIDs);
}

OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *new_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_initWithShortArray_(IOSShortArray *docIDs) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet, initWithShortArray_, docIDs)
}

OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *create_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_initWithShortArray_(IOSShortArray *docIDs) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet, initWithShortArray_, docIDs)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet)

@implementation OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1

- (instancetype)initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet:(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *)outer$ {
  OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_(self, outer$);
  return self;
}

- (jint)docIdWithInt:(jint)i {
  return OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_docIdWithInt_(self, i);
}

- (jint)nextDoc {
  if (++i_ >= ((IOSShortArray *) nil_chk(this$0_->docIDs_))->size_) {
    return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  return doc_ = OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_docIdWithInt_(self, i_);
}

- (jint)docID {
  return doc_;
}

- (jlong)cost {
  return ((IOSShortArray *) nil_chk(this$0_->docIDs_))->size_;
}

- (jint)advanceWithInt:(jint)target {
  jint lo = i_ + 1;
  jint hi = ((IOSShortArray *) nil_chk(this$0_->docIDs_))->size_ - 1;
  while (lo <= hi) {
    jint mid = JreURShift32((lo + hi), 1);
    jint midDoc = OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_docIdWithInt_(self, mid);
    if (midDoc < target) {
      lo = mid + 1;
    }
    else {
      hi = mid - 1;
    }
  }
  if (lo == this$0_->docIDs_->size_) {
    i_ = this$0_->docIDs_->size_;
    return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  else {
    i_ = lo;
    return doc_ = OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_docIdWithInt_(self, i_);
  }
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, -1, -1, -1, -1 },
    { NULL, "I", 0x2, 1, 2, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, 3, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "J", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x1, 4, 2, 3, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet:);
  methods[1].selector = @selector(docIdWithInt:);
  methods[2].selector = @selector(nextDoc);
  methods[3].selector = @selector(docID);
  methods[4].selector = @selector(cost);
  methods[5].selector = @selector(advanceWithInt:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "i_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "doc_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet;", "docId", "I", "LJavaIoIOException;", "advance", "iterator" };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 = { "", "org.apache.lucene.util", ptrTable, methods, fields, 7, 0x8010, 6, 3, 0, -1, 5, -1, -1 };
  return &_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1;
}

@end

void OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 *self, OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *outer$) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchDocIdSetIterator_init(self);
  self->i_ = -1;
  self->doc_ = -1;
}

OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 *new_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *outer$) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1, initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_, outer$)
}

OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 *create_OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet *outer$) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1, initWithOrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_, outer$)
}

jint OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1_docIdWithInt_(OrgApacheLuceneUtilRoaringDocIdSet_ShortArrayDocIdSet_1 *self, jint i) {
  return IOSShortArray_Get(nil_chk(self->this$0_->docIDs_), i) & (jint) 0xFFFF;
}

@implementation OrgApacheLuceneUtilRoaringDocIdSet_Iterator

- (instancetype)initWithOrgApacheLuceneUtilRoaringDocIdSet:(OrgApacheLuceneUtilRoaringDocIdSet *)outer$ {
  OrgApacheLuceneUtilRoaringDocIdSet_Iterator_initWithOrgApacheLuceneUtilRoaringDocIdSet_(self, outer$);
  return self;
}

- (jint)docID {
  return doc_;
}

- (jint)nextDoc {
  jint subNext = [((OrgApacheLuceneSearchDocIdSetIterator *) nil_chk(sub_)) nextDoc];
  if (subNext == OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS) {
    return OrgApacheLuceneUtilRoaringDocIdSet_Iterator_firstDocFromNextBlock(self);
  }
  return doc_ = (JreLShift32(block_, 16)) | subNext;
}

- (jint)advanceWithInt:(jint)target {
  jint targetBlock = JreURShift32(target, 16);
  if (targetBlock != block_) {
    block_ = targetBlock;
    if (block_ >= ((IOSObjectArray *) nil_chk(this$0_->docIdSets_))->size_) {
      JreStrongAssign(&sub_, nil);
      return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
    }
    if (IOSObjectArray_Get(this$0_->docIdSets_, block_) == nil) {
      return OrgApacheLuceneUtilRoaringDocIdSet_Iterator_firstDocFromNextBlock(self);
    }
    JreStrongAssign(&sub_, [((OrgApacheLuceneSearchDocIdSet *) nil_chk(IOSObjectArray_Get(this$0_->docIdSets_, block_))) iterator]);
  }
  jint subNext = [((OrgApacheLuceneSearchDocIdSetIterator *) nil_chk(sub_)) advanceWithInt:target & (jint) 0xFFFF];
  if (subNext == OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS) {
    return OrgApacheLuceneUtilRoaringDocIdSet_Iterator_firstDocFromNextBlock(self);
  }
  return doc_ = (JreLShift32(block_, 16)) | subNext;
}

- (jint)firstDocFromNextBlock {
  return OrgApacheLuceneUtilRoaringDocIdSet_Iterator_firstDocFromNextBlock(self);
}

- (jlong)cost {
  return this$0_->cardinality_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(sub_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x0, -1, 0, 1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "I", 0x1, -1, -1, 1, -1, -1, -1 },
    { NULL, "I", 0x1, 2, 3, 1, -1, -1, -1 },
    { NULL, "I", 0x2, -1, -1, 1, -1, -1, -1 },
    { NULL, "J", 0x1, -1, -1, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  #pragma clang diagnostic ignored "-Wundeclared-selector"
  methods[0].selector = @selector(initWithOrgApacheLuceneUtilRoaringDocIdSet:);
  methods[1].selector = @selector(docID);
  methods[2].selector = @selector(nextDoc);
  methods[3].selector = @selector(advanceWithInt:);
  methods[4].selector = @selector(firstDocFromNextBlock);
  methods[5].selector = @selector(cost);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", "LOrgApacheLuceneUtilRoaringDocIdSet;", .constantValue.asLong = 0, 0x1012, -1, -1, -1, -1 },
    { "block_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "sub_", "LOrgApacheLuceneSearchDocIdSetIterator;", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
    { "doc_", "I", .constantValue.asLong = 0, 0x0, -1, -1, -1, -1 },
  };
  static const void *ptrTable[] = { "LOrgApacheLuceneUtilRoaringDocIdSet;", "LJavaIoIOException;", "advance", "I" };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilRoaringDocIdSet_Iterator = { "Iterator", "org.apache.lucene.util", ptrTable, methods, fields, 7, 0x2, 6, 4, 0, -1, -1, -1, -1 };
  return &_OrgApacheLuceneUtilRoaringDocIdSet_Iterator;
}

@end

void OrgApacheLuceneUtilRoaringDocIdSet_Iterator_initWithOrgApacheLuceneUtilRoaringDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet_Iterator *self, OrgApacheLuceneUtilRoaringDocIdSet *outer$) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchDocIdSetIterator_init(self);
  JreStrongAssign(&self->sub_, nil);
  self->doc_ = -1;
  self->block_ = -1;
  JreStrongAssign(&self->sub_, OrgApacheLuceneSearchDocIdSetIterator_empty());
}

OrgApacheLuceneUtilRoaringDocIdSet_Iterator *new_OrgApacheLuceneUtilRoaringDocIdSet_Iterator_initWithOrgApacheLuceneUtilRoaringDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet *outer$) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilRoaringDocIdSet_Iterator, initWithOrgApacheLuceneUtilRoaringDocIdSet_, outer$)
}

OrgApacheLuceneUtilRoaringDocIdSet_Iterator *create_OrgApacheLuceneUtilRoaringDocIdSet_Iterator_initWithOrgApacheLuceneUtilRoaringDocIdSet_(OrgApacheLuceneUtilRoaringDocIdSet *outer$) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilRoaringDocIdSet_Iterator, initWithOrgApacheLuceneUtilRoaringDocIdSet_, outer$)
}

jint OrgApacheLuceneUtilRoaringDocIdSet_Iterator_firstDocFromNextBlock(OrgApacheLuceneUtilRoaringDocIdSet_Iterator *self) {
  while (true) {
    self->block_ += 1;
    if (self->block_ >= ((IOSObjectArray *) nil_chk(self->this$0_->docIdSets_))->size_) {
      JreStrongAssign(&self->sub_, nil);
      return self->doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
    }
    else if (IOSObjectArray_Get(self->this$0_->docIdSets_, self->block_) != nil) {
      JreStrongAssign(&self->sub_, [((OrgApacheLuceneSearchDocIdSet *) nil_chk(IOSObjectArray_Get(self->this$0_->docIdSets_, self->block_))) iterator]);
      jint subNext = [((OrgApacheLuceneSearchDocIdSetIterator *) nil_chk(self->sub_)) nextDoc];
      JreAssert(subNext != OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS, @"org/apache/lucene/util/RoaringDocIdSet.java:319 condition failed: assert subNext != NO_MORE_DOCS;");
      return self->doc_ = (JreLShift32(self->block_, 16)) | subNext;
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilRoaringDocIdSet_Iterator)
